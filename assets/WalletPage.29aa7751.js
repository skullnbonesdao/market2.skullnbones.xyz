import{Q as H,b as we,a as Y}from"./QSpace.1cd1e597.js";import{Q as Wt}from"./QPage.efdc76be.js";import{bZ as ae,cr as Ot,bE as U,bY as ie,b_ as ce,b$ as de,c0 as ee,de as We,df as Te,cj as he,a9 as j,aI as g,Z as F,bc as v,a7 as a,co as at,a0 as _,H as q,A as w,cb as E,n as y,Y as d,ay as jt,cV as Gt,d9 as Ht,db as _e,ak as V,c5 as Yt,ah as lt,c1 as nt,b7 as te,cz as Zt,c6 as Xt,dg as Oe,$ as N,be as st,M as qe,cg as xe,ce as T,ca as Z,cf as Ce,cc as Jt,a6 as O,dh as ke,ck as ea,cd as je,aC as Se,cp as z,ch as I,ci as Q,_ as P,D as ot,aQ as ta,aO as aa,d1 as la}from"./index.0c6c88d9.js";import{d as rt,b as ut,a as B,C as X,Q as it,c as na}from"./QTr.fafb74e4.js";import{e as ct,u as Le,a as Be,T as Me,Q as dt,b as mt,C as vt,c as sa}from"./QToggle.bfdd3423.js";import{U as oa,e as J,V as ra,W as ua,i as Ae,j as ft,h as ia,Q as ca}from"./use-checkbox.3ad0608e.js";import{Q as Ge}from"./QSeparator.524ea5ad.js";import{Q as le}from"./QCard.d396d957.js";import{f as da,A as Ve}from"./format_address.78d00af4.js";import{T as ma,h as $e}from"./handle_confirmation.e9f5373c.js";import{a as va,u as fa}from"./use-dark.3d783e06.js";import{Q as bt}from"./QCardSection.0bd7ab55.js";import{_ as ba}from"./plugin-vue_export-helper.21dcd24c.js";import"./QResizeObserver.a1794b11.js";const pa=l=>{const u=ae(l),{encode:i,decode:o}=ct(u),e=u;return e.decode=(s,m)=>!!o(s,m),e.encode=(s,m,c)=>{const p=Number(s);return i(p,m,c)},e},He=l=>{const u=Ot(32,l),{encode:i,decode:o}=ct(u),e=u;return e.decode=(s,m)=>{const c=o(s,m);return new U(c)},e.encode=(s,m,c)=>{const p=s.toBuffer();return i(p,m,c)},e};class ya extends Error{constructor(u){super(u)}}class _a extends ya{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}const Ye=ie([ae("instruction"),Le("amount")]);function ka(l,u,i,o,e=[],s=ee){const m=Be([{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0}],i,e),c=ce.Buffer.alloc(Ye.span);return Ye.encode({instruction:Me.Burn,amount:BigInt(o)},c),new de({keys:m,programId:s,data:c})}const Ze=ie([ae("instruction")]);function Xe(l,u,i,o=[],e=ee){const s=Be([{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0}],i,o),m=ce.Buffer.alloc(Ze.span);return Ze.encode({instruction:Me.CloseAccount},m),new de({keys:s,programId:e,data:m})}const ga=ie([We("mintAuthorityOption"),He("mintAuthority"),Le("supply"),ae("decimals"),pa("isInitialized"),We("freezeAuthorityOption"),He("freezeAuthority")]);ga.span;async function ue(l,u,i=!1,o=ee,e=Te){if(!i&&!U.isOnCurve(u.toBuffer()))throw new _a;const[s]=await U.findProgramAddress([u.toBuffer(),o.toBuffer(),l.toBuffer()],e);return s}function wa(l,u,i,o,e=ee,s=Te){return ha(l,u,i,o,ce.Buffer.alloc(0),e,s)}function ha(l,u,i,o,e,s=ee,m=Te){const c=[{pubkey:l,isSigner:!0,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:he.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return new de({keys:c,programId:m,data:e})}const Je=ie([ae("instruction"),Le("amount")]);function xa(l,u,i,o,e=[],s=ee){const m=Be([{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0}],i,e),c=ce.Buffer.alloc(Je.span);return Je.encode({instruction:Me.Transfer,amount:BigInt(o)},c),new de({keys:m,programId:s,data:c})}const ge=j({__name:"SolscanLink",props:["address"],setup(l){return(u,i)=>(g(),F(E,{class:"full-width",square:"",color:"primary",size:"sm",icon:"link",target:"_blank",href:"https://solscan.io/account/"+l.address},{default:v(()=>[a(at),_("div",null,q(w(da)(l.address)),1)]),_:1},8,["href"]))}}),et="q-slider__marker-labels",Ca=l=>({value:l}),Sa=({marker:l})=>V("div",{key:l.value,style:l.style,class:l.classes},l.label),pt=[34,37,40,33,39,38],Aa={...fa,...oa,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:l=>l>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},$a=["pan","update:modelValue","change"];function Ta({updateValue:l,updatePosition:u,getDragging:i,formAttrs:o}){const{props:e,emit:s,slots:m,proxy:{$q:c}}=lt(),p=va(e,c),S=ra(o),f=y(!1),r=y(!1),n=y(!1),h=y(!1),x=d(()=>e.vertical===!0?"--v":"--h"),R=d(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),$=d(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(c.lang.rtl===!0)),D=d(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),L=d(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),A=d(()=>e.disable!==!0&&e.readonly!==!0&&D.value<L.value),K=d(()=>(String(e.step).trim().split(".")[1]||"").length),G=d(()=>e.step===0?1:e.step),yt=d(()=>A.value===!0?e.tabindex||0:-1),ne=d(()=>e.max-e.min),Ie=d(()=>L.value-D.value),se=d(()=>ve(D.value)),me=d(()=>ve(L.value)),oe=d(()=>e.vertical===!0?$.value===!0?"bottom":"top":$.value===!0?"right":"left"),De=d(()=>e.vertical===!0?"height":"width"),_t=d(()=>e.vertical===!0?"width":"height"),Qe=d(()=>e.vertical===!0?"vertical":"horizontal"),kt=d(()=>{const t={role:"slider","aria-valuemin":D.value,"aria-valuemax":L.value,"aria-orientation":Qe.value,"data-step":e.step};return e.disable===!0?t["aria-disabled"]="true":e.readonly===!0&&(t["aria-readonly"]="true"),t}),gt=d(()=>`q-slider q-slider${x.value} q-slider--${f.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(A.value===!0?" q-slider--editable":""))+(n.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(p.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+x.value:""));function re(t){const b="q-slider__"+t;return`${b} ${b}${x.value} ${b}${x.value}${R.value}`}function ze(t){const b="q-slider__"+t;return`${b} ${b}${x.value}`}const wt=d(()=>{const t=e.selectionColor||e.color;return"q-slider__selection absolute"+(t!==void 0?` text-${t}`:"")}),ht=d(()=>ze("markers")+" absolute overflow-hidden"),xt=d(()=>ze("track-container")),Ct=d(()=>re("pin")),St=d(()=>re("label")),At=d(()=>re("text-container")),$t=d(()=>re("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),Tt=d(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),qt=d(()=>{const t={[_t.value]:e.trackSize};return e.trackImg!==void 0&&(t.backgroundImage=`url(${e.trackImg}) !important`),t}),Lt=d(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),Ue=d(()=>{const t=me.value-se.value,b={[oe.value]:`${100*se.value}%`,[De.value]:t===0?"2px":`${100*t}%`};return e.innerTrackImg!==void 0&&(b.backgroundImage=`url(${e.innerTrackImg}) !important`),b});function Bt(t){const{min:b,max:k,step:C}=e;let M=b+t*(k-b);if(C>0){const W=(M-b)%C;M+=(Math.abs(W)>=C/2?(W<0?-1:1)*C:0)-W}return K.value>0&&(M=parseFloat(M.toFixed(K.value))),J(M,D.value,L.value)}function ve(t){return ne.value===0?0:(t-e.min)/ne.value}function Mt(t,b){const k=Gt(t),C=e.vertical===!0?J((k.top-b.top)/b.height,0,1):J((k.left-b.left)/b.width,0,1);return J($.value===!0?1-C:C,se.value,me.value)}const Fe=d(()=>Ht(e.markers)===!0?e.markers:G.value),Pe=d(()=>{const t=[],b=Fe.value,k=e.max;let C=e.min;do t.push(C),C+=b;while(C<k);return t.push(k),t}),Ne=d(()=>{const t=` ${et}${x.value}-`;return et+`${t}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${t}${$.value===!0?"rtl":"ltr"}`}),fe=d(()=>e.markerLabels===!1?null:It(e.markerLabels).map((t,b)=>({index:b,value:t.value,label:t.label||t.value,classes:Ne.value+(t.classes!==void 0?" "+t.classes:""),style:{...Re(t.value),...t.style||{}}}))),Ee=d(()=>({markerList:fe.value,markerMap:Dt.value,classes:Ne.value,getStyle:Re})),Vt=d(()=>{const t=Ie.value===0?"2px":100*Fe.value/Ie.value;return{...Ue.value,backgroundSize:e.vertical===!0?`2px ${t}%`:`${t}% 2px`}});function It(t){if(t===!1)return null;if(t===!0)return Pe.value.map(Ca);if(typeof t=="function")return Pe.value.map(k=>{const C=t(k);return _e(C)===!0?{...C,value:k}:{value:k,label:C}});const b=({value:k})=>k>=e.min&&k<=e.max;return Array.isArray(t)===!0?t.map(k=>_e(k)===!0?k:{value:k}).filter(b):Object.keys(t).map(k=>{const C=t[k],M=Number(k);return _e(C)===!0?{...C,value:M}:{value:M,label:C}}).filter(b)}function Re(t){return{[oe.value]:`${100*(t-e.min)/ne.value}%`}}const Dt=d(()=>{if(e.markerLabels===!1)return null;const t={};return fe.value.forEach(b=>{t[b.value]=b}),t});function Qt(){if(m["marker-label-group"]!==void 0)return m["marker-label-group"](Ee.value);const t=m["marker-label"]||Sa;return fe.value.map(b=>t({marker:b,...Ee.value}))}const zt=d(()=>[[ma,Ut,void 0,{[Qe.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Ut(t){t.isFinal===!0?(h.value!==void 0&&(u(t.evt),t.touch===!0&&l(!0),h.value=void 0,s("pan","end")),f.value=!1,n.value=!1):t.isFirst===!0?(h.value=i(t.evt),u(t.evt),l(),f.value=!0,s("pan","start")):(u(t.evt),l())}function Ke(){n.value=!1}function Ft(t){u(t,i(t)),l(),r.value=!0,f.value=!0,document.addEventListener("mouseup",be,!0)}function be(){r.value=!1,f.value=!1,l(!0),Ke(),document.removeEventListener("mouseup",be,!0)}function Pt(t){u(t,i(t)),l(!0)}function Nt(t){pt.includes(t.keyCode)&&l(!0)}function Et(t){if(e.vertical===!0)return null;const b=c.lang.rtl!==e.reverse?1-t:t;return{transform:`translateX(calc(${2*b-1} * ${e.thumbSize} / 2 + ${50-100*b}%))`}}function Rt(t){const b=d(()=>r.value===!1&&(n.value===t.focusValue||n.value==="both")?" q-slider--focus":""),k=d(()=>`q-slider__thumb q-slider__thumb${x.value} q-slider__thumb${x.value}-${$.value===!0?"rtl":"ltr"} absolute non-selectable`+b.value+(t.thumbColor.value!==void 0?` text-${t.thumbColor.value}`:"")),C=d(()=>({width:e.thumbSize,height:e.thumbSize,[oe.value]:`${100*t.ratio.value}%`,zIndex:n.value===t.focusValue?2:void 0})),M=d(()=>t.labelColor.value!==void 0?` text-${t.labelColor.value}`:""),W=d(()=>Et(t.ratio.value)),pe=d(()=>"q-slider__text"+(t.labelTextColor.value!==void 0?` text-${t.labelTextColor.value}`:""));return()=>{const ye=[V("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[V("path",{d:e.thumbPath})]),V("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(ye.push(V("div",{class:Ct.value+" absolute fit no-pointer-events"+M.value},[V("div",{class:St.value,style:{minWidth:e.thumbSize}},[V("div",{class:At.value,style:W.value},[V("span",{class:pe.value},t.label.value)])])])),e.name!==void 0&&e.disable!==!0&&S(ye,"push")),V("div",{class:k.value,style:C.value,...t.getNodeData()},ye)}}function Kt(t,b,k,C){const M=[];e.innerTrackColor!=="transparent"&&M.push(V("div",{key:"inner",class:Lt.value,style:Ue.value})),e.selectionColor!=="transparent"&&M.push(V("div",{key:"selection",class:wt.value,style:t.value})),e.markers!==!1&&M.push(V("div",{key:"marker",class:ht.value,style:Vt.value})),C(M);const W=[Yt("div",{key:"trackC",class:xt.value,tabindex:b.value,...k.value},[V("div",{class:Tt.value,style:qt.value},M)],"slide",A.value,()=>zt.value)];if(e.markerLabels!==!1){const pe=e.switchMarkerLabelsSide===!0?"unshift":"push";W[pe](V("div",{key:"markerL",class:$t.value},Qt()))}return W}return jt(()=>{document.removeEventListener("mouseup",be,!0)}),{state:{active:f,focus:n,preventFocus:r,dragging:h,editable:A,classes:gt,tabindex:yt,attributes:kt,step:G,decimals:K,trackLen:ne,innerMin:D,innerMinRatio:se,innerMax:L,innerMaxRatio:me,positionProp:oe,sizeProp:De,isReversed:$},methods:{onActivate:Ft,onMobileClick:Pt,onBlur:Ke,onKeyup:Nt,getContent:Kt,getThumbRenderFn:Rt,convertRatioToModel:Bt,convertModelToRatio:ve,getDraggingRatio:Mt}}}const qa=()=>({});var La=nt({name:"QSlider",props:{...Aa,modelValue:{required:!0,default:null,validator:l=>typeof l=="number"||l===null},labelValue:[String,Number]},emits:$a,setup(l,{emit:u}){const{proxy:{$q:i}}=lt(),{state:o,methods:e}=Ta({updateValue:x,updatePosition:$,getDragging:R,formAttrs:ua(l)}),s=y(null),m=y(0),c=y(0);function p(){c.value=l.modelValue===null?o.innerMin.value:J(l.modelValue,o.innerMin.value,o.innerMax.value)}te(()=>`${l.modelValue}|${o.innerMin.value}|${o.innerMax.value}`,p),p();const S=d(()=>e.convertModelToRatio(c.value)),f=d(()=>o.active.value===!0?m.value:S.value),r=d(()=>{const A={[o.positionProp.value]:`${100*o.innerMinRatio.value}%`,[o.sizeProp.value]:`${100*(f.value-o.innerMinRatio.value)}%`};return l.selectionImg!==void 0&&(A.backgroundImage=`url(${l.selectionImg}) !important`),A}),n=e.getThumbRenderFn({focusValue:!0,getNodeData:qa,ratio:f,label:d(()=>l.labelValue!==void 0?l.labelValue:c.value),thumbColor:d(()=>l.thumbColor||l.color),labelColor:d(()=>l.labelColor),labelTextColor:d(()=>l.labelTextColor)}),h=d(()=>o.editable.value!==!0?{}:i.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:D,onBlur:e.onBlur,onKeydown:L,onKeyup:e.onKeyup});function x(A){c.value!==l.modelValue&&u("update:modelValue",c.value),A===!0&&u("change",c.value)}function R(){return s.value.getBoundingClientRect()}function $(A,K=o.dragging.value){const G=e.getDraggingRatio(A,K);c.value=e.convertRatioToModel(G),m.value=l.snap!==!0||l.step===0?G:e.convertModelToRatio(c.value)}function D(){o.focus.value=!0}function L(A){if(!pt.includes(A.keyCode))return;Zt(A);const K=([34,33].includes(A.keyCode)?10:1)*o.step.value,G=([34,37,40].includes(A.keyCode)?-1:1)*(o.isReversed.value===!0?-1:1)*(l.vertical===!0?-1:1)*K;c.value=J(parseFloat((c.value+G).toFixed(o.decimals.value)),o.innerMin.value,o.innerMax.value),x()}return()=>{const A=e.getContent(r,o.tabindex,h,K=>{K.push(n())});return V("div",{ref:s,class:o.classes.value+(l.modelValue===null?" q-slider--no-value":""),...o.attributes.value,"aria-valuenow":l.modelValue},A)}}}),Ba=nt({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(l,{slots:u}){const i=d(()=>{const o=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(e=>l[e]===!0).map(e=>`q-btn-group--${e}`).join(" ");return`q-btn-group row no-wrap${o.length!==0?" "+o:""}`+(l.spread===!0?" q-btn-group--spread":" inline")});return()=>V("div",{class:i.value},Xt(u.default))}});const Ma=_("span",{class:"text-weight-bold"},"Send Token",-1),Va={class:"text-body1"},Ia={class:"text-overline",style:{width:"500px"}},Da={class:"col"},Qa=j({__name:"SendTokenButton",props:["mint","decimals","amount","disabled","name"],setup(l){const u=y(!1),i=l,o=y(""),e=y(0),s=y(0);Oe(()=>s.value,()=>{e.value=parseFloat((s.value/10*i.amount).toFixed(i.decimals))}),Oe(()=>e.value,()=>{s.value=e.value/i.amount*100/10});async function m(){const c=new xe,p=await ue(new U(i.mint),new U(o.value));console.log(p);const S=await ue(new U(i.mint),T().publicKey.value);await Z().connection.getAccountInfo(p)===null&&c.add(wa(T().publicKey.value,p,new U(o.value),new U(i.mint))),c.add(xa(S,p,T().publicKey.value,e.value*Math.pow(10,i.decimals)));try{const r=await T().sendTransaction(c,Z().connection);await $e(r)}catch(r){Ce.create({color:"red",message:`${r}`,timeout:5e3})}}return(c,p)=>(g(),N(qe,null,[a(E,{disable:l.disabled,square:"",color:"secondary",size:"sm",icon:"send",onClick:p[0]||(p[0]=S=>u.value=!0)},null,8,["disable"]),a(ft,{modelValue:u.value,"onUpdate:modelValue":p[5]||(p[5]=S=>u.value=S)},{default:v(()=>[a(le,null,{default:v(()=>[a(dt,{class:"q-mt-md"},{default:v(()=>[a(Ve,{size:"xl",url:"sa_files/webp/"+l.mint+".webp"},null,8,["url"]),a(mt,null,{default:v(()=>[Ma,_("div",Va,q(l.name),1),_("div",Ia,q(l.mint),1)]),_:1}),st(a(E,{flat:"",round:"",dense:"",icon:"close"},null,512),[[vt]])]),_:1}),a(bt,{class:"q-gutter-y-sm"},{default:v(()=>[_("div",null,[a(Ae,{filled:"",square:"",label:"Receiver",modelValue:o.value,"onUpdate:modelValue":p[1]||(p[1]=S=>o.value=S)},null,8,["modelValue"])]),a(Ba,{push:"",class:"row full-width"},{default:v(()=>[_("div",Da,[a(Ae,{filled:"",square:"",class:"col",label:"Amount",modelValue:e.value,"onUpdate:modelValue":p[2]||(p[2]=S=>e.value=S),hint:"Max: "+l.amount},null,8,["modelValue","hint"]),a(La,{class:"q-px-lg",modelValue:s.value,"onUpdate:modelValue":p[3]||(p[3]=S=>s.value=S),min:0,max:10,color:"secondary","track-size":"10px",markers:"","marker-labels":S=>`${10*S}%`},null,8,["modelValue","marker-labels"])]),a(E,{square:"",color:"primary",icon:"send",onClick:p[4]||(p[4]=S=>m())})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),za=_("span",{class:"text-weight-bold"},"Close/Burn Account",-1),Ua={class:"text-overline"},Fa=_("div",{class:"row q-gutter-x-sm"},[_("div",{class:""},"Closing Token-Accounts will recover the fee!")],-1),Pa={class:"row q-gutter-x-sm"},Na=_("div",{class:""},"Amount left:",-1),Ea={class:""},Ra={class:"q-ma-md text-right text-weight-light"},Ka=j({__name:"EditTokenButton",props:["mint","decimals","amount"],setup(l){const u=y(!1),i=l;y(""),y(0);async function o(){const s=new xe,m=await ue(new U(i.mint),T().publicKey.value);s.add(ka(m,new U(i.mint),T().publicKey.value,i.amount*Math.pow(10,i.decimals))),s.add(Xe(m,T().publicKey.value,T().publicKey.value)),s.add(he.transfer({fromPubkey:T().publicKey.value,toPubkey:new U(je),lamports:ke}));try{const c=await T().sendTransaction(s,Z().connection);await $e(c)}catch(c){Ce.create({color:"red",message:`${c}`,timeout:5e3})}}async function e(){const s=new xe,m=await ue(new U(i.mint),T().publicKey.value);s.add(Xe(m,T().publicKey.value,T().publicKey.value)),s.add(he.transfer({fromPubkey:T().publicKey.value,toPubkey:new U(je),lamports:ke}));try{const c=await T().sendTransaction(s,Z().connection);await $e(c)}catch(c){Ce.create({color:"red",message:`${c}`,timeout:5e3})}}return(s,m)=>(g(),N(qe,null,[a(E,{square:"",color:"primary",size:"sm",icon:"edit",onClick:m[0]||(m[0]=c=>u.value=!0)}),a(ft,{modelValue:u.value,"onUpdate:modelValue":m[3]||(m[3]=c=>u.value=c)},{default:v(()=>[a(le,null,{default:v(()=>[a(dt,{class:"q-mt-md"},{default:v(()=>[a(Jt,null,{default:v(()=>[a(at,{name:"edit"})]),_:1}),a(mt,null,{default:v(()=>[za,_("div",Ua,q(l.mint),1)]),_:1}),st(a(E,{flat:"",round:"",dense:"",icon:"close"},null,512),[[vt]])]),_:1}),a(bt,{class:"q-gutter-y-md col justify-around"},{default:v(()=>[Fa,_("div",Pa,[Na,_("div",Ea,q(l.amount),1)]),a(E,{square:"",disabled:l.amount==0,class:"full-width",color:"red",onClick:m[1]||(m[1]=c=>o())},{default:v(()=>[O(" Burn and close Account (+0.00193428 SOL) ")]),_:1},8,["disabled"]),a(E,{square:"",disabled:l.amount>0,class:"full-width",color:"orange",onClick:m[2]||(m[2]=c=>e())},{default:v(()=>[O(" Close Account (+0.00193428 SOL)")]),_:1},8,["disabled"])]),_:1}),_("div",Ra," fee: "+q(w(ke)/w(ea))+"\u25CE ",1)]),_:1})]),_:1},8,["modelValue"])],64))}}),Wa={key:0,class:"row"},Oa=_("div",{class:"col-2 q-table__title"},"Accounts",-1),ja={class:"text-subtitle1"},Ga={key:0,class:"row items-center justify-end q-gutter-x-sm"},Ha={key:2,class:"row items-center justify-end q-gutter-x-sm"},Ya={key:0,class:"row items-center justify-end q-gutter-x-sm"},Za={key:2,class:"row items-center justify-end q-gutter-x-sm"},Xa=j({__name:"WalletAccountsTable",props:["tab"],setup(l){const u=l;y();const i=y(!1),o=y("all"),e=y(["name","type","action","amount","market","value"]),s=[{name:"image",label:"",align:"left",required:!0},{name:"name",label:"Name",align:"left",sortable:!0,required:!0,field:f=>f.staratlas.name},{name:"type",label:"Type",align:"left",sortable:!0,field:f=>f.staratlas.attributes.itemType},{name:"account",label:"Account",align:"left",sortable:!0,field:f=>f.pubkey},{name:"mint",label:"Mint",align:"left",sortable:!0,field:f=>f.info.mint},{name:"owner",align:"left",label:"Owner",sortable:!0,field:f=>f.info.owner},{name:"decimals",label:"Decimals",sortable:!0,field:f=>{var r;return(r=f.info.tokenAmount)==null?void 0:r.decimals}},{name:"amount",label:"Amount",align:"right",sortable:!0,field:f=>{var r;return(r=f.info.tokenAmount)==null?void 0:r.uiAmount}},{name:"market",label:"Market",align:"right",field:f=>{var r;return(r=f.info.tokenAmount)==null?void 0:r.uiAmount}},{name:"value",label:"Value",align:"right",field:f=>{var r;return(r=f.info.tokenAmount)==null?void 0:r.uiAmount}},{label:"",align:"right",name:"action"}];Se(async()=>{await z().update_accounts()}),te(()=>T().publicKey.value,async()=>{await z().update_accounts()});const m=y({rowsPerPage:0}),c=y([]),p=y([]);Se(async()=>{var f,r;c.value=await Z().api_client.trades.getPrices(((f=I.find(n=>n.type==Q.USDC))==null?void 0:f.mint)??"none"),p.value=await Z().api_client.trades.getPrices(((r=I.find(n=>n.type==Q.ATLAS))==null?void 0:r.mint)??"none"),await z().update_accounts()});function S(){let f=[];return u.tab=="all"?f=z().get_account_map_staratlas:f=z().get_account_map_staratlas.filter(r=>{var n;return((n=r.staratlas.attributes.itemType)==null?void 0:n.toLowerCase())==u.tab}),i.value?f.filter(r=>r.info.tokenAmount.uiAmount!=0):f}return(f,r)=>(g(),F(le,{flat:""},{default:v(()=>[w(z)().is_loading?(g(),N("div",Wa,[a(H),a(rt,{class:"row",color:"primary",size:"3rem"}),a(H)])):P("",!0),a(it,{color:"primary",dark:"",flat:"",square:"","virtual-scroll":"",pagination:m.value,"onUpdate:pagination":r[3]||(r[3]=n=>m.value=n),"rows-per-page-options":[0],"visible-columns":e.value,title:"Accounts",rows:S(),columns:s,"row-key":"name"},{top:v(n=>[Oa,a(H),a(we,{modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=h=>o.value=h),align:"justify"},{default:v(()=>[a(Y,{name:"all",label:"ALL",class:"bg-secondary"}),a(Y,{name:"usdc",label:"USDC"}),a(Y,{name:"atlas",label:"ATLAS"})]),_:1},8,["modelValue"]),a(H),a(sa,{color:"secondary",modelValue:i.value,"onUpdate:modelValue":r[1]||(r[1]=h=>i.value=h),label:"Hide empty accounts","left-label":""},null,8,["modelValue"]),a(H),a(ia,{modelValue:e.value,"onUpdate:modelValue":r[2]||(r[2]=h=>e.value=h),multiple:"",borderless:"",dense:"","options-dense":"","display-value":f.$q.lang.table.columns,"emit-value":"","map-options":"",options:s,"option-value":"name",style:{"min-width":"150px"}},null,8,["modelValue","display-value"]),a(E,{flat:"",round:"",dense:"",icon:n.inFullscreen?"fullscreen_exit":"fullscreen",onClick:n.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])]),body:v(n=>{var h;return[a(ut,{props:n,class:ot(((h=n.row.info.tokenAmount)==null?void 0:h.uiAmount)==0?"text-yellow":"")},{default:v(()=>[a(B,{key:"image",props:n},{default:v(()=>[a(Ve,{size:"xl",url:"sa_files/webp/"+n.row.info.mint+".webp"},null,8,["url"])]),_:2},1032,["props"]),a(B,{key:"name",props:n},{default:v(()=>[_("div",ja,q(n.row.staratlas.name??"-"),1)]),_:2},1032,["props"]),a(B,{key:"type",props:n},{default:v(()=>[O(q(n.row.staratlas.attributes.itemType??"-"),1)]),_:2},1032,["props"]),a(B,{key:"account",props:n},{default:v(()=>[a(ge,{address:n.row.pubkey},null,8,["address"])]),_:2},1032,["props"]),a(B,{key:"owner",props:n},{default:v(()=>[a(ge,{address:n.row.info.owner},null,8,["address"])]),_:2},1032,["props"]),a(B,{key:"mint",props:n,class:""},{default:v(()=>[a(ge,{address:n.row.info.mint},null,8,["address"])]),_:2},1032,["props"]),a(B,{key:"decimals",props:n},{default:v(()=>{var x;return[O(q((x=n.row.info.tokenAmount)==null?void 0:x.decimals),1)]}),_:2},1032,["props"]),a(B,{key:"amount",class:"text-subtitle1 text-bold",props:n},{default:v(()=>{var x;return[_("div",null,q((x=n.row.info.tokenAmount)==null?void 0:x.uiAmount.toFixed(0)),1)]}),_:2},1032,["props"]),a(B,{key:"market",class:"text-subtitle1 text-bold",props:n},{default:v(()=>{var x,R;return[o.value!="atlas"?(g(),N("div",Ga,[_("div",null,q((((x=c.value.find($=>$.asset==n.row.info.mint&&$.currency==w(I).find(D=>D.type==w(Q).USDC).mint))==null?void 0:x.price)??0).toFixed(2)),1),a(X,{currency:w(I).find($=>$.type==w(Q).USDC)},null,8,["currency"])])):P("",!0),o.value=="all"?(g(),F(Ge,{key:1})):P("",!0),o.value!="usdc"?(g(),N("div",Ha,[_("div",null,q((((R=p.value.find($=>$.asset==n.row.info.mint&&$.currency==w(I).find(D=>D.type==w(Q).ATLAS).mint))==null?void 0:R.price)??0).toFixed(2)),1),a(X,{currency:w(I).find($=>$.type==w(Q).ATLAS)},null,8,["currency"])])):P("",!0)]}),_:2},1032,["props"]),a(B,{key:"value",class:"text-subtitle1 text-bold",props:n},{default:v(()=>{var x,R,$,D;return[o.value!="atlas"?(g(),N("div",Ya,[_("div",null,q(((((x=p.value.find(L=>L.asset==n.row.info.mint&&L.currency==w(I).find(A=>A.type==w(Q).USDC).mint))==null?void 0:x.price)??0)*((R=n.row.info.tokenAmount)==null?void 0:R.uiAmount)).toFixed(2)),1),a(X,{currency:w(I).find(L=>L.type==w(Q).USDC)},null,8,["currency"])])):P("",!0),o.value=="all"?(g(),F(Ge,{key:1})):P("",!0),o.value!="usdc"?(g(),N("div",Za,[_("div",null,q((((($=p.value.find(L=>L.asset==n.row.info.mint&&L.currency==w(I).find(A=>A.type==w(Q).ATLAS).mint))==null?void 0:$.price)??0)*((D=n.row.info.tokenAmount)==null?void 0:D.uiAmount)).toFixed(2)),1),a(X,{currency:w(I).find(L=>L.type==w(Q).ATLAS)},null,8,["currency"])])):P("",!0)]}),_:2},1032,["props"]),a(B,{key:"action",props:n,class:"q-gutter-x-sm"},{default:v(()=>[a(Ka,{amount:n.row.info.tokenAmount.uiAmount,mint:n.row.info.mint,decimals:n.row.info.tokenAmount.decimals},null,8,["amount","mint","decimals"]),a(Qa,{disabled:n.row.info.tokenAmount.uiAmount==0,mint:n.row.info.mint,decimals:n.row.info.tokenAmount.decimals,amount:n.row.info.tokenAmount.uiAmount,name:n.row.staratlas.name},null,8,["disabled","mint","decimals","amount","name"])]),_:2},1032,["props"])]),_:2},1032,["props","class"])]}),_:1},8,["pagination","visible-columns","rows"])]),_:1}))}}),Ja=j({__name:"WalletAccountInput",setup(l){const u=y("");te(()=>T().publicKey.value,()=>{z().input_wallet=T().publicKey.value.toString()});async function i(){u.value.length?await z().update_accounts(new U(u.value)):await z().update_accounts()}return(o,e)=>(g(),F(le,{square:"",flat:"",class:"row"},{default:v(()=>[a(Ae,{label:"Wallet-Address",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s),clearable:"","clear-icon":"close",square:"",filled:"",class:"col"},null,8,["modelValue"]),a(E,{onClick:e[1]||(e[1]=s=>{i().then(()=>{w(z)().input_wallet=u.value})}),color:"secondary",square:"",size:"md",icon:"fa-solid fa-paper-plane"},{default:v(()=>[a(na,null,{default:v(()=>[O("Query wallet")]),_:1})]),_:1})]),_:1}))}});const el={class:"row items-center q-gutter-x-xs justify-end"},tl={class:"row items-center q-gutter-x-xs justify-end"},al={class:"row items-center q-gutter-x-xs justify-end"},ll=j({__name:"WalletAccountHistoryTable",props:["data"],setup(l){const u=y({rowsPerPage:0}),i=y([{name:"timestamp",label:"Timestamp",align:"left",field:"timestamp",sortable:!0},{name:"info",align:"left",field:"info",sortable:!0},{name:"side",label:"Side",align:"left",field:"side",sortable:!0},{name:"fee",align:"right",label:"Fee",field:o=>{var e;return((e=o.fee)==null?void 0:e.toFixed(2))??0},sortable:!0},{name:"size",align:"right",label:"Size",field:"volume",sortable:!0},{name:"volume",align:"right",label:"Volume",field:"volume",sortable:!0},{name:"price",align:"right",label:"Price",field:o=>o.price.toFixed(2),sortable:!0}]);return(o,e)=>(g(),F(it,{rows:l.data,dense:"",square:"",flat:"","virtual-scroll":"",columns:i.value,pagination:u.value,"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"row-key":"name","hide-bottom":""},{body:v(s=>[a(ut,{props:s},{default:v(()=>[a(B,{key:"timestamp",props:s},{default:v(()=>[O(q(s.row.timestamp),1)]),_:2},1032,["props"]),a(B,{key:"info",props:s},{default:v(()=>[a(E,{flat:"",size:"sm",icon:"link",href:"https://solscan.io/tx/"+s.row.signature,target:"_blank"},null,8,["href"])]),_:2},1032,["props"]),a(B,{key:"side",props:s},{default:v(()=>[a(ca,{class:ot(s.row.side=="BUY"?"buy":"sell")},{default:v(()=>[O(q(s.row.side),1)]),_:2},1032,["class"])]),_:2},1032,["props"]),a(B,{key:"fee",props:s},{default:v(()=>[O(q((s.row.fee/s.row.volume*100).toFixed(1)??0)+"% ",1)]),_:2},1032,["props"]),a(B,{key:"size",props:s},{default:v(()=>[_("div",el,[_("div",null,q(s.row.size??0),1),a(Ve,{style:{width:"10px",height:"10px"},url:"sa_files/webp/"+s.row.asset+".webp"},null,8,["url"])])]),_:2},1032,["props"]),a(B,{key:"volume",props:s},{default:v(()=>[_("div",tl,[_("div",null,q(s.row.volume??0),1),a(X,{style:{width:"14px",height:"14px"},currency:w(I).find(m=>m.mint===s.row.currency)},null,8,["currency"])])]),_:2},1032,["props"]),a(B,{key:"price",props:s,class:""},{default:v(()=>[_("div",al,[_("div",null,q(s.row.price??0),1),a(X,{style:{width:"14px",height:"14px"},currency:w(I).find(m=>m.mint===s.row.currency)},null,8,["currency"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"]))}});const nl={key:0,class:"row"},sl={key:1},ol={key:2,class:"text-center text-body2 q-pa-sm"},tt=1e6,rl=j({__name:"WalletAccountHistory",setup(l){const u=y(),i=y([]),o=y(!1);te(()=>T().publicKey.value,async()=>{await e(T().publicKey.value.toString())}),te(()=>z().input_wallet,async()=>{await e(z().input_wallet)}),Se(async()=>{z().input_wallet?await e(z().input_wallet):await e(T().publicKey.value.toString())});async function e(m){var c,p,S,f;o.value=!0,u.value=await Z().api_client.trades.search("maker_and_taker",m,tt),i.value=[],i.value.push({name:"USDC [buy]",data:(c=u.value)==null?void 0:c.filter(r=>{var n;return r.currency==((n=I.find(h=>h.type==Q.USDC))==null?void 0:n.mint)}).filter(r=>{var n;return(n=r.side)==null?void 0:n.includes("BUY")}).map(r=>[r.timestamp,r.price,r.volume]),axisName:"USDC"}),i.value.push({name:"USDC [sell]",data:(p=u.value)==null?void 0:p.filter(r=>{var n;return r.currency==((n=I.find(h=>h.type==Q.USDC))==null?void 0:n.mint)}).filter(r=>{var n;return(n=r.side)==null?void 0:n.includes("SELL")}).map(r=>[r.timestamp,r.price,r.volume]),axisName:"USDC"}),i.value.push({name:"ATLAS [buy]",data:(S=u.value)==null?void 0:S.filter(r=>{var n;return r.currency==((n=I.find(h=>h.type==Q.ATLAS))==null?void 0:n.mint)}).filter(r=>{var n;return(n=r.side)==null?void 0:n.includes("BUY")}).map(r=>[r.timestamp,r.price,r.volume])}),i.value.push({name:"ATLAS [sell]",data:(f=u.value)==null?void 0:f.filter(r=>{var n;return r.currency==((n=I.find(h=>h.type==Q.ATLAS))==null?void 0:n.mint)}).filter(r=>{var n;return(n=r.side)==null?void 0:n.includes("SELL")}).map(r=>[r.timestamp,r.price,r.volume])}),o.value=!1}const s={colors:["#3976ea","#3976ea","#b2b2b2","#b2b2b2"],chart:{height:350,type:"bubble",toolbar:{show:!1},foreColor:"#ffffff"},dataLabels:{enabled:!1},fill:{opacity:.8},xaxis:{type:"datetime"},yaxis:[{title:{text:"USDC [buy]"},seriesName:"USDC [buy]"},{title:{text:"USDC [sell]"},seriesName:"USDC [sell]"},{title:{text:"ATLAS [buy]"},seriesName:"ATLAS [buy]",opposite:!0},{title:{text:"ATLAS [sell]"},seriesName:"ATLAS [sell]",opposite:!0}]};return(m,c)=>{const p=ta("apexchart");return g(),F(le,{flat:""},{default:v(()=>[o.value?(g(),N("div",nl,[a(H),a(rt,{class:"row q-pa-sm",color:"primary",size:"3rem"}),a(H)])):P("",!0),u.value?(g(),N("div",sl,[o.value?P("",!0):(g(),F(p,{key:0,class:"chart",type:"scatter",height:"350",options:s,series:i.value},null,8,["series"])),o.value?P("",!0):(g(),F(ll,{key:1,data:u.value},null,8,["data"])),_("div",{class:"text-center text-orange-4 text-weight-thin text-right q-mr-md"}," Limited to: "+q(tt))])):(g(),N("div",ol,"No data"))]),_:1})}}});var ul=ba(rl,[["__scopeId","data-v-4836eefe"]]);const il={style:{width:"80vw"}},Cl=j({__name:"WalletPage",setup(l){const u=y("account"),i=y("all");return(o,e)=>(g(),F(Wt,{class:"row q-pa-sm justify-center"},{default:v(()=>[_("div",il,[a(Ja,{class:"q-mb-sm"}),a(we,{align:"justify",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s)},{default:v(()=>[a(Y,{name:"account",label:"Accounts"}),a(Y,{name:"activity",label:"Market Activity"})]),_:1},8,["modelValue"]),u.value=="account"?(g(),F(we,{key:0,align:"justify",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s)},{default:v(()=>[a(Y,{name:"all",label:"All",class:"bg-secondary"}),(g(!0),N(qe,null,aa(w(la)().get_itemTypes,s=>(g(),F(Y,{name:s,label:s,key:s},null,8,["name","label"]))),128))]),_:1},8,["modelValue"])):P("",!0),u.value=="account"?(g(),F(Xa,{key:1,tab:i.value,dark:""},null,8,["tab"])):P("",!0),u.value=="activity"?(g(),F(ul,{key:2})):P("",!0)])]),_:1}))}});export{Cl as default};
