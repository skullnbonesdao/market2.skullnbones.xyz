import{e as U,Q as D,h as R,i as Y,k as A}from"./QTooltip.eedd027c.js";import{cB as j,c1 as G,cC as H,Y as g,ak as k,cQ as O,ah as W,a9 as P,aI as b,Z as p,bc as l,a0 as c,H as _,a7 as t,cb as S,n as h,A as y,ch as z,D as Z,a6 as q,aC as J,ay as K,cn as x}from"./index.6308926c.js";import{Q as L}from"./QCard.4157e37f.js";import{a as w,b as X,Q as ee,c as ae}from"./QTr.d1eb98f4.js";import{Q as te}from"./QPage.dd1b6c3a.js";import{_ as le,a as se}from"./PairIcon.90fe7d5d.js";import{A as re,f as $}from"./format_address.eb7e577b.js";import{P as I}from"./PirceElement.29925d78.js";import{Q as ne}from"./QSeparator.0a383462.js";import{_ as oe}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-dark.ac3a5d6c.js";const ie={...j,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},B=50,E=2*B,T=E*Math.PI,ce=Math.round(T*1e3)/1e3;var ue=G({name:"QCircularProgress",props:{...ie,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:s}){const{proxy:{$q:u}}=W(),f=H(e),d=g(()=>{const n=(u.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(u.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-n}deg)`:`rotate3d(0, 0, 1, ${n-90}deg)`}}),o=g(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),a=g(()=>E/(1-e.thickness/2)),i=g(()=>`${a.value/2} ${a.value/2} ${a.value} ${a.value}`),m=g(()=>U(e.value,e.min,e.max)),Q=g(()=>T*(1-(m.value-e.min)/(e.max-e.min))),r=g(()=>e.thickness/2*a.value);function v({thickness:n,offset:C,color:V,cls:F,rounded:M}){return k("circle",{class:"q-circular-progress__"+F+(V!==void 0?` text-${V}`:""),style:o.value,fill:"transparent",stroke:"currentColor","stroke-width":n,"stroke-dasharray":ce,"stroke-dashoffset":C,"stroke-linecap":M,cx:a.value,cy:a.value,r:B})}return()=>{const n=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&n.push(k("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:B-r.value/2,cx:a.value,cy:a.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&n.push(v({cls:"track",thickness:r.value,offset:0,color:e.trackColor})),n.push(v({cls:"circle",thickness:r.value,offset:Q.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const C=[k("svg",{class:"q-circular-progress__svg",style:d.value,viewBox:i.value,"aria-hidden":"true"},n)];return e.showValue===!0&&C.push(k("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},s.default!==void 0?s.default():[k("div",m.value)])),k("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:f.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:m.value},O(s.internal,C))}}});const de={style:{width:"100px"},class:"col text-subtitle2 text-right"},me=P({__name:"AssetElement",props:["mint","value"],setup(e){const s=e;return(u,f)=>(b(),p(S,{color:"primary",dense:"",class:"row items-center"},{default:l(()=>[c("div",de,_(e.value??"-"),1),t(ne,{vertical:"",class:"q-ma-xs"}),t(re,{width:"20px",height:"20px",url:"sa_files/webp/"+s.mint+".webp"},null,8,["url"])]),_:1}))}});var ve=oe(me,[["__scopeId","data-v-4d4f89f4"]]);const fe={class:"col text-caption",style:{width:"100px"}},_e={class:"text-weight-thin"},he={class:"row"},ge=c("div",{class:"text-caption q-mr-sm text-weight-light"},[c("div",{class:""},"Maker:"),c("div",{class:""},"Taker:")],-1),ye={class:"text-caption"},we=P({__name:"ExplorerTable",props:{data:{type:[]}},setup(e){const s=h({rowsPerPage:0}),u=e,f=h([{name:"info",label:"Info",align:"left",sortable:!0},{name:"accounts",label:"Accounts",align:"left",field:"accounts"},{name:"side",label:"Side",align:"left",field:"side",sortable:!0,style:"width: 50px"},{name:"fee",align:"left",label:"Fee",style:"width: 100px",field:d=>{var o;return((o=d.fee)==null?void 0:o.toFixed(2))??0},sortable:!0},{name:"size",align:"center",label:"Size",field:"size",sortable:!0},{name:"volume",align:"center",label:"Volume",field:"volume",sortable:!0},{name:"price",align:"center",label:"Price",field:d=>d.price.toFixed(2),sortable:!0}]);return(d,o)=>(b(),p(ee,{flat:"",rows:u.data,columns:f.value,pagination:s.value,"rows-per-page-options":[0],"row-key":"name"},{body:l(a=>[t(X,{props:a,class:""},{default:l(()=>[t(w,{key:"info",props:a},{default:l(()=>[t(S,{class:"row items-center",color:"primary"},{default:l(()=>[t(le,{currency:y(z).find(i=>i.mint===a.row.currency),asset_image_url:"sa_files/webp/"+a.row.asset+".webp",class:"q-mr-sm",size:"lg"},null,8,["currency","asset_image_url"]),c("div",fe,[c("div",_e,_(y($)(a.row.signature,5)),1),c("div",null,_(y(se)(a.row.timestamp)),1)]),t(S,{color:"secondary",class:"q-ml-md",size:"sm",icon:"link",href:"https://solscan.io/tx/"+a.row.signature,target:"_blank"},null,8,["href"])]),_:2},1024)]),_:2},1032,["props"]),t(w,{key:"accounts",props:a},{default:l(()=>[c("div",he,[ge,c("div",ye,[c("div",null,_(y($)(a.row.maker??"",3)),1),c("div",null,_(y($)(a.row.taker??"",3)),1)])])]),_:2},1032,["props"]),t(w,{key:"side",props:a},{default:l(()=>[t(D,{class:Z(a.row.side=="BUY"?"buy":"sell")},{default:l(()=>[q(_(a.row.side),1)]),_:2},1032,["class"])]),_:2},1032,["props"]),t(w,{class:"text-overline",key:"fee",props:a},{default:l(()=>[q(_((a.row.fee/a.row.volume*100).toFixed(1))+"% ",1)]),_:2},1032,["props"]),t(w,{class:"text-overline",key:"size",props:a},{default:l(()=>[t(ve,{mint:a.row.asset,value:a.row.size},null,8,["mint","value"])]),_:2},1032,["props"]),t(w,{class:"text-overline",key:"volume",props:a},{default:l(()=>{var i;return[t(I,{label:(i=y(z).find(m=>m.mint==a.row.currency))==null?void 0:i.name,value:a.row.volume},null,8,["label","value"])]}),_:2},1032,["props"]),t(w,{class:"text-overline",key:"price",props:a},{default:l(()=>{var i;return[t(I,{label:(i=y(z).find(m=>m.mint==a.row.currency))==null?void 0:i.name,value:a.row.price},null,8,["label","value"])]}),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"]))}}),ke={class:""},N=6e4,Ve=P({__name:"ExplorerPage",setup(e){const s=h(),u=h(0),f=h(),d=h("Signature"),o=h(),a=h(["Signature","Asset","Currency","Player"]),i=async()=>{await x().api_client.trades.getTrades(null,null,50).then(r=>s.value=r)};J(async()=>{await i(),f.value=setInterval(m,1e3)}),K(()=>{clearInterval(f.value),f.value=null});async function m(){u.value>=100?await i().then(()=>{u.value=0}):u.value+=1e3/N*100}async function Q(){switch(s.value=null,d.value){case"Signature":await x().api_client.trades.search("signature",o.value,50).then(r=>s.value=r);break;case"Asset":await x().api_client.trades.search("asset",o.value,50).then(r=>s.value=r);break;case"Currency":await x().api_client.trades.search("currency",o.value,50).then(r=>s.value=r);break;case"Player":await x().api_client.trades.search("maker_and_taker",o.value,50).then(r=>s.value=r);break}}return(r,v)=>(b(),p(te,{class:"row q-pa-sm justify-center"},{default:l(()=>[c("div",ke,[t(L,{square:"",flat:"",class:"row"},{default:l(()=>[t(R,{class:"col-2",square:"",filled:"",modelValue:d.value,"onUpdate:modelValue":v[0]||(v[0]=n=>d.value=n),options:a.value,label:"Search for:"},null,8,["modelValue","options"]),t(Y,{modelValue:o.value,"onUpdate:modelValue":v[1]||(v[1]=n=>o.value=n),square:"",filled:"",class:"col"},null,8,["modelValue"]),t(S,{color:"secondary",square:"",size:"md",icon:"fa-solid fa-paper-plane",onClick:v[2]||(v[2]=n=>Q())},{default:l(()=>[t(A,null,{default:l(()=>[q("Send request")]),_:1})]),_:1}),t(S,{size:"md",flat:"",square:""},{default:l(()=>[t(ue,{value:u.value,size:"sm",color:"white"},null,8,["value"]),t(A,null,{default:l(()=>[q("Reload every "+_(N/1e3)+"s",1)]),_:1})]),_:1})]),_:1}),s.value?(b(),p(we,{key:1,class:"q-mt-sm",data:s.value},null,8,["data"])):(b(),p(ae,{key:0,class:"full-width q-ma-md",size:"xl",color:"secondary"}))])]),_:1}))}});export{Ve as default};
