import{Q as Y,b as we,a as Z}from"./QSpace.4ef8b026.js";import{Q as jt}from"./QPage.312a3faf.js";import{bZ as ae,cr as Ot,bE as P,bY as ie,b_ as ce,b$ as de,c0 as ee,de as je,df as qe,cj as he,a9 as H,aI as x,Z as N,bc as v,a7 as a,co as lt,a0 as _,H as $,A as k,cb as j,n as g,Y as c,ay as Gt,cV as Ht,d9 as Yt,db as _e,ak as F,c5 as Zt,ah as nt,c1 as st,b7 as te,cz as Jt,c6 as Xt,dg as Oe,$ as K,be as ot,M as Le,cg as xe,ce as q,ca as J,cf as Ae,cc as ea,a6 as W,dh as ge,ck as ta,cd as Ge,aC as Ce,cp as z,ch as L,ci as I,_ as E,D as rt,aQ as aa,aO as la,d1 as na}from"./index.8a54a03c.js";import{c as ut,b as Se,a as M,C as G,Q as it}from"./QTr.86e704fb.js";import{e as ct,u as Be,a as Me,T as Ve,Q as dt,b as mt,C as vt,c as sa}from"./QToggle.9f87fe11.js";import{I as oa,e as X,J as ra,K as ua,i as $e,j as ft,h as ia,k as bt,Q as ca}from"./QTooltip.5c5389bc.js";import{Q as He}from"./QSeparator.4f1614f1.js";import{Q as le}from"./QCard.2a51f918.js";import{f as da,A as Ie}from"./format_address.eb2b03b6.js";import{T as ma,h as Te}from"./handle_confirmation.f181839e.js";import{a as va,u as fa}from"./use-dark.51a27765.js";import{Q as pt}from"./QCardSection.2f0c75ed.js";import{_ as ba}from"./plugin-vue_export-helper.21dcd24c.js";import"./QResizeObserver.64229c14.js";const pa=l=>{const u=ae(l),{encode:i,decode:s}=ct(u),e=u;return e.decode=(n,f)=>!!s(n,f),e.encode=(n,f,d)=>{const p=Number(n);return i(p,f,d)},e},Ye=l=>{const u=Ot(32,l),{encode:i,decode:s}=ct(u),e=u;return e.decode=(n,f)=>{const d=s(n,f);return new P(d)},e.encode=(n,f,d)=>{const p=n.toBuffer();return i(p,f,d)},e};class ya extends Error{constructor(u){super(u)}}class _a extends ya{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}const Ze=ie([ae("instruction"),Be("amount")]);function ga(l,u,i,s,e=[],n=ee){const f=Me([{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0}],i,e),d=ce.Buffer.alloc(Ze.span);return Ze.encode({instruction:Ve.Burn,amount:BigInt(s)},d),new de({keys:f,programId:n,data:d})}const Je=ie([ae("instruction")]);function Xe(l,u,i,s=[],e=ee){const n=Me([{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0}],i,s),f=ce.Buffer.alloc(Je.span);return Je.encode({instruction:Ve.CloseAccount},f),new de({keys:n,programId:e,data:f})}const ka=ie([je("mintAuthorityOption"),Ye("mintAuthority"),Be("supply"),ae("decimals"),pa("isInitialized"),je("freezeAuthorityOption"),Ye("freezeAuthority")]);ka.span;async function ue(l,u,i=!1,s=ee,e=qe){if(!i&&!P.isOnCurve(u.toBuffer()))throw new _a;const[n]=await P.findProgramAddress([u.toBuffer(),s.toBuffer(),l.toBuffer()],e);return n}function wa(l,u,i,s,e=ee,n=qe){return ha(l,u,i,s,ce.Buffer.alloc(0),e,n)}function ha(l,u,i,s,e,n=ee,f=qe){const d=[{pubkey:l,isSigner:!0,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:he.programId,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1}];return new de({keys:d,programId:f,data:e})}const et=ie([ae("instruction"),Be("amount")]);function xa(l,u,i,s,e=[],n=ee){const f=Me([{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0}],i,e),d=ce.Buffer.alloc(et.span);return et.encode({instruction:Ve.Transfer,amount:BigInt(s)},d),new de({keys:f,programId:n,data:d})}const ke=H({__name:"SolscanLink",props:["address"],setup(l){return(u,i)=>(x(),N(j,{class:"full-width",square:"",color:"primary",size:"sm",icon:"link",target:"_blank",href:"https://solscan.io/account/"+l.address},{default:v(()=>[a(lt),_("div",null,$(k(da)(l.address)),1)]),_:1},8,["href"]))}}),tt="q-slider__marker-labels",Aa=l=>({value:l}),Ca=({marker:l})=>F("div",{key:l.value,style:l.style,class:l.classes},l.label),yt=[34,37,40,33,39,38],Sa={...fa,...oa,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:l=>l>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},$a=["pan","update:modelValue","change"];function Ta({updateValue:l,updatePosition:u,getDragging:i,formAttrs:s}){const{props:e,emit:n,slots:f,proxy:{$q:d}}=nt(),p=va(e,d),A=ra(s),Q=g(!1),b=g(!1),o=g(!1),m=g(!1),r=c(()=>e.vertical===!0?"--v":"--h"),V=c(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),C=c(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(d.lang.rtl===!0)),U=c(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),T=c(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),w=c(()=>e.disable!==!0&&e.readonly!==!0&&U.value<T.value),B=c(()=>(String(e.step).trim().split(".")[1]||"").length),R=c(()=>e.step===0?1:e.step),_t=c(()=>w.value===!0?e.tabindex||0:-1),ne=c(()=>e.max-e.min),De=c(()=>T.value-U.value),se=c(()=>ve(U.value)),me=c(()=>ve(T.value)),oe=c(()=>e.vertical===!0?C.value===!0?"bottom":"top":C.value===!0?"right":"left"),Fe=c(()=>e.vertical===!0?"height":"width"),gt=c(()=>e.vertical===!0?"width":"height"),Qe=c(()=>e.vertical===!0?"vertical":"horizontal"),kt=c(()=>{const t={role:"slider","aria-valuemin":U.value,"aria-valuemax":T.value,"aria-orientation":Qe.value,"data-step":e.step};return e.disable===!0?t["aria-disabled"]="true":e.readonly===!0&&(t["aria-readonly"]="true"),t}),wt=c(()=>`q-slider q-slider${r.value} q-slider--${Q.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(w.value===!0?" q-slider--editable":""))+(o.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(p.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+r.value:""));function re(t){const y="q-slider__"+t;return`${y} ${y}${r.value} ${y}${r.value}${V.value}`}function Ue(t){const y="q-slider__"+t;return`${y} ${y}${r.value}`}const ht=c(()=>{const t=e.selectionColor||e.color;return"q-slider__selection absolute"+(t!==void 0?` text-${t}`:"")}),xt=c(()=>Ue("markers")+" absolute overflow-hidden"),At=c(()=>Ue("track-container")),Ct=c(()=>re("pin")),St=c(()=>re("label")),$t=c(()=>re("text-container")),Tt=c(()=>re("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),qt=c(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),Lt=c(()=>{const t={[gt.value]:e.trackSize};return e.trackImg!==void 0&&(t.backgroundImage=`url(${e.trackImg}) !important`),t}),Bt=c(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),ze=c(()=>{const t=me.value-se.value,y={[oe.value]:`${100*se.value}%`,[Fe.value]:t===0?"2px":`${100*t}%`};return e.innerTrackImg!==void 0&&(y.backgroundImage=`url(${e.innerTrackImg}) !important`),y});function Mt(t){const{min:y,max:h,step:S}=e;let D=y+t*(h-y);if(S>0){const O=(D-y)%S;D+=(Math.abs(O)>=S/2?(O<0?-1:1)*S:0)-O}return B.value>0&&(D=parseFloat(D.toFixed(B.value))),X(D,U.value,T.value)}function ve(t){return ne.value===0?0:(t-e.min)/ne.value}function Vt(t,y){const h=Ht(t),S=e.vertical===!0?X((h.top-y.top)/y.height,0,1):X((h.left-y.left)/y.width,0,1);return X(C.value===!0?1-S:S,se.value,me.value)}const Pe=c(()=>Yt(e.markers)===!0?e.markers:R.value),Ne=c(()=>{const t=[],y=Pe.value,h=e.max;let S=e.min;do t.push(S),S+=y;while(S<h);return t.push(h),t}),Ee=c(()=>{const t=` ${tt}${r.value}-`;return tt+`${t}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${t}${C.value===!0?"rtl":"ltr"}`}),fe=c(()=>e.markerLabels===!1?null:Dt(e.markerLabels).map((t,y)=>({index:y,value:t.value,label:t.label||t.value,classes:Ee.value+(t.classes!==void 0?" "+t.classes:""),style:{...Ke(t.value),...t.style||{}}}))),Re=c(()=>({markerList:fe.value,markerMap:Ft.value,classes:Ee.value,getStyle:Ke})),It=c(()=>{const t=De.value===0?"2px":100*Pe.value/De.value;return{...ze.value,backgroundSize:e.vertical===!0?`2px ${t}%`:`${t}% 2px`}});function Dt(t){if(t===!1)return null;if(t===!0)return Ne.value.map(Aa);if(typeof t=="function")return Ne.value.map(h=>{const S=t(h);return _e(S)===!0?{...S,value:h}:{value:h,label:S}});const y=({value:h})=>h>=e.min&&h<=e.max;return Array.isArray(t)===!0?t.map(h=>_e(h)===!0?h:{value:h}).filter(y):Object.keys(t).map(h=>{const S=t[h],D=Number(h);return _e(S)===!0?{...S,value:D}:{value:D,label:S}}).filter(y)}function Ke(t){return{[oe.value]:`${100*(t-e.min)/ne.value}%`}}const Ft=c(()=>{if(e.markerLabels===!1)return null;const t={};return fe.value.forEach(y=>{t[y.value]=y}),t});function Qt(){if(f["marker-label-group"]!==void 0)return f["marker-label-group"](Re.value);const t=f["marker-label"]||Ca;return fe.value.map(y=>t({marker:y,...Re.value}))}const Ut=c(()=>[[ma,zt,void 0,{[Qe.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function zt(t){t.isFinal===!0?(m.value!==void 0&&(u(t.evt),t.touch===!0&&l(!0),m.value=void 0,n("pan","end")),Q.value=!1,o.value=!1):t.isFirst===!0?(m.value=i(t.evt),u(t.evt),l(),Q.value=!0,n("pan","start")):(u(t.evt),l())}function We(){o.value=!1}function Pt(t){u(t,i(t)),l(),b.value=!0,Q.value=!0,document.addEventListener("mouseup",be,!0)}function be(){b.value=!1,Q.value=!1,l(!0),We(),document.removeEventListener("mouseup",be,!0)}function Nt(t){u(t,i(t)),l(!0)}function Et(t){yt.includes(t.keyCode)&&l(!0)}function Rt(t){if(e.vertical===!0)return null;const y=d.lang.rtl!==e.reverse?1-t:t;return{transform:`translateX(calc(${2*y-1} * ${e.thumbSize} / 2 + ${50-100*y}%))`}}function Kt(t){const y=c(()=>b.value===!1&&(o.value===t.focusValue||o.value==="both")?" q-slider--focus":""),h=c(()=>`q-slider__thumb q-slider__thumb${r.value} q-slider__thumb${r.value}-${C.value===!0?"rtl":"ltr"} absolute non-selectable`+y.value+(t.thumbColor.value!==void 0?` text-${t.thumbColor.value}`:"")),S=c(()=>({width:e.thumbSize,height:e.thumbSize,[oe.value]:`${100*t.ratio.value}%`,zIndex:o.value===t.focusValue?2:void 0})),D=c(()=>t.labelColor.value!==void 0?` text-${t.labelColor.value}`:""),O=c(()=>Rt(t.ratio.value)),pe=c(()=>"q-slider__text"+(t.labelTextColor.value!==void 0?` text-${t.labelTextColor.value}`:""));return()=>{const ye=[F("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[F("path",{d:e.thumbPath})]),F("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(ye.push(F("div",{class:Ct.value+" absolute fit no-pointer-events"+D.value},[F("div",{class:St.value,style:{minWidth:e.thumbSize}},[F("div",{class:$t.value,style:O.value},[F("span",{class:pe.value},t.label.value)])])])),e.name!==void 0&&e.disable!==!0&&A(ye,"push")),F("div",{class:h.value,style:S.value,...t.getNodeData()},ye)}}function Wt(t,y,h,S){const D=[];e.innerTrackColor!=="transparent"&&D.push(F("div",{key:"inner",class:Bt.value,style:ze.value})),e.selectionColor!=="transparent"&&D.push(F("div",{key:"selection",class:ht.value,style:t.value})),e.markers!==!1&&D.push(F("div",{key:"marker",class:xt.value,style:It.value})),S(D);const O=[Zt("div",{key:"trackC",class:At.value,tabindex:y.value,...h.value},[F("div",{class:qt.value,style:Lt.value},D)],"slide",w.value,()=>Ut.value)];if(e.markerLabels!==!1){const pe=e.switchMarkerLabelsSide===!0?"unshift":"push";O[pe](F("div",{key:"markerL",class:Tt.value},Qt()))}return O}return Gt(()=>{document.removeEventListener("mouseup",be,!0)}),{state:{active:Q,focus:o,preventFocus:b,dragging:m,editable:w,classes:wt,tabindex:_t,attributes:kt,step:R,decimals:B,trackLen:ne,innerMin:U,innerMinRatio:se,innerMax:T,innerMaxRatio:me,positionProp:oe,sizeProp:Fe,isReversed:C},methods:{onActivate:Pt,onMobileClick:Nt,onBlur:We,onKeyup:Et,getContent:Wt,getThumbRenderFn:Kt,convertRatioToModel:Mt,convertModelToRatio:ve,getDraggingRatio:Vt}}}const qa=()=>({});var La=st({name:"QSlider",props:{...Sa,modelValue:{required:!0,default:null,validator:l=>typeof l=="number"||l===null},labelValue:[String,Number]},emits:$a,setup(l,{emit:u}){const{proxy:{$q:i}}=nt(),{state:s,methods:e}=Ta({updateValue:r,updatePosition:C,getDragging:V,formAttrs:ua(l)}),n=g(null),f=g(0),d=g(0);function p(){d.value=l.modelValue===null?s.innerMin.value:X(l.modelValue,s.innerMin.value,s.innerMax.value)}te(()=>`${l.modelValue}|${s.innerMin.value}|${s.innerMax.value}`,p),p();const A=c(()=>e.convertModelToRatio(d.value)),Q=c(()=>s.active.value===!0?f.value:A.value),b=c(()=>{const w={[s.positionProp.value]:`${100*s.innerMinRatio.value}%`,[s.sizeProp.value]:`${100*(Q.value-s.innerMinRatio.value)}%`};return l.selectionImg!==void 0&&(w.backgroundImage=`url(${l.selectionImg}) !important`),w}),o=e.getThumbRenderFn({focusValue:!0,getNodeData:qa,ratio:Q,label:c(()=>l.labelValue!==void 0?l.labelValue:d.value),thumbColor:c(()=>l.thumbColor||l.color),labelColor:c(()=>l.labelColor),labelTextColor:c(()=>l.labelTextColor)}),m=c(()=>s.editable.value!==!0?{}:i.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:U,onBlur:e.onBlur,onKeydown:T,onKeyup:e.onKeyup});function r(w){d.value!==l.modelValue&&u("update:modelValue",d.value),w===!0&&u("change",d.value)}function V(){return n.value.getBoundingClientRect()}function C(w,B=s.dragging.value){const R=e.getDraggingRatio(w,B);d.value=e.convertRatioToModel(R),f.value=l.snap!==!0||l.step===0?R:e.convertModelToRatio(d.value)}function U(){s.focus.value=!0}function T(w){if(!yt.includes(w.keyCode))return;Jt(w);const B=([34,33].includes(w.keyCode)?10:1)*s.step.value,R=([34,37,40].includes(w.keyCode)?-1:1)*(s.isReversed.value===!0?-1:1)*(l.vertical===!0?-1:1)*B;d.value=X(parseFloat((d.value+R).toFixed(s.decimals.value)),s.innerMin.value,s.innerMax.value),r()}return()=>{const w=e.getContent(b,s.tabindex,m,B=>{B.push(o())});return F("div",{ref:n,class:s.classes.value+(l.modelValue===null?" q-slider--no-value":""),...s.attributes.value,"aria-valuenow":l.modelValue},w)}}}),Ba=st({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(l,{slots:u}){const i=c(()=>{const s=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(e=>l[e]===!0).map(e=>`q-btn-group--${e}`).join(" ");return`q-btn-group row no-wrap${s.length!==0?" "+s:""}`+(l.spread===!0?" q-btn-group--spread":" inline")});return()=>F("div",{class:i.value},Xt(u.default))}});const Ma=_("span",{class:"text-weight-bold"},"Send Token",-1),Va={class:"text-body1"},Ia={class:"text-overline",style:{width:"500px"}},Da={class:"col"},Fa=H({__name:"SendTokenButton",props:["mint","decimals","amount","disabled","name"],setup(l){const u=g(!1),i=l,s=g(""),e=g(0),n=g(0);Oe(()=>n.value,()=>{e.value=parseFloat((n.value/10*i.amount).toFixed(i.decimals))}),Oe(()=>e.value,()=>{n.value=e.value/i.amount*100/10});async function f(){const d=new xe,p=await ue(new P(i.mint),new P(s.value));console.log(p);const A=await ue(new P(i.mint),q().publicKey.value);await J().connection.getAccountInfo(p)===null&&d.add(wa(q().publicKey.value,p,new P(s.value),new P(i.mint))),d.add(xa(A,p,q().publicKey.value,e.value*Math.pow(10,i.decimals)));try{const b=await q().sendTransaction(d,J().connection);await Te(b)}catch(b){Ae.create({color:"red",message:`${b}`,timeout:5e3})}}return(d,p)=>(x(),K(Le,null,[a(j,{disable:l.disabled,square:"",color:"secondary",size:"sm",icon:"send",onClick:p[0]||(p[0]=A=>u.value=!0)},null,8,["disable"]),a(ft,{modelValue:u.value,"onUpdate:modelValue":p[5]||(p[5]=A=>u.value=A)},{default:v(()=>[a(le,null,{default:v(()=>[a(dt,{class:"q-mt-md"},{default:v(()=>[a(Ie,{size:"xl",url:"sa_files/webp/"+l.mint+".webp"},null,8,["url"]),a(mt,null,{default:v(()=>[Ma,_("div",Va,$(l.name),1),_("div",Ia,$(l.mint),1)]),_:1}),ot(a(j,{flat:"",round:"",dense:"",icon:"close"},null,512),[[vt]])]),_:1}),a(pt,{class:"q-gutter-y-sm"},{default:v(()=>[_("div",null,[a($e,{filled:"",square:"",label:"Receiver",modelValue:s.value,"onUpdate:modelValue":p[1]||(p[1]=A=>s.value=A)},null,8,["modelValue"])]),a(Ba,{push:"",class:"row full-width"},{default:v(()=>[_("div",Da,[a($e,{filled:"",square:"",class:"col",label:"Amount",modelValue:e.value,"onUpdate:modelValue":p[2]||(p[2]=A=>e.value=A),hint:"Max: "+l.amount},null,8,["modelValue","hint"]),a(La,{class:"q-px-lg",modelValue:n.value,"onUpdate:modelValue":p[3]||(p[3]=A=>n.value=A),min:0,max:10,color:"secondary","track-size":"10px",markers:"","marker-labels":A=>`${10*A}%`},null,8,["modelValue","marker-labels"])]),a(j,{square:"",color:"primary",icon:"send",onClick:p[4]||(p[4]=A=>f())})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Qa=_("span",{class:"text-weight-bold"},"Close/Burn Account",-1),Ua={class:"text-overline"},za=_("div",{class:"row q-gutter-x-sm"},[_("div",{class:""},"Closing Token-Accounts will recover the fee!")],-1),Pa={class:"row q-gutter-x-sm"},Na=_("div",{class:""},"Amount left:",-1),Ea={class:""},Ra={class:"q-ma-md text-right text-weight-light"},Ka=H({__name:"EditTokenButton",props:["mint","decimals","amount"],setup(l){const u=g(!1),i=l;g(""),g(0);async function s(){const n=new xe,f=await ue(new P(i.mint),q().publicKey.value);n.add(ga(f,new P(i.mint),q().publicKey.value,i.amount*Math.pow(10,i.decimals))),n.add(Xe(f,q().publicKey.value,q().publicKey.value)),n.add(he.transfer({fromPubkey:q().publicKey.value,toPubkey:new P(Ge),lamports:ge}));try{const d=await q().sendTransaction(n,J().connection);await Te(d)}catch(d){Ae.create({color:"red",message:`${d}`,timeout:5e3})}}async function e(){const n=new xe,f=await ue(new P(i.mint),q().publicKey.value);n.add(Xe(f,q().publicKey.value,q().publicKey.value)),n.add(he.transfer({fromPubkey:q().publicKey.value,toPubkey:new P(Ge),lamports:ge}));try{const d=await q().sendTransaction(n,J().connection);await Te(d)}catch(d){Ae.create({color:"red",message:`${d}`,timeout:5e3})}}return(n,f)=>(x(),K(Le,null,[a(j,{square:"",color:"primary",size:"sm",icon:"edit",onClick:f[0]||(f[0]=d=>u.value=!0)}),a(ft,{modelValue:u.value,"onUpdate:modelValue":f[3]||(f[3]=d=>u.value=d)},{default:v(()=>[a(le,null,{default:v(()=>[a(dt,{class:"q-mt-md"},{default:v(()=>[a(ea,null,{default:v(()=>[a(lt,{name:"edit"})]),_:1}),a(mt,null,{default:v(()=>[Qa,_("div",Ua,$(l.mint),1)]),_:1}),ot(a(j,{flat:"",round:"",dense:"",icon:"close"},null,512),[[vt]])]),_:1}),a(pt,{class:"q-gutter-y-md col justify-around"},{default:v(()=>[za,_("div",Pa,[Na,_("div",Ea,$(l.amount),1)]),a(j,{square:"",disabled:l.amount==0,class:"full-width",color:"red",onClick:f[1]||(f[1]=d=>s())},{default:v(()=>[W(" Burn and close Account (+0.00193428 SOL) ")]),_:1},8,["disabled"]),a(j,{square:"",disabled:l.amount>0,class:"full-width",color:"orange",onClick:f[2]||(f[2]=d=>e())},{default:v(()=>[W(" Close Account (+0.00193428 SOL)")]),_:1},8,["disabled"])]),_:1}),_("div",Ra," fee: "+$(k(ge)/k(ta))+"\u25CE ",1)]),_:1})]),_:1},8,["modelValue"])],64))}}),Wa={key:0,class:"row"},ja=_("div",{class:"col-2 q-table__title"},"Accounts",-1),Oa={class:"text-subtitle1"},Ga={key:0,class:"row items-center justify-end q-gutter-x-sm"},Ha={key:2,class:"row items-center justify-end q-gutter-x-sm"},Ya={key:0,class:"row items-center justify-end q-gutter-x-sm"},Za={key:2,class:"row items-center justify-end q-gutter-x-sm"},Ja={class:"row items-center text-right"},Xa=_("div",{class:"col text-h5"},"\u2211",-1),el={class:"col-1 q-gutter-y-sm text-subtitle1"},tl={class:"row justify-end q-gutter-x-md items-center"},al={class:"row justify-end q-gutter-x-md items-center"},ll=H({__name:"WalletAccountsTable",props:["tab"],setup(l){const u=l;g();const i=g(!1),s=g("all"),e=g(["name","type","action","amount","market","value"]),n=[{name:"image",label:"",align:"left",required:!0},{name:"name",label:"Name",align:"left",sortable:!0,required:!0,field:o=>o.staratlas.name},{name:"type",label:"Type",align:"left",sortable:!0,field:o=>o.staratlas.attributes.itemType},{name:"account",label:"Account",align:"left",sortable:!0,field:o=>o.pubkey},{name:"mint",label:"Mint",align:"left",sortable:!0,field:o=>o.info.mint},{name:"owner",align:"left",label:"Owner",sortable:!0,field:o=>o.info.owner},{name:"decimals",label:"Decimals",sortable:!0,field:o=>{var m;return(m=o.info.tokenAmount)==null?void 0:m.decimals}},{name:"amount",label:"Amount",align:"right",sortable:!0,field:o=>{var m;return(m=o.info.tokenAmount)==null?void 0:m.uiAmount}},{name:"market",label:"Market",align:"right",field:o=>{var m;return(m=o.info.tokenAmount)==null?void 0:m.uiAmount}},{name:"value",label:"Value",align:"right",field:o=>{var m;return(m=o.info.tokenAmount)==null?void 0:m.uiAmount}},{label:"",align:"right",name:"action"}];Ce(async()=>{await z().update_accounts()}),te(()=>q().publicKey.value,async()=>{await z().update_accounts()});const f=g({rowsPerPage:0}),d=g([]),p=g([]);Ce(async()=>{var o,m;d.value=await J().api_client.trades.getPrices(((o=L.find(r=>r.type==I.USDC))==null?void 0:o.mint)??"none"),p.value=await J().api_client.trades.getPrices(((m=L.find(r=>r.type==I.ATLAS))==null?void 0:m.mint)??"none"),await z().update_accounts()});function A(){let o=[];return u.tab=="all"?o=z().get_account_map_staratlas:o=z().get_account_map_staratlas.filter(m=>{var r;return((r=m.staratlas.attributes.itemType)==null?void 0:r.toLowerCase())==u.tab}),i.value?o.filter(m=>m.info.tokenAmount.uiAmount!=0):o}const Q=c(()=>A().map(o=>{var m;return(((m=p.value.find(r=>{var V;return r.asset==o.info.mint&&r.currency==((V=L.find(C=>C.type==I.USDC))==null?void 0:V.mint)}))==null?void 0:m.price)??0)*o.info.tokenAmount.uiAmount}).reduce((o,m)=>o+m,0)),b=c(()=>A().map(o=>{var m;return(((m=p.value.find(r=>{var V;return r.asset==o.info.mint&&r.currency==((V=L.find(C=>C.type==I.ATLAS))==null?void 0:V.mint)}))==null?void 0:m.price)??0)*o.info.tokenAmount.uiAmount}).reduce((o,m)=>o+m,0));return(o,m)=>(x(),N(le,{flat:""},{default:v(()=>[k(z)().is_loading?(x(),K("div",Wa,[a(Y),a(ut,{class:"row",color:"primary",size:"3rem"}),a(Y)])):E("",!0),a(it,{color:"primary",dark:"",flat:"",square:"","virtual-scroll":"",pagination:f.value,"onUpdate:pagination":m[3]||(m[3]=r=>f.value=r),"rows-per-page-options":[0],"visible-columns":e.value,title:"Accounts",rows:A(),columns:n,"row-key":"name"},{top:v(r=>[ja,a(Y),a(we,{modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=V=>s.value=V),align:"justify"},{default:v(()=>[a(Z,{name:"all",label:"ALL",class:"bg-secondary"}),a(Z,{name:"usdc",label:"USDC"}),a(Z,{name:"atlas",label:"ATLAS"})]),_:1},8,["modelValue"]),a(Y),a(sa,{color:"secondary",modelValue:i.value,"onUpdate:modelValue":m[1]||(m[1]=V=>i.value=V),label:"Hide empty accounts","left-label":""},null,8,["modelValue"]),a(Y),a(ia,{modelValue:e.value,"onUpdate:modelValue":m[2]||(m[2]=V=>e.value=V),multiple:"",borderless:"",dense:"","options-dense":"","display-value":o.$q.lang.table.columns,"emit-value":"","map-options":"",options:n,"option-value":"name",style:{"min-width":"150px"}},null,8,["modelValue","display-value"]),a(j,{flat:"",round:"",dense:"",icon:r.inFullscreen?"fullscreen_exit":"fullscreen",onClick:r.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])]),body:v(r=>{var V;return[a(Se,{props:r,class:rt(((V=r.row.info.tokenAmount)==null?void 0:V.uiAmount)==0?"text-yellow":"")},{default:v(()=>[a(M,{key:"image",props:r},{default:v(()=>[a(Ie,{size:"xl",url:"sa_files/webp/"+r.row.info.mint+".webp"},null,8,["url"])]),_:2},1032,["props"]),a(M,{key:"name",props:r},{default:v(()=>[_("div",Oa,$(r.row.staratlas.name??"-"),1)]),_:2},1032,["props"]),a(M,{key:"type",props:r},{default:v(()=>[W($(r.row.staratlas.attributes.itemType??"-"),1)]),_:2},1032,["props"]),a(M,{key:"account",props:r},{default:v(()=>[a(ke,{address:r.row.pubkey},null,8,["address"])]),_:2},1032,["props"]),a(M,{key:"owner",props:r},{default:v(()=>[a(ke,{address:r.row.info.owner},null,8,["address"])]),_:2},1032,["props"]),a(M,{key:"mint",props:r,class:""},{default:v(()=>[a(ke,{address:r.row.info.mint},null,8,["address"])]),_:2},1032,["props"]),a(M,{key:"decimals",props:r},{default:v(()=>{var C;return[W($((C=r.row.info.tokenAmount)==null?void 0:C.decimals),1)]}),_:2},1032,["props"]),a(M,{key:"amount",class:"text-subtitle1 text-bold",props:r},{default:v(()=>{var C;return[_("div",null,$((C=r.row.info.tokenAmount)==null?void 0:C.uiAmount.toFixed(0)),1)]}),_:2},1032,["props"]),a(M,{key:"market",class:"text-subtitle1 text-bold",props:r},{default:v(()=>{var C,U;return[s.value!="atlas"?(x(),K("div",Ga,[_("div",null,$((((C=d.value.find(T=>T.asset==r.row.info.mint&&T.currency==k(L).find(w=>w.type==k(I).USDC).mint))==null?void 0:C.price)??0).toFixed(2)),1),a(G,{currency:k(L).find(T=>T.type==k(I).USDC)},null,8,["currency"])])):E("",!0),s.value=="all"?(x(),N(He,{key:1})):E("",!0),s.value!="usdc"?(x(),K("div",Ha,[_("div",null,$((((U=p.value.find(T=>T.asset==r.row.info.mint&&T.currency==k(L).find(w=>w.type==k(I).ATLAS).mint))==null?void 0:U.price)??0).toFixed(2)),1),a(G,{currency:k(L).find(T=>T.type==k(I).ATLAS)},null,8,["currency"])])):E("",!0)]}),_:2},1032,["props"]),a(M,{key:"value",class:"text-subtitle1 text-bold",props:r},{default:v(()=>{var C,U,T,w;return[s.value!="atlas"?(x(),K("div",Ya,[_("div",null,$(((((C=p.value.find(B=>B.asset==r.row.info.mint&&B.currency==k(L).find(R=>R.type==k(I).USDC).mint))==null?void 0:C.price)??0)*((U=r.row.info.tokenAmount)==null?void 0:U.uiAmount)).toFixed(2)),1),a(G,{currency:k(L).find(B=>B.type==k(I).USDC)},null,8,["currency"])])):E("",!0),s.value=="all"?(x(),N(He,{key:1})):E("",!0),s.value!="usdc"?(x(),K("div",Za,[_("div",null,$(((((T=p.value.find(B=>B.asset==r.row.info.mint&&B.currency==k(L).find(R=>R.type==k(I).ATLAS).mint))==null?void 0:T.price)??0)*((w=r.row.info.tokenAmount)==null?void 0:w.uiAmount)).toFixed(2)),1),a(G,{currency:k(L).find(B=>B.type==k(I).ATLAS)},null,8,["currency"])])):E("",!0)]}),_:2},1032,["props"]),a(M,{key:"action",props:r,class:"q-gutter-x-sm"},{default:v(()=>[a(Ka,{amount:r.row.info.tokenAmount.uiAmount,mint:r.row.info.mint,decimals:r.row.info.tokenAmount.decimals},null,8,["amount","mint","decimals"]),a(Fa,{disabled:r.row.info.tokenAmount.uiAmount==0,mint:r.row.info.mint,decimals:r.row.info.tokenAmount.decimals,amount:r.row.info.tokenAmount.uiAmount,name:r.row.staratlas.name},null,8,["disabled","mint","decimals","amount","name"])]),_:2},1032,["props"])]),_:2},1032,["props","class"])]}),"top-row":v(()=>[a(Se,{class:"bg-primary"},{default:v(()=>[a(M,{colspan:"100%"},{default:v(()=>[_("div",Ja,[Xa,_("div",el,[_("div",tl,[W($(Q.value.toFixed(2))+" ",1),a(G,{currency:k(L).find(r=>r.type==k(I).USDC)},null,8,["currency"])]),_("div",al,[W($(b.value.toFixed(2))+" ",1),a(G,{currency:k(L).find(r=>r.type==k(I).ATLAS)},null,8,["currency"])])])])]),_:1}),a(bt,null,{default:v(()=>[W("Total market value")]),_:1})]),_:1})]),_:1},8,["pagination","visible-columns","rows"])]),_:1}))}}),nl=H({__name:"WalletAccountInput",setup(l){const u=g("");te(()=>q().publicKey.value,()=>{z().input_wallet=q().publicKey.value.toString()});async function i(){u.value.length?await z().update_accounts(new P(u.value)):await z().update_accounts()}return(s,e)=>(x(),N(le,{square:"",flat:"",class:"row"},{default:v(()=>[a($e,{label:"Wallet-Address",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=n=>u.value=n),clearable:"","clear-icon":"close",square:"",filled:"",class:"col"},null,8,["modelValue"]),a(j,{onClick:e[1]||(e[1]=n=>{i().then(()=>{k(z)().input_wallet=u.value})}),color:"secondary",square:"",size:"md",icon:"fa-solid fa-paper-plane"},{default:v(()=>[a(bt,null,{default:v(()=>[W("Query wallet")]),_:1})]),_:1})]),_:1}))}});const sl={class:"row items-center q-gutter-x-xs justify-end"},ol={class:"row items-center q-gutter-x-xs justify-end"},rl={class:"row items-center q-gutter-x-xs justify-end"},ul=H({__name:"WalletAccountHistoryTable",props:["data"],setup(l){const u=g({rowsPerPage:0}),i=g([{name:"timestamp",label:"Timestamp",align:"left",field:"timestamp",sortable:!0},{name:"info",align:"left",field:"info",sortable:!0},{name:"side",label:"Side",align:"left",field:"side",sortable:!0},{name:"fee",align:"right",label:"Fee",field:s=>{var e;return((e=s.fee)==null?void 0:e.toFixed(2))??0},sortable:!0},{name:"size",align:"right",label:"Size",field:"volume",sortable:!0},{name:"volume",align:"right",label:"Volume",field:"volume",sortable:!0},{name:"price",align:"right",label:"Price",field:s=>s.price.toFixed(2),sortable:!0}]);return(s,e)=>(x(),N(it,{rows:l.data,dense:"",square:"",flat:"","virtual-scroll":"",columns:i.value,pagination:u.value,"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"row-key":"name","hide-bottom":""},{body:v(n=>[a(Se,{props:n},{default:v(()=>[a(M,{key:"timestamp",props:n},{default:v(()=>[W($(n.row.timestamp),1)]),_:2},1032,["props"]),a(M,{key:"info",props:n},{default:v(()=>[a(j,{flat:"",size:"sm",icon:"link",href:"https://solscan.io/tx/"+n.row.signature,target:"_blank"},null,8,["href"])]),_:2},1032,["props"]),a(M,{key:"side",props:n},{default:v(()=>[a(ca,{class:rt(n.row.side=="BUY"?"buy":"sell")},{default:v(()=>[W($(n.row.side),1)]),_:2},1032,["class"])]),_:2},1032,["props"]),a(M,{key:"fee",props:n},{default:v(()=>[W($((n.row.fee/n.row.volume*100).toFixed(1)??0)+"% ",1)]),_:2},1032,["props"]),a(M,{key:"size",props:n},{default:v(()=>[_("div",sl,[_("div",null,$(n.row.size??0),1),a(Ie,{style:{width:"10px",height:"10px"},url:"sa_files/webp/"+n.row.asset+".webp"},null,8,["url"])])]),_:2},1032,["props"]),a(M,{key:"volume",props:n},{default:v(()=>[_("div",ol,[_("div",null,$(n.row.volume??0),1),a(G,{style:{width:"14px",height:"14px"},currency:k(L).find(f=>f.mint===n.row.currency)},null,8,["currency"])])]),_:2},1032,["props"]),a(M,{key:"price",props:n,class:""},{default:v(()=>[_("div",rl,[_("div",null,$(n.row.price??0),1),a(G,{style:{width:"14px",height:"14px"},currency:k(L).find(f=>f.mint===n.row.currency)},null,8,["currency"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"]))}});const il={key:0,class:"row"},cl={key:1},dl={key:2,class:"text-center text-body2 q-pa-sm"},at=1e6,ml=H({__name:"WalletAccountHistory",setup(l){const u=g(),i=g([]),s=g(!1);te(()=>q().publicKey.value,async()=>{await e(q().publicKey.value.toString())}),te(()=>z().input_wallet,async()=>{await e(z().input_wallet)}),Ce(async()=>{z().input_wallet?await e(z().input_wallet):await e(q().publicKey.value.toString())});async function e(f){var d,p,A,Q;s.value=!0,u.value=await J().api_client.trades.search("maker_and_taker",f,at),i.value=[],i.value.push({name:"USDC [buy]",data:(d=u.value)==null?void 0:d.filter(b=>{var o;return b.currency==((o=L.find(m=>m.type==I.USDC))==null?void 0:o.mint)}).filter(b=>{var o;return(o=b.side)==null?void 0:o.includes("BUY")}).map(b=>[b.timestamp,b.price,b.volume]),axisName:"USDC"}),i.value.push({name:"USDC [sell]",data:(p=u.value)==null?void 0:p.filter(b=>{var o;return b.currency==((o=L.find(m=>m.type==I.USDC))==null?void 0:o.mint)}).filter(b=>{var o;return(o=b.side)==null?void 0:o.includes("SELL")}).map(b=>[b.timestamp,b.price,b.volume]),axisName:"USDC"}),i.value.push({name:"ATLAS [buy]",data:(A=u.value)==null?void 0:A.filter(b=>{var o;return b.currency==((o=L.find(m=>m.type==I.ATLAS))==null?void 0:o.mint)}).filter(b=>{var o;return(o=b.side)==null?void 0:o.includes("BUY")}).map(b=>[b.timestamp,b.price,b.volume])}),i.value.push({name:"ATLAS [sell]",data:(Q=u.value)==null?void 0:Q.filter(b=>{var o;return b.currency==((o=L.find(m=>m.type==I.ATLAS))==null?void 0:o.mint)}).filter(b=>{var o;return(o=b.side)==null?void 0:o.includes("SELL")}).map(b=>[b.timestamp,b.price,b.volume])}),s.value=!1}const n={colors:["#3976ea","#3976ea","#b2b2b2","#b2b2b2"],chart:{height:350,type:"bubble",toolbar:{show:!1},foreColor:"#ffffff"},dataLabels:{enabled:!1},fill:{opacity:.8},xaxis:{type:"datetime"},yaxis:[{title:{text:"USDC [buy]"},seriesName:"USDC [buy]"},{title:{text:"USDC [sell]"},seriesName:"USDC [sell]"},{title:{text:"ATLAS [buy]"},seriesName:"ATLAS [buy]",opposite:!0},{title:{text:"ATLAS [sell]"},seriesName:"ATLAS [sell]",opposite:!0}]};return(f,d)=>{const p=aa("apexchart");return x(),N(le,{flat:""},{default:v(()=>[s.value?(x(),K("div",il,[a(Y),a(ut,{class:"row q-pa-sm",color:"primary",size:"3rem"}),a(Y)])):E("",!0),u.value?(x(),K("div",cl,[s.value?E("",!0):(x(),N(p,{key:0,class:"chart",type:"scatter",height:"350",options:n,series:i.value},null,8,["series"])),s.value?E("",!0):(x(),N(ul,{key:1,data:u.value},null,8,["data"])),_("div",{class:"text-center text-orange-4 text-weight-thin text-right q-mr-md"}," Limited to: "+$(at))])):(x(),K("div",dl,"No data"))]),_:1})}}});var vl=ba(ml,[["__scopeId","data-v-4836eefe"]]);const fl={style:{width:"80vw"}},ql=H({__name:"WalletPage",setup(l){const u=g("account"),i=g("all");return(s,e)=>(x(),N(jt,{class:"row q-pa-sm justify-center"},{default:v(()=>[_("div",fl,[a(nl,{class:"q-mb-sm"}),a(we,{align:"justify",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=n=>u.value=n)},{default:v(()=>[a(Z,{name:"account",label:"Accounts"}),a(Z,{name:"activity",label:"Market Activity"})]),_:1},8,["modelValue"]),u.value=="account"?(x(),N(we,{key:0,align:"justify",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=n=>i.value=n)},{default:v(()=>[a(Z,{name:"all",label:"All",class:"bg-secondary"}),(x(!0),K(Le,null,la(k(na)().get_itemTypes,n=>(x(),N(Z,{name:n,label:n,key:n},null,8,["name","label"]))),128))]),_:1},8,["modelValue"])):E("",!0),u.value=="account"?(x(),N(ll,{key:1,tab:i.value,dark:""},null,8,["tab"])):E("",!0),u.value=="activity"?(x(),N(vl,{key:2})):E("",!0)])]),_:1}))}});export{ql as default};
