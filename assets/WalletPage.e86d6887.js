import{Q as Z,b as we,a as H}from"./QSpace.39a90d72.js";import{Q as Wt}from"./QPage.b5dbee4c.js";import{bZ as ae,cr as Ot,bE as Q,bY as ie,b_ as ce,b$ as de,c0 as ee,de as We,df as Te,cj as he,a9 as j,aI as w,Z as z,bc as v,a7 as l,cl as at,a0 as _,H as $,A as x,cb as N,n as k,Y as c,ay as jt,cV as Gt,d9 as Ht,db as _e,ak as M,c5 as Yt,ah as lt,c1 as nt,b7 as te,cz as Zt,c6 as Xt,dg as Oe,$ as U,be as st,M as qe,cg as xe,ce as A,ca as Y,cf as Ce,cc as Jt,a6 as O,dh as ke,ck as ea,cd as je,aC as Se,cp as D,ch as V,ci as I,_ as F,D as rt,aQ as ta,aO as aa,d1 as la}from"./index.36d64e7e.js";import{d as ot,b as ut,a as L,C as X,Q as it,c as na}from"./QTr.6fe7997d.js";import{U as sa,e as J,V as ra,W as oa,i as Ae,j as ct,h as ua,Q as ia}from"./use-checkbox.22408254.js";import{Q as Ge}from"./QSeparator.44eb52f4.js";import{Q as le}from"./QCard.ede13c61.js";import{f as ca,A as Le}from"./format_address.bfc1b911.js";import{e as dt,u as Be,a as Me,T as Ve,Q as mt,b as vt,C as ft}from"./ClosePopup.1bb1da8f.js";import{T as da,h as $e}from"./handle_confirmation.8dd856f3.js";import{a as ma,u as va}from"./use-dark.e24aad86.js";import{Q as bt}from"./QCardSection.e4aa71a8.js";import{_ as fa}from"./plugin-vue_export-helper.21dcd24c.js";import"./QResizeObserver.ee426bfa.js";const ba=n=>{const o=ae(n),{encode:u,decode:r}=dt(o),e=o;return e.decode=(s,d)=>!!r(s,d),e.encode=(s,d,i)=>{const y=Number(s);return u(y,d,i)},e},He=n=>{const o=Ot(32,n),{encode:u,decode:r}=dt(o),e=o;return e.decode=(s,d)=>{const i=r(s,d);return new Q(i)},e.encode=(s,d,i)=>{const y=s.toBuffer();return u(y,d,i)},e};class pa extends Error{constructor(o){super(o)}}class ya extends pa{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}const Ye=ie([ae("instruction"),Be("amount")]);function _a(n,o,u,r,e=[],s=ee){const d=Me([{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0}],u,e),i=ce.Buffer.alloc(Ye.span);return Ye.encode({instruction:Ve.Burn,amount:BigInt(r)},i),new de({keys:d,programId:s,data:i})}const Ze=ie([ae("instruction")]);function Xe(n,o,u,r=[],e=ee){const s=Me([{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0}],u,r),d=ce.Buffer.alloc(Ze.span);return Ze.encode({instruction:Ve.CloseAccount},d),new de({keys:s,programId:e,data:d})}const ka=ie([We("mintAuthorityOption"),He("mintAuthority"),Be("supply"),ae("decimals"),ba("isInitialized"),We("freezeAuthorityOption"),He("freezeAuthority")]);ka.span;async function ue(n,o,u=!1,r=ee,e=Te){if(!u&&!Q.isOnCurve(o.toBuffer()))throw new ya;const[s]=await Q.findProgramAddress([o.toBuffer(),r.toBuffer(),n.toBuffer()],e);return s}function ga(n,o,u,r,e=ee,s=Te){return wa(n,o,u,r,ce.Buffer.alloc(0),e,s)}function wa(n,o,u,r,e,s=ee,d=Te){const i=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:he.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return new de({keys:i,programId:d,data:e})}const Je=ie([ae("instruction"),Be("amount")]);function ha(n,o,u,r,e=[],s=ee){const d=Me([{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0}],u,e),i=ce.Buffer.alloc(Je.span);return Je.encode({instruction:Ve.Transfer,amount:BigInt(r)},i),new de({keys:d,programId:s,data:i})}const ge=j({__name:"SolscanLink",props:["address"],setup(n){return(o,u)=>(w(),z(N,{class:"full-width",square:"",color:"primary",size:"sm",icon:"link",target:"_blank",href:"https://solscan.io/account/"+n.address},{default:v(()=>[l(at),_("div",null,$(x(ca)(n.address)),1)]),_:1},8,["href"]))}}),et="q-slider__marker-labels",xa=n=>({value:n}),Ca=({marker:n})=>M("div",{key:n.value,style:n.style,class:n.classes},n.label),pt=[34,37,40,33,39,38],Sa={...va,...sa,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:n=>n>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Aa=["pan","update:modelValue","change"];function $a({updateValue:n,updatePosition:o,getDragging:u,formAttrs:r}){const{props:e,emit:s,slots:d,proxy:{$q:i}}=lt(),y=ma(e,i),f=ra(r),b=k(!1),a=k(!1),m=k(!1),C=k(!1),h=c(()=>e.vertical===!0?"--v":"--h"),E=c(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),T=c(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(i.lang.rtl===!0)),P=c(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),K=c(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),q=c(()=>e.disable!==!0&&e.readonly!==!0&&P.value<K.value),R=c(()=>(String(e.step).trim().split(".")[1]||"").length),G=c(()=>e.step===0?1:e.step),yt=c(()=>q.value===!0?e.tabindex||0:-1),ne=c(()=>e.max-e.min),Ie=c(()=>K.value-P.value),se=c(()=>ve(P.value)),me=c(()=>ve(K.value)),re=c(()=>e.vertical===!0?T.value===!0?"bottom":"top":T.value===!0?"right":"left"),De=c(()=>e.vertical===!0?"height":"width"),_t=c(()=>e.vertical===!0?"width":"height"),Qe=c(()=>e.vertical===!0?"vertical":"horizontal"),kt=c(()=>{const t={role:"slider","aria-valuemin":P.value,"aria-valuemax":K.value,"aria-orientation":Qe.value,"data-step":e.step};return e.disable===!0?t["aria-disabled"]="true":e.readonly===!0&&(t["aria-readonly"]="true"),t}),gt=c(()=>`q-slider q-slider${h.value} q-slider--${b.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(q.value===!0?" q-slider--editable":""))+(m.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(y.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+h.value:""));function oe(t){const p="q-slider__"+t;return`${p} ${p}${h.value} ${p}${h.value}${E.value}`}function ze(t){const p="q-slider__"+t;return`${p} ${p}${h.value}`}const wt=c(()=>{const t=e.selectionColor||e.color;return"q-slider__selection absolute"+(t!==void 0?` text-${t}`:"")}),ht=c(()=>ze("markers")+" absolute overflow-hidden"),xt=c(()=>ze("track-container")),Ct=c(()=>oe("pin")),St=c(()=>oe("label")),At=c(()=>oe("text-container")),$t=c(()=>oe("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),Tt=c(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),qt=c(()=>{const t={[_t.value]:e.trackSize};return e.trackImg!==void 0&&(t.backgroundImage=`url(${e.trackImg}) !important`),t}),Lt=c(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),Fe=c(()=>{const t=me.value-se.value,p={[re.value]:`${100*se.value}%`,[De.value]:t===0?"2px":`${100*t}%`};return e.innerTrackImg!==void 0&&(p.backgroundImage=`url(${e.innerTrackImg}) !important`),p});function Bt(t){const{min:p,max:g,step:S}=e;let B=p+t*(g-p);if(S>0){const W=(B-p)%S;B+=(Math.abs(W)>=S/2?(W<0?-1:1)*S:0)-W}return R.value>0&&(B=parseFloat(B.toFixed(R.value))),J(B,P.value,K.value)}function ve(t){return ne.value===0?0:(t-e.min)/ne.value}function Mt(t,p){const g=Gt(t),S=e.vertical===!0?J((g.top-p.top)/p.height,0,1):J((g.left-p.left)/p.width,0,1);return J(T.value===!0?1-S:S,se.value,me.value)}const Pe=c(()=>Ht(e.markers)===!0?e.markers:G.value),Ue=c(()=>{const t=[],p=Pe.value,g=e.max;let S=e.min;do t.push(S),S+=p;while(S<g);return t.push(g),t}),Ne=c(()=>{const t=` ${et}${h.value}-`;return et+`${t}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${t}${T.value===!0?"rtl":"ltr"}`}),fe=c(()=>e.markerLabels===!1?null:It(e.markerLabels).map((t,p)=>({index:p,value:t.value,label:t.label||t.value,classes:Ne.value+(t.classes!==void 0?" "+t.classes:""),style:{...Re(t.value),...t.style||{}}}))),Ee=c(()=>({markerList:fe.value,markerMap:Dt.value,classes:Ne.value,getStyle:Re})),Vt=c(()=>{const t=Ie.value===0?"2px":100*Pe.value/Ie.value;return{...Fe.value,backgroundSize:e.vertical===!0?`2px ${t}%`:`${t}% 2px`}});function It(t){if(t===!1)return null;if(t===!0)return Ue.value.map(xa);if(typeof t=="function")return Ue.value.map(g=>{const S=t(g);return _e(S)===!0?{...S,value:g}:{value:g,label:S}});const p=({value:g})=>g>=e.min&&g<=e.max;return Array.isArray(t)===!0?t.map(g=>_e(g)===!0?g:{value:g}).filter(p):Object.keys(t).map(g=>{const S=t[g],B=Number(g);return _e(S)===!0?{...S,value:B}:{value:B,label:S}}).filter(p)}function Re(t){return{[re.value]:`${100*(t-e.min)/ne.value}%`}}const Dt=c(()=>{if(e.markerLabels===!1)return null;const t={};return fe.value.forEach(p=>{t[p.value]=p}),t});function Qt(){if(d["marker-label-group"]!==void 0)return d["marker-label-group"](Ee.value);const t=d["marker-label"]||Ca;return fe.value.map(p=>t({marker:p,...Ee.value}))}const zt=c(()=>[[da,Ft,void 0,{[Qe.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Ft(t){t.isFinal===!0?(C.value!==void 0&&(o(t.evt),t.touch===!0&&n(!0),C.value=void 0,s("pan","end")),b.value=!1,m.value=!1):t.isFirst===!0?(C.value=u(t.evt),o(t.evt),n(),b.value=!0,s("pan","start")):(o(t.evt),n())}function Ke(){m.value=!1}function Pt(t){o(t,u(t)),n(),a.value=!0,b.value=!0,document.addEventListener("mouseup",be,!0)}function be(){a.value=!1,b.value=!1,n(!0),Ke(),document.removeEventListener("mouseup",be,!0)}function Ut(t){o(t,u(t)),n(!0)}function Nt(t){pt.includes(t.keyCode)&&n(!0)}function Et(t){if(e.vertical===!0)return null;const p=i.lang.rtl!==e.reverse?1-t:t;return{transform:`translateX(calc(${2*p-1} * ${e.thumbSize} / 2 + ${50-100*p}%))`}}function Rt(t){const p=c(()=>a.value===!1&&(m.value===t.focusValue||m.value==="both")?" q-slider--focus":""),g=c(()=>`q-slider__thumb q-slider__thumb${h.value} q-slider__thumb${h.value}-${T.value===!0?"rtl":"ltr"} absolute non-selectable`+p.value+(t.thumbColor.value!==void 0?` text-${t.thumbColor.value}`:"")),S=c(()=>({width:e.thumbSize,height:e.thumbSize,[re.value]:`${100*t.ratio.value}%`,zIndex:m.value===t.focusValue?2:void 0})),B=c(()=>t.labelColor.value!==void 0?` text-${t.labelColor.value}`:""),W=c(()=>Et(t.ratio.value)),pe=c(()=>"q-slider__text"+(t.labelTextColor.value!==void 0?` text-${t.labelTextColor.value}`:""));return()=>{const ye=[M("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[M("path",{d:e.thumbPath})]),M("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(ye.push(M("div",{class:Ct.value+" absolute fit no-pointer-events"+B.value},[M("div",{class:St.value,style:{minWidth:e.thumbSize}},[M("div",{class:At.value,style:W.value},[M("span",{class:pe.value},t.label.value)])])])),e.name!==void 0&&e.disable!==!0&&f(ye,"push")),M("div",{class:g.value,style:S.value,...t.getNodeData()},ye)}}function Kt(t,p,g,S){const B=[];e.innerTrackColor!=="transparent"&&B.push(M("div",{key:"inner",class:Lt.value,style:Fe.value})),e.selectionColor!=="transparent"&&B.push(M("div",{key:"selection",class:wt.value,style:t.value})),e.markers!==!1&&B.push(M("div",{key:"marker",class:ht.value,style:Vt.value})),S(B);const W=[Yt("div",{key:"trackC",class:xt.value,tabindex:p.value,...g.value},[M("div",{class:Tt.value,style:qt.value},B)],"slide",q.value,()=>zt.value)];if(e.markerLabels!==!1){const pe=e.switchMarkerLabelsSide===!0?"unshift":"push";W[pe](M("div",{key:"markerL",class:$t.value},Qt()))}return W}return jt(()=>{document.removeEventListener("mouseup",be,!0)}),{state:{active:b,focus:m,preventFocus:a,dragging:C,editable:q,classes:gt,tabindex:yt,attributes:kt,step:G,decimals:R,trackLen:ne,innerMin:P,innerMinRatio:se,innerMax:K,innerMaxRatio:me,positionProp:re,sizeProp:De,isReversed:T},methods:{onActivate:Pt,onMobileClick:Ut,onBlur:Ke,onKeyup:Nt,getContent:Kt,getThumbRenderFn:Rt,convertRatioToModel:Bt,convertModelToRatio:ve,getDraggingRatio:Mt}}}const Ta=()=>({});var qa=nt({name:"QSlider",props:{...Sa,modelValue:{required:!0,default:null,validator:n=>typeof n=="number"||n===null},labelValue:[String,Number]},emits:Aa,setup(n,{emit:o}){const{proxy:{$q:u}}=lt(),{state:r,methods:e}=$a({updateValue:h,updatePosition:T,getDragging:E,formAttrs:oa(n)}),s=k(null),d=k(0),i=k(0);function y(){i.value=n.modelValue===null?r.innerMin.value:J(n.modelValue,r.innerMin.value,r.innerMax.value)}te(()=>`${n.modelValue}|${r.innerMin.value}|${r.innerMax.value}`,y),y();const f=c(()=>e.convertModelToRatio(i.value)),b=c(()=>r.active.value===!0?d.value:f.value),a=c(()=>{const q={[r.positionProp.value]:`${100*r.innerMinRatio.value}%`,[r.sizeProp.value]:`${100*(b.value-r.innerMinRatio.value)}%`};return n.selectionImg!==void 0&&(q.backgroundImage=`url(${n.selectionImg}) !important`),q}),m=e.getThumbRenderFn({focusValue:!0,getNodeData:Ta,ratio:b,label:c(()=>n.labelValue!==void 0?n.labelValue:i.value),thumbColor:c(()=>n.thumbColor||n.color),labelColor:c(()=>n.labelColor),labelTextColor:c(()=>n.labelTextColor)}),C=c(()=>r.editable.value!==!0?{}:u.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:P,onBlur:e.onBlur,onKeydown:K,onKeyup:e.onKeyup});function h(q){i.value!==n.modelValue&&o("update:modelValue",i.value),q===!0&&o("change",i.value)}function E(){return s.value.getBoundingClientRect()}function T(q,R=r.dragging.value){const G=e.getDraggingRatio(q,R);i.value=e.convertRatioToModel(G),d.value=n.snap!==!0||n.step===0?G:e.convertModelToRatio(i.value)}function P(){r.focus.value=!0}function K(q){if(!pt.includes(q.keyCode))return;Zt(q);const R=([34,33].includes(q.keyCode)?10:1)*r.step.value,G=([34,37,40].includes(q.keyCode)?-1:1)*(r.isReversed.value===!0?-1:1)*(n.vertical===!0?-1:1)*R;i.value=J(parseFloat((i.value+G).toFixed(r.decimals.value)),r.innerMin.value,r.innerMax.value),h()}return()=>{const q=e.getContent(a,r.tabindex,C,R=>{R.push(m())});return M("div",{ref:s,class:r.classes.value+(n.modelValue===null?" q-slider--no-value":""),...r.attributes.value,"aria-valuenow":n.modelValue},q)}}}),La=nt({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(n,{slots:o}){const u=c(()=>{const r=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(e=>n[e]===!0).map(e=>`q-btn-group--${e}`).join(" ");return`q-btn-group row no-wrap${r.length!==0?" "+r:""}`+(n.spread===!0?" q-btn-group--spread":" inline")});return()=>M("div",{class:u.value},Xt(o.default))}});const Ba=_("span",{class:"text-weight-bold"},"Send Token",-1),Ma={class:"text-body1"},Va={class:"text-overline",style:{width:"500px"}},Ia={class:"col"},Da=j({__name:"SendTokenButton",props:["mint","decimals","amount","disabled","name"],setup(n){const o=k(!1),u=n,r=k(""),e=k(0),s=k(0);Oe(()=>s.value,()=>{e.value=parseFloat((s.value/10*u.amount).toFixed(u.decimals))}),Oe(()=>e.value,()=>{s.value=e.value/u.amount*100/10});async function d(){const i=new xe,y=await ue(new Q(u.mint),new Q(r.value));console.log(y);const f=await ue(new Q(u.mint),A().publicKey.value);await Y().connection.getAccountInfo(y)===null&&i.add(ga(A().publicKey.value,y,new Q(r.value),new Q(u.mint))),i.add(ha(f,y,A().publicKey.value,e.value*Math.pow(10,u.decimals)));try{const a=await A().sendTransaction(i,Y().connection);await $e(a)}catch(a){Ce.create({color:"red",message:`${a}`,timeout:5e3})}}return(i,y)=>(w(),U(qe,null,[l(N,{disable:n.disabled,square:"",color:"secondary",size:"sm",icon:"send",onClick:y[0]||(y[0]=f=>o.value=!0)},null,8,["disable"]),l(ct,{modelValue:o.value,"onUpdate:modelValue":y[5]||(y[5]=f=>o.value=f)},{default:v(()=>[l(le,null,{default:v(()=>[l(mt,{class:"q-mt-md"},{default:v(()=>[l(Le,{size:"xl",url:"sa_files/webp/"+n.mint+".webp"},null,8,["url"]),l(vt,null,{default:v(()=>[Ba,_("div",Ma,$(n.name),1),_("div",Va,$(n.mint),1)]),_:1}),st(l(N,{flat:"",round:"",dense:"",icon:"close"},null,512),[[ft]])]),_:1}),l(bt,{class:"q-gutter-y-sm"},{default:v(()=>[_("div",null,[l(Ae,{filled:"",square:"",label:"Receiver",modelValue:r.value,"onUpdate:modelValue":y[1]||(y[1]=f=>r.value=f)},null,8,["modelValue"])]),l(La,{push:"",class:"row full-width"},{default:v(()=>[_("div",Ia,[l(Ae,{filled:"",square:"",class:"col",label:"Amount",modelValue:e.value,"onUpdate:modelValue":y[2]||(y[2]=f=>e.value=f),hint:"Max: "+n.amount},null,8,["modelValue","hint"]),l(qa,{class:"q-px-lg",modelValue:s.value,"onUpdate:modelValue":y[3]||(y[3]=f=>s.value=f),min:0,max:10,color:"secondary","track-size":"10px",markers:"","marker-labels":f=>`${10*f}%`},null,8,["modelValue","marker-labels"])]),l(N,{square:"",color:"primary",icon:"send",onClick:y[4]||(y[4]=f=>d())})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Qa=_("span",{class:"text-weight-bold"},"Close/Burn Account",-1),za={class:"text-overline"},Fa=_("div",{class:"row q-gutter-x-sm"},[_("div",{class:""},"Closing Token-Accounts will recover the fee!")],-1),Pa={class:"row q-gutter-x-sm"},Ua=_("div",{class:""},"Amount left:",-1),Na={class:""},Ea={class:"q-ma-md text-right text-weight-light"},Ra=j({__name:"EditTokenButton",props:["mint","decimals","amount"],setup(n){const o=k(!1),u=n;k(""),k(0);async function r(){const s=new xe,d=await ue(new Q(u.mint),A().publicKey.value);s.add(_a(d,new Q(u.mint),A().publicKey.value,u.amount*Math.pow(10,u.decimals))),s.add(Xe(d,A().publicKey.value,A().publicKey.value)),s.add(he.transfer({fromPubkey:A().publicKey.value,toPubkey:new Q(je),lamports:ke}));try{const i=await A().sendTransaction(s,Y().connection);await $e(i)}catch(i){Ce.create({color:"red",message:`${i}`,timeout:5e3})}}async function e(){const s=new xe,d=await ue(new Q(u.mint),A().publicKey.value);s.add(Xe(d,A().publicKey.value,A().publicKey.value)),s.add(he.transfer({fromPubkey:A().publicKey.value,toPubkey:new Q(je),lamports:ke}));try{const i=await A().sendTransaction(s,Y().connection);await $e(i)}catch(i){Ce.create({color:"red",message:`${i}`,timeout:5e3})}}return(s,d)=>(w(),U(qe,null,[l(N,{square:"",color:"primary",size:"sm",icon:"edit",onClick:d[0]||(d[0]=i=>o.value=!0)}),l(ct,{modelValue:o.value,"onUpdate:modelValue":d[3]||(d[3]=i=>o.value=i)},{default:v(()=>[l(le,null,{default:v(()=>[l(mt,{class:"q-mt-md"},{default:v(()=>[l(Jt,null,{default:v(()=>[l(at,{name:"edit"})]),_:1}),l(vt,null,{default:v(()=>[Qa,_("div",za,$(n.mint),1)]),_:1}),st(l(N,{flat:"",round:"",dense:"",icon:"close"},null,512),[[ft]])]),_:1}),l(bt,{class:"q-gutter-y-md col justify-around"},{default:v(()=>[Fa,_("div",Pa,[Ua,_("div",Na,$(n.amount),1)]),l(N,{square:"",disabled:n.amount==0,class:"full-width",color:"red",onClick:d[1]||(d[1]=i=>r())},{default:v(()=>[O(" Burn and close Account (+0.00193428 SOL) ")]),_:1},8,["disabled"]),l(N,{square:"",disabled:n.amount>0,class:"full-width",color:"orange",onClick:d[2]||(d[2]=i=>e())},{default:v(()=>[O(" Close Account (+0.00193428 SOL)")]),_:1},8,["disabled"])]),_:1}),_("div",Ea," fee: "+$(x(ke)/x(ea))+"\u25CE ",1)]),_:1})]),_:1},8,["modelValue"])],64))}}),Ka={key:0,class:"row"},Wa=_("div",{class:"col-2 q-table__title"},"Accounts",-1),Oa={class:"text-subtitle1"},ja={key:0,class:"row items-center justify-end q-gutter-x-sm"},Ga={key:2,class:"row items-center justify-end q-gutter-x-sm"},Ha={key:0,class:"row items-center justify-end q-gutter-x-sm"},Ya={key:2,class:"row items-center justify-end q-gutter-x-sm"},Za=j({__name:"WalletAccountsTable",props:["tab"],setup(n){const o=n;k();const u=k("all"),r=k(["name","type","action","amount","market","value"]),e=[{name:"image",label:"",align:"left",required:!0},{name:"name",label:"Name",align:"left",sortable:!0,required:!0,field:f=>f.staratlas.name},{name:"type",label:"Type",align:"left",sortable:!0,field:f=>f.staratlas.attributes.itemType},{name:"account",label:"Account",align:"left",sortable:!0,field:f=>f.pubkey},{name:"mint",label:"Mint",align:"left",sortable:!0,field:f=>f.info.mint},{name:"owner",align:"left",label:"Owner",sortable:!0,field:f=>f.info.owner},{name:"decimals",label:"Decimals",sortable:!0,field:f=>{var b;return(b=f.info.tokenAmount)==null?void 0:b.decimals}},{name:"amount",label:"Amount",align:"right",sortable:!0,field:f=>{var b;return(b=f.info.tokenAmount)==null?void 0:b.uiAmount}},{name:"market",label:"Market",align:"right",field:f=>{var b;return(b=f.info.tokenAmount)==null?void 0:b.uiAmount}},{name:"value",label:"Value",align:"right",field:f=>{var b;return(b=f.info.tokenAmount)==null?void 0:b.uiAmount}},{label:"",align:"right",name:"action"}];Se(async()=>{await D().update_accounts()}),te(()=>A().publicKey.value,async()=>{await D().update_accounts()});const s=k({rowsPerPage:0}),d=k([]),i=k([]);Se(async()=>{var f,b;d.value=await Y().api_client.trades.getPrices(((f=V.find(a=>a.type==I.USDC))==null?void 0:f.mint)??"none"),i.value=await Y().api_client.trades.getPrices(((b=V.find(a=>a.type==I.ATLAS))==null?void 0:b.mint)??"none"),await D().update_accounts()});function y(){return o.tab=="all"?D().get_account_map_staratlas:D().get_account_map_staratlas.filter(f=>{var b;return((b=f.staratlas.attributes.itemType)==null?void 0:b.toLowerCase())==o.tab})}return(f,b)=>(w(),z(le,{flat:""},{default:v(()=>[x(D)().is_loading?(w(),U("div",Ka,[l(Z),l(ot,{class:"row",color:"primary",size:"3rem"}),l(Z)])):F("",!0),l(it,{color:"primary",dark:"",flat:"",square:"","virtual-scroll":"",pagination:s.value,"onUpdate:pagination":b[2]||(b[2]=a=>s.value=a),"rows-per-page-options":[0],"visible-columns":r.value,title:"Accounts",rows:y(),columns:e,"row-key":"name"},{top:v(a=>[Wa,l(Z),l(we,{modelValue:u.value,"onUpdate:modelValue":b[0]||(b[0]=m=>u.value=m),align:"justify"},{default:v(()=>[l(H,{name:"all",label:"ALL",class:"bg-secondary"}),l(H,{name:"usdc",label:"USDC"}),l(H,{name:"atlas",label:"ATLAS"})]),_:1},8,["modelValue"]),l(Z),l(ua,{modelValue:r.value,"onUpdate:modelValue":b[1]||(b[1]=m=>r.value=m),multiple:"",borderless:"",dense:"","options-dense":"","display-value":f.$q.lang.table.columns,"emit-value":"","map-options":"",options:e,"option-value":"name",style:{"min-width":"150px"}},null,8,["modelValue","display-value"]),l(N,{flat:"",round:"",dense:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:a.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])]),body:v(a=>[l(ut,{props:a},{default:v(()=>[l(L,{key:"image",props:a},{default:v(()=>[l(Le,{size:"xl",url:"sa_files/webp/"+a.row.info.mint+".webp"},null,8,["url"])]),_:2},1032,["props"]),l(L,{key:"name",props:a},{default:v(()=>[_("div",Oa,$(a.row.staratlas.name??"-"),1)]),_:2},1032,["props"]),l(L,{key:"type",props:a},{default:v(()=>[O($(a.row.staratlas.attributes.itemType??"-"),1)]),_:2},1032,["props"]),l(L,{key:"account",props:a},{default:v(()=>[l(ge,{address:a.row.pubkey},null,8,["address"])]),_:2},1032,["props"]),l(L,{key:"owner",props:a},{default:v(()=>[l(ge,{address:a.row.info.owner},null,8,["address"])]),_:2},1032,["props"]),l(L,{key:"mint",props:a,class:""},{default:v(()=>[l(ge,{address:a.row.info.mint},null,8,["address"])]),_:2},1032,["props"]),l(L,{key:"decimals",props:a},{default:v(()=>{var m;return[O($((m=a.row.info.tokenAmount)==null?void 0:m.decimals),1)]}),_:2},1032,["props"]),l(L,{key:"amount",class:"text-subtitle1 text-bold",props:a},{default:v(()=>{var m,C;return[_("div",{class:rt(((m=a.row.info.tokenAmount)==null?void 0:m.uiAmount)==0?"text-yellow":"")},$((C=a.row.info.tokenAmount)==null?void 0:C.uiAmount.toFixed(0)),3)]}),_:2},1032,["props"]),l(L,{key:"market",class:"text-subtitle1 text-bold",props:a},{default:v(()=>{var m,C;return[u.value!="atlas"?(w(),U("div",ja,[_("div",null,$((((m=d.value.find(h=>h.asset==a.row.info.mint&&h.currency==x(V).find(E=>E.type==x(I).USDC).mint))==null?void 0:m.price)??0).toFixed(2)),1),l(X,{currency:x(V).find(h=>h.type==x(I).USDC)},null,8,["currency"])])):F("",!0),u.value=="all"?(w(),z(Ge,{key:1})):F("",!0),u.value!="usdc"?(w(),U("div",Ga,[_("div",null,$((((C=i.value.find(h=>h.asset==a.row.info.mint&&h.currency==x(V).find(E=>E.type==x(I).ATLAS).mint))==null?void 0:C.price)??0).toFixed(2)),1),l(X,{currency:x(V).find(h=>h.type==x(I).ATLAS)},null,8,["currency"])])):F("",!0)]}),_:2},1032,["props"]),l(L,{key:"value",class:"text-subtitle1 text-bold",props:a},{default:v(()=>{var m,C,h,E;return[u.value!="atlas"?(w(),U("div",Ha,[_("div",null,$(((((m=i.value.find(T=>T.asset==a.row.info.mint&&T.currency==x(V).find(P=>P.type==x(I).USDC).mint))==null?void 0:m.price)??0)*((C=a.row.info.tokenAmount)==null?void 0:C.uiAmount)).toFixed(2)),1),l(X,{currency:x(V).find(T=>T.type==x(I).USDC)},null,8,["currency"])])):F("",!0),u.value=="all"?(w(),z(Ge,{key:1})):F("",!0),u.value!="usdc"?(w(),U("div",Ya,[_("div",null,$(((((h=i.value.find(T=>T.asset==a.row.info.mint&&T.currency==x(V).find(P=>P.type==x(I).ATLAS).mint))==null?void 0:h.price)??0)*((E=a.row.info.tokenAmount)==null?void 0:E.uiAmount)).toFixed(2)),1),l(X,{currency:x(V).find(T=>T.type==x(I).ATLAS)},null,8,["currency"])])):F("",!0)]}),_:2},1032,["props"]),l(L,{key:"action",props:a,class:"q-gutter-x-sm"},{default:v(()=>[l(Ra,{amount:a.row.info.tokenAmount.uiAmount,mint:a.row.info.mint,decimals:a.row.info.tokenAmount.decimals},null,8,["amount","mint","decimals"]),l(Da,{disabled:a.row.info.tokenAmount.uiAmount==0,mint:a.row.info.mint,decimals:a.row.info.tokenAmount.decimals,amount:a.row.info.tokenAmount.uiAmount,name:a.row.staratlas.name},null,8,["disabled","mint","decimals","amount","name"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["pagination","visible-columns","rows"])]),_:1}))}}),Xa=j({__name:"WalletAccountInput",setup(n){const o=k("");te(()=>A().publicKey.value,()=>{D().input_wallet=A().publicKey.value.toString()});async function u(){o.value.length?await D().update_accounts(new Q(o.value)):await D().update_accounts()}return(r,e)=>(w(),z(le,{square:"",flat:"",class:"row"},{default:v(()=>[l(Ae,{label:"Wallet-Address",modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value=s),clearable:"","clear-icon":"close",square:"",filled:"",class:"col"},null,8,["modelValue"]),l(N,{onClick:e[1]||(e[1]=s=>{u().then(()=>{x(D)().input_wallet=o.value})}),color:"secondary",square:"",size:"md",icon:"fa-solid fa-paper-plane"},{default:v(()=>[l(na,null,{default:v(()=>[O("Query wallet")]),_:1})]),_:1})]),_:1}))}});const Ja={class:"row items-center q-gutter-x-xs justify-end"},el={class:"row items-center q-gutter-x-xs justify-end"},tl={class:"row items-center q-gutter-x-xs justify-end"},al=j({__name:"WalletAccountHistoryTable",props:["data"],setup(n){const o=k({rowsPerPage:0}),u=k([{name:"timestamp",label:"Timestamp",align:"left",field:"timestamp",sortable:!0},{name:"info",align:"left",field:"info",sortable:!0},{name:"side",label:"Side",align:"left",field:"side",sortable:!0},{name:"fee",align:"right",label:"Fee",field:r=>{var e;return((e=r.fee)==null?void 0:e.toFixed(2))??0},sortable:!0},{name:"size",align:"right",label:"Size",field:"volume",sortable:!0},{name:"volume",align:"right",label:"Volume",field:"volume",sortable:!0},{name:"price",align:"right",label:"Price",field:r=>r.price.toFixed(2),sortable:!0}]);return(r,e)=>(w(),z(it,{rows:n.data,dense:"",square:"",flat:"","virtual-scroll":"",columns:u.value,pagination:o.value,"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"row-key":"name","hide-bottom":""},{body:v(s=>[l(ut,{props:s},{default:v(()=>[l(L,{key:"timestamp",props:s},{default:v(()=>[O($(s.row.timestamp),1)]),_:2},1032,["props"]),l(L,{key:"info",props:s},{default:v(()=>[l(N,{flat:"",size:"sm",icon:"link",href:"https://solscan.io/tx/"+s.row.signature,target:"_blank"},null,8,["href"])]),_:2},1032,["props"]),l(L,{key:"side",props:s},{default:v(()=>[l(ia,{class:rt(s.row.side=="BUY"?"buy":"sell")},{default:v(()=>[O($(s.row.side),1)]),_:2},1032,["class"])]),_:2},1032,["props"]),l(L,{key:"fee",props:s},{default:v(()=>[O($((s.row.fee/s.row.volume*100).toFixed(1)??0)+"% ",1)]),_:2},1032,["props"]),l(L,{key:"size",props:s},{default:v(()=>[_("div",Ja,[_("div",null,$(s.row.size??0),1),l(Le,{style:{width:"10px",height:"10px"},url:"sa_files/webp/"+s.row.asset+".webp"},null,8,["url"])])]),_:2},1032,["props"]),l(L,{key:"volume",props:s},{default:v(()=>[_("div",el,[_("div",null,$(s.row.volume??0),1),l(X,{style:{width:"14px",height:"14px"},currency:x(V).find(d=>d.mint===s.row.currency)},null,8,["currency"])])]),_:2},1032,["props"]),l(L,{key:"price",props:s,class:""},{default:v(()=>[_("div",tl,[_("div",null,$(s.row.price??0),1),l(X,{style:{width:"14px",height:"14px"},currency:x(V).find(d=>d.mint===s.row.currency)},null,8,["currency"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"]))}});const ll={key:0,class:"row"},nl={key:1},sl={key:2,class:"text-center text-body2 q-pa-sm"},tt=1e6,rl=j({__name:"WalletAccountHistory",setup(n){const o=k(),u=k([]),r=k(!1);te(()=>A().publicKey.value,async()=>{await e(A().publicKey.value.toString())}),te(()=>D().input_wallet,async()=>{await e(D().input_wallet)}),Se(async()=>{D().input_wallet?await e(D().input_wallet):await e(A().publicKey.value.toString())});async function e(d){var i,y,f,b;r.value=!0,o.value=await Y().api_client.trades.search("maker_and_taker",d,tt),u.value=[],u.value.push({name:"USDC [buy]",data:(i=o.value)==null?void 0:i.filter(a=>{var m;return a.currency==((m=V.find(C=>C.type==I.USDC))==null?void 0:m.mint)}).filter(a=>{var m;return(m=a.side)==null?void 0:m.includes("BUY")}).map(a=>[a.timestamp,a.price,a.volume]),axisName:"USDC"}),u.value.push({name:"USDC [sell]",data:(y=o.value)==null?void 0:y.filter(a=>{var m;return a.currency==((m=V.find(C=>C.type==I.USDC))==null?void 0:m.mint)}).filter(a=>{var m;return(m=a.side)==null?void 0:m.includes("SELL")}).map(a=>[a.timestamp,a.price,a.volume]),axisName:"USDC"}),u.value.push({name:"ATLAS [buy]",data:(f=o.value)==null?void 0:f.filter(a=>{var m;return a.currency==((m=V.find(C=>C.type==I.ATLAS))==null?void 0:m.mint)}).filter(a=>{var m;return(m=a.side)==null?void 0:m.includes("BUY")}).map(a=>[a.timestamp,a.price,a.volume])}),u.value.push({name:"ATLAS [sell]",data:(b=o.value)==null?void 0:b.filter(a=>{var m;return a.currency==((m=V.find(C=>C.type==I.ATLAS))==null?void 0:m.mint)}).filter(a=>{var m;return(m=a.side)==null?void 0:m.includes("SELL")}).map(a=>[a.timestamp,a.price,a.volume])}),r.value=!1}const s={colors:["#3976ea","#3976ea","#b2b2b2","#b2b2b2"],chart:{height:350,type:"bubble",toolbar:{show:!1},foreColor:"#ffffff"},dataLabels:{enabled:!1},fill:{opacity:.8},xaxis:{type:"datetime"},yaxis:[{title:{text:"USDC [buy]"},seriesName:"USDC [buy]"},{title:{text:"USDC [sell]"},seriesName:"USDC [sell]"},{title:{text:"ATLAS [buy]"},seriesName:"ATLAS [buy]",opposite:!0},{title:{text:"ATLAS [sell]"},seriesName:"ATLAS [sell]",opposite:!0}]};return(d,i)=>{const y=ta("apexchart");return w(),z(le,{flat:""},{default:v(()=>[r.value?(w(),U("div",ll,[l(Z),l(ot,{class:"row q-pa-sm",color:"primary",size:"3rem"}),l(Z)])):F("",!0),o.value?(w(),U("div",nl,[r.value?F("",!0):(w(),z(y,{key:0,class:"chart",type:"scatter",height:"350",options:s,series:u.value},null,8,["series"])),r.value?F("",!0):(w(),z(al,{key:1,data:o.value},null,8,["data"])),_("div",{class:"text-center text-orange-4 text-weight-thin text-right q-mr-md"}," Limited to: "+$(tt))])):(w(),U("div",sl,"No data"))]),_:1})}}});var ol=fa(rl,[["__scopeId","data-v-4836eefe"]]);const ul={style:{width:"80vw"}},xl=j({__name:"WalletPage",setup(n){const o=k("account"),u=k("all");return(r,e)=>(w(),z(Wt,{class:"row q-pa-sm justify-center"},{default:v(()=>[_("div",ul,[l(Xa,{class:"q-mb-sm"}),l(we,{align:"justify",modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value=s)},{default:v(()=>[l(H,{name:"account",label:"Accounts"}),l(H,{name:"activity",label:"Market Activity"})]),_:1},8,["modelValue"]),o.value=="account"?(w(),z(we,{key:0,align:"justify",modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s)},{default:v(()=>[l(H,{name:"all",label:"All",class:"bg-secondary"}),(w(!0),U(qe,null,aa(x(la)().get_itemTypes,s=>(w(),z(H,{name:s,label:s,key:s},null,8,["name","label"]))),128))]),_:1},8,["modelValue"])):F("",!0),o.value=="account"?(w(),z(Za,{key:1,tab:u.value,dark:""},null,8,["tab"])):F("",!0),o.value=="activity"?(w(),z(ol,{key:2})):F("",!0)])]),_:1}))}});export{xl as default};
