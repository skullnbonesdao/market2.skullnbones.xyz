import{Q as Y,b as we,a as Z}from"./QSpace.6f4ac109.js";import{Q as Ot}from"./QPage.e483d524.js";import{bZ as te,cs as Gt,bE as z,bY as ie,b_ as ce,b$ as de,c0 as X,dg as Oe,dh as Le,cj as he,a9 as H,aI as x,Z as N,bc as v,a7 as a,cp as nt,a0 as _,H as $,A as k,cb as j,n as g,Y as c,ay as Ht,cW as Yt,db as Zt,dd as _e,ak as F,c5 as Jt,ah as st,c1 as ot,b7 as ee,cA as Xt,c6 as ea,di as Ge,$ as K,be as rt,M as Be,cg as xe,ce as q,ca as re,cf as Ae,cc as ta,a6 as W,dj as ge,ck as aa,cd as He,aC as Ce,cq as P,cn as Se,ch as L,ci as I,_ as R,D as ut,aQ as la,aO as na,d2 as sa}from"./index.ef25753b.js";import{c as it,b as $e,a as M,C as G,Q as ct}from"./QTr.1a5b5f60.js";import{e as dt,u as Me,a as Ve,T as Ie,Q as mt,b as vt,C as ft,c as oa}from"./QToggle.c6813b66.js";import{I as ra,e as J,J as ua,K as ia,i as Te,j as bt,h as ca,k as pt,Q as da}from"./QTooltip.a6f4daa3.js";import{Q as Ye}from"./QSeparator.8f00a539.js";import{Q as ae}from"./QCard.81619da3.js";import{f as ma,A as De}from"./format_address.f9527aaa.js";import{T as va,h as qe}from"./handle_confirmation.f69e1d6b.js";import{a as fa,u as ba}from"./use-dark.1b36f269.js";import{Q as yt}from"./QCardSection.7f760a23.js";import{_ as pa}from"./plugin-vue_export-helper.21dcd24c.js";import"./QResizeObserver.5c79286a.js";const ya=l=>{const u=te(l),{encode:i,decode:s}=dt(u),e=u;return e.decode=(n,f)=>!!s(n,f),e.encode=(n,f,d)=>{const p=Number(n);return i(p,f,d)},e},Ze=l=>{const u=Gt(32,l),{encode:i,decode:s}=dt(u),e=u;return e.decode=(n,f)=>{const d=s(n,f);return new z(d)},e.encode=(n,f,d)=>{const p=n.toBuffer();return i(p,f,d)},e};class _a extends Error{constructor(u){super(u)}}class ga extends _a{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}const Je=ie([te("instruction"),Me("amount")]);function ka(l,u,i,s,e=[],n=X){const f=Ve([{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0}],i,e),d=ce.Buffer.alloc(Je.span);return Je.encode({instruction:Ie.Burn,amount:BigInt(s)},d),new de({keys:f,programId:n,data:d})}const Xe=ie([te("instruction")]);function et(l,u,i,s=[],e=X){const n=Ve([{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0}],i,s),f=ce.Buffer.alloc(Xe.span);return Xe.encode({instruction:Ie.CloseAccount},f),new de({keys:n,programId:e,data:f})}const wa=ie([Oe("mintAuthorityOption"),Ze("mintAuthority"),Me("supply"),te("decimals"),ya("isInitialized"),Oe("freezeAuthorityOption"),Ze("freezeAuthority")]);wa.span;async function ue(l,u,i=!1,s=X,e=Le){if(!i&&!z.isOnCurve(u.toBuffer()))throw new ga;const[n]=await z.findProgramAddress([u.toBuffer(),s.toBuffer(),l.toBuffer()],e);return n}function ha(l,u,i,s,e=X,n=Le){return xa(l,u,i,s,ce.Buffer.alloc(0),e,n)}function xa(l,u,i,s,e,n=X,f=Le){const d=[{pubkey:l,isSigner:!0,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:he.programId,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1}];return new de({keys:d,programId:f,data:e})}const tt=ie([te("instruction"),Me("amount")]);function Aa(l,u,i,s,e=[],n=X){const f=Ve([{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0}],i,e),d=ce.Buffer.alloc(tt.span);return tt.encode({instruction:Ie.Transfer,amount:BigInt(s)},d),new de({keys:f,programId:n,data:d})}const ke=H({__name:"SolscanLink",props:["address"],setup(l){return(u,i)=>(x(),N(j,{class:"full-width",square:"",color:"primary",size:"sm",icon:"link",target:"_blank",href:"https://solscan.io/account/"+l.address},{default:v(()=>[a(nt),_("div",null,$(k(ma)(l.address)),1)]),_:1},8,["href"]))}}),at="q-slider__marker-labels",Ca=l=>({value:l}),Sa=({marker:l})=>F("div",{key:l.value,style:l.style,class:l.classes},l.label),_t=[34,37,40,33,39,38],$a={...ba,...ra,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:l=>l>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Ta=["pan","update:modelValue","change"];function qa({updateValue:l,updatePosition:u,getDragging:i,formAttrs:s}){const{props:e,emit:n,slots:f,proxy:{$q:d}}=st(),p=fa(e,d),A=ua(s),Q=g(!1),b=g(!1),o=g(!1),m=g(!1),r=c(()=>e.vertical===!0?"--v":"--h"),V=c(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),C=c(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(d.lang.rtl===!0)),U=c(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),T=c(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),w=c(()=>e.disable!==!0&&e.readonly!==!0&&U.value<T.value),B=c(()=>(String(e.step).trim().split(".")[1]||"").length),E=c(()=>e.step===0?1:e.step),gt=c(()=>w.value===!0?e.tabindex||0:-1),le=c(()=>e.max-e.min),Fe=c(()=>T.value-U.value),ne=c(()=>ve(U.value)),me=c(()=>ve(T.value)),se=c(()=>e.vertical===!0?C.value===!0?"bottom":"top":C.value===!0?"right":"left"),Qe=c(()=>e.vertical===!0?"height":"width"),kt=c(()=>e.vertical===!0?"width":"height"),Ue=c(()=>e.vertical===!0?"vertical":"horizontal"),wt=c(()=>{const t={role:"slider","aria-valuemin":U.value,"aria-valuemax":T.value,"aria-orientation":Ue.value,"data-step":e.step};return e.disable===!0?t["aria-disabled"]="true":e.readonly===!0&&(t["aria-readonly"]="true"),t}),ht=c(()=>`q-slider q-slider${r.value} q-slider--${Q.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(w.value===!0?" q-slider--editable":""))+(o.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(p.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+r.value:""));function oe(t){const y="q-slider__"+t;return`${y} ${y}${r.value} ${y}${r.value}${V.value}`}function Pe(t){const y="q-slider__"+t;return`${y} ${y}${r.value}`}const xt=c(()=>{const t=e.selectionColor||e.color;return"q-slider__selection absolute"+(t!==void 0?` text-${t}`:"")}),At=c(()=>Pe("markers")+" absolute overflow-hidden"),Ct=c(()=>Pe("track-container")),St=c(()=>oe("pin")),$t=c(()=>oe("label")),Tt=c(()=>oe("text-container")),qt=c(()=>oe("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),Lt=c(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),Bt=c(()=>{const t={[kt.value]:e.trackSize};return e.trackImg!==void 0&&(t.backgroundImage=`url(${e.trackImg}) !important`),t}),Mt=c(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),ze=c(()=>{const t=me.value-ne.value,y={[se.value]:`${100*ne.value}%`,[Qe.value]:t===0?"2px":`${100*t}%`};return e.innerTrackImg!==void 0&&(y.backgroundImage=`url(${e.innerTrackImg}) !important`),y});function Vt(t){const{min:y,max:h,step:S}=e;let D=y+t*(h-y);if(S>0){const O=(D-y)%S;D+=(Math.abs(O)>=S/2?(O<0?-1:1)*S:0)-O}return B.value>0&&(D=parseFloat(D.toFixed(B.value))),J(D,U.value,T.value)}function ve(t){return le.value===0?0:(t-e.min)/le.value}function It(t,y){const h=Yt(t),S=e.vertical===!0?J((h.top-y.top)/y.height,0,1):J((h.left-y.left)/y.width,0,1);return J(C.value===!0?1-S:S,ne.value,me.value)}const Ne=c(()=>Zt(e.markers)===!0?e.markers:E.value),Re=c(()=>{const t=[],y=Ne.value,h=e.max;let S=e.min;do t.push(S),S+=y;while(S<h);return t.push(h),t}),Ee=c(()=>{const t=` ${at}${r.value}-`;return at+`${t}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${t}${C.value===!0?"rtl":"ltr"}`}),fe=c(()=>e.markerLabels===!1?null:Ft(e.markerLabels).map((t,y)=>({index:y,value:t.value,label:t.label||t.value,classes:Ee.value+(t.classes!==void 0?" "+t.classes:""),style:{...We(t.value),...t.style||{}}}))),Ke=c(()=>({markerList:fe.value,markerMap:Qt.value,classes:Ee.value,getStyle:We})),Dt=c(()=>{const t=Fe.value===0?"2px":100*Ne.value/Fe.value;return{...ze.value,backgroundSize:e.vertical===!0?`2px ${t}%`:`${t}% 2px`}});function Ft(t){if(t===!1)return null;if(t===!0)return Re.value.map(Ca);if(typeof t=="function")return Re.value.map(h=>{const S=t(h);return _e(S)===!0?{...S,value:h}:{value:h,label:S}});const y=({value:h})=>h>=e.min&&h<=e.max;return Array.isArray(t)===!0?t.map(h=>_e(h)===!0?h:{value:h}).filter(y):Object.keys(t).map(h=>{const S=t[h],D=Number(h);return _e(S)===!0?{...S,value:D}:{value:D,label:S}}).filter(y)}function We(t){return{[se.value]:`${100*(t-e.min)/le.value}%`}}const Qt=c(()=>{if(e.markerLabels===!1)return null;const t={};return fe.value.forEach(y=>{t[y.value]=y}),t});function Ut(){if(f["marker-label-group"]!==void 0)return f["marker-label-group"](Ke.value);const t=f["marker-label"]||Sa;return fe.value.map(y=>t({marker:y,...Ke.value}))}const Pt=c(()=>[[va,zt,void 0,{[Ue.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function zt(t){t.isFinal===!0?(m.value!==void 0&&(u(t.evt),t.touch===!0&&l(!0),m.value=void 0,n("pan","end")),Q.value=!1,o.value=!1):t.isFirst===!0?(m.value=i(t.evt),u(t.evt),l(),Q.value=!0,n("pan","start")):(u(t.evt),l())}function je(){o.value=!1}function Nt(t){u(t,i(t)),l(),b.value=!0,Q.value=!0,document.addEventListener("mouseup",be,!0)}function be(){b.value=!1,Q.value=!1,l(!0),je(),document.removeEventListener("mouseup",be,!0)}function Rt(t){u(t,i(t)),l(!0)}function Et(t){_t.includes(t.keyCode)&&l(!0)}function Kt(t){if(e.vertical===!0)return null;const y=d.lang.rtl!==e.reverse?1-t:t;return{transform:`translateX(calc(${2*y-1} * ${e.thumbSize} / 2 + ${50-100*y}%))`}}function Wt(t){const y=c(()=>b.value===!1&&(o.value===t.focusValue||o.value==="both")?" q-slider--focus":""),h=c(()=>`q-slider__thumb q-slider__thumb${r.value} q-slider__thumb${r.value}-${C.value===!0?"rtl":"ltr"} absolute non-selectable`+y.value+(t.thumbColor.value!==void 0?` text-${t.thumbColor.value}`:"")),S=c(()=>({width:e.thumbSize,height:e.thumbSize,[se.value]:`${100*t.ratio.value}%`,zIndex:o.value===t.focusValue?2:void 0})),D=c(()=>t.labelColor.value!==void 0?` text-${t.labelColor.value}`:""),O=c(()=>Kt(t.ratio.value)),pe=c(()=>"q-slider__text"+(t.labelTextColor.value!==void 0?` text-${t.labelTextColor.value}`:""));return()=>{const ye=[F("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[F("path",{d:e.thumbPath})]),F("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(ye.push(F("div",{class:St.value+" absolute fit no-pointer-events"+D.value},[F("div",{class:$t.value,style:{minWidth:e.thumbSize}},[F("div",{class:Tt.value,style:O.value},[F("span",{class:pe.value},t.label.value)])])])),e.name!==void 0&&e.disable!==!0&&A(ye,"push")),F("div",{class:h.value,style:S.value,...t.getNodeData()},ye)}}function jt(t,y,h,S){const D=[];e.innerTrackColor!=="transparent"&&D.push(F("div",{key:"inner",class:Mt.value,style:ze.value})),e.selectionColor!=="transparent"&&D.push(F("div",{key:"selection",class:xt.value,style:t.value})),e.markers!==!1&&D.push(F("div",{key:"marker",class:At.value,style:Dt.value})),S(D);const O=[Jt("div",{key:"trackC",class:Ct.value,tabindex:y.value,...h.value},[F("div",{class:Lt.value,style:Bt.value},D)],"slide",w.value,()=>Pt.value)];if(e.markerLabels!==!1){const pe=e.switchMarkerLabelsSide===!0?"unshift":"push";O[pe](F("div",{key:"markerL",class:qt.value},Ut()))}return O}return Ht(()=>{document.removeEventListener("mouseup",be,!0)}),{state:{active:Q,focus:o,preventFocus:b,dragging:m,editable:w,classes:ht,tabindex:gt,attributes:wt,step:E,decimals:B,trackLen:le,innerMin:U,innerMinRatio:ne,innerMax:T,innerMaxRatio:me,positionProp:se,sizeProp:Qe,isReversed:C},methods:{onActivate:Nt,onMobileClick:Rt,onBlur:je,onKeyup:Et,getContent:jt,getThumbRenderFn:Wt,convertRatioToModel:Vt,convertModelToRatio:ve,getDraggingRatio:It}}}const La=()=>({});var Ba=ot({name:"QSlider",props:{...$a,modelValue:{required:!0,default:null,validator:l=>typeof l=="number"||l===null},labelValue:[String,Number]},emits:Ta,setup(l,{emit:u}){const{proxy:{$q:i}}=st(),{state:s,methods:e}=qa({updateValue:r,updatePosition:C,getDragging:V,formAttrs:ia(l)}),n=g(null),f=g(0),d=g(0);function p(){d.value=l.modelValue===null?s.innerMin.value:J(l.modelValue,s.innerMin.value,s.innerMax.value)}ee(()=>`${l.modelValue}|${s.innerMin.value}|${s.innerMax.value}`,p),p();const A=c(()=>e.convertModelToRatio(d.value)),Q=c(()=>s.active.value===!0?f.value:A.value),b=c(()=>{const w={[s.positionProp.value]:`${100*s.innerMinRatio.value}%`,[s.sizeProp.value]:`${100*(Q.value-s.innerMinRatio.value)}%`};return l.selectionImg!==void 0&&(w.backgroundImage=`url(${l.selectionImg}) !important`),w}),o=e.getThumbRenderFn({focusValue:!0,getNodeData:La,ratio:Q,label:c(()=>l.labelValue!==void 0?l.labelValue:d.value),thumbColor:c(()=>l.thumbColor||l.color),labelColor:c(()=>l.labelColor),labelTextColor:c(()=>l.labelTextColor)}),m=c(()=>s.editable.value!==!0?{}:i.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:U,onBlur:e.onBlur,onKeydown:T,onKeyup:e.onKeyup});function r(w){d.value!==l.modelValue&&u("update:modelValue",d.value),w===!0&&u("change",d.value)}function V(){return n.value.getBoundingClientRect()}function C(w,B=s.dragging.value){const E=e.getDraggingRatio(w,B);d.value=e.convertRatioToModel(E),f.value=l.snap!==!0||l.step===0?E:e.convertModelToRatio(d.value)}function U(){s.focus.value=!0}function T(w){if(!_t.includes(w.keyCode))return;Xt(w);const B=([34,33].includes(w.keyCode)?10:1)*s.step.value,E=([34,37,40].includes(w.keyCode)?-1:1)*(s.isReversed.value===!0?-1:1)*(l.vertical===!0?-1:1)*B;d.value=J(parseFloat((d.value+E).toFixed(s.decimals.value)),s.innerMin.value,s.innerMax.value),r()}return()=>{const w=e.getContent(b,s.tabindex,m,B=>{B.push(o())});return F("div",{ref:n,class:s.classes.value+(l.modelValue===null?" q-slider--no-value":""),...s.attributes.value,"aria-valuenow":l.modelValue},w)}}}),Ma=ot({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(l,{slots:u}){const i=c(()=>{const s=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(e=>l[e]===!0).map(e=>`q-btn-group--${e}`).join(" ");return`q-btn-group row no-wrap${s.length!==0?" "+s:""}`+(l.spread===!0?" q-btn-group--spread":" inline")});return()=>F("div",{class:i.value},ea(u.default))}});const Va=_("span",{class:"text-weight-bold"},"Send Token",-1),Ia={class:"text-body1"},Da={class:"text-overline",style:{width:"500px"}},Fa={class:"col"},Qa=H({__name:"SendTokenButton",props:["mint","decimals","amount","disabled","name"],setup(l){const u=g(!1),i=l,s=g(""),e=g(0),n=g(0);Ge(()=>n.value,()=>{e.value=parseFloat((n.value/10*i.amount).toFixed(i.decimals))}),Ge(()=>e.value,()=>{n.value=e.value/i.amount*100/10});async function f(){const d=new xe,p=await ue(new z(i.mint),new z(s.value));console.log(p);const A=await ue(new z(i.mint),q().publicKey.value);await re().connection.getAccountInfo(p)===null&&d.add(ha(q().publicKey.value,p,new z(s.value),new z(i.mint))),d.add(Aa(A,p,q().publicKey.value,e.value*Math.pow(10,i.decimals)));try{const b=await q().sendTransaction(d,re().connection);await qe(b)}catch(b){Ae.create({color:"red",message:`${b}`,timeout:5e3})}}return(d,p)=>(x(),K(Be,null,[a(j,{disable:l.disabled,square:"",color:"secondary",size:"sm",icon:"send",onClick:p[0]||(p[0]=A=>u.value=!0)},null,8,["disable"]),a(bt,{modelValue:u.value,"onUpdate:modelValue":p[5]||(p[5]=A=>u.value=A)},{default:v(()=>[a(ae,null,{default:v(()=>[a(mt,{class:"q-mt-md"},{default:v(()=>[a(De,{size:"xl",url:"sa_files/webp/"+l.mint+".webp"},null,8,["url"]),a(vt,null,{default:v(()=>[Va,_("div",Ia,$(l.name),1),_("div",Da,$(l.mint),1)]),_:1}),rt(a(j,{flat:"",round:"",dense:"",icon:"close"},null,512),[[ft]])]),_:1}),a(yt,{class:"q-gutter-y-sm"},{default:v(()=>[_("div",null,[a(Te,{filled:"",square:"",label:"Receiver",modelValue:s.value,"onUpdate:modelValue":p[1]||(p[1]=A=>s.value=A)},null,8,["modelValue"])]),a(Ma,{push:"",class:"row full-width"},{default:v(()=>[_("div",Fa,[a(Te,{filled:"",square:"",class:"col",label:"Amount",modelValue:e.value,"onUpdate:modelValue":p[2]||(p[2]=A=>e.value=A),hint:"Max: "+l.amount},null,8,["modelValue","hint"]),a(Ba,{class:"q-px-lg",modelValue:n.value,"onUpdate:modelValue":p[3]||(p[3]=A=>n.value=A),min:0,max:10,color:"secondary","track-size":"10px",markers:"","marker-labels":A=>`${10*A}%`},null,8,["modelValue","marker-labels"])]),a(j,{square:"",color:"primary",icon:"send",onClick:p[4]||(p[4]=A=>f())})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Ua=_("span",{class:"text-weight-bold"},"Close/Burn Account",-1),Pa={class:"text-overline"},za=_("div",{class:"row q-gutter-x-sm"},[_("div",{class:""},"Closing Token-Accounts will recover the fee!")],-1),Na={class:"row q-gutter-x-sm"},Ra=_("div",{class:""},"Amount left:",-1),Ea={class:""},Ka={class:"q-ma-md text-right text-weight-light"},Wa=H({__name:"EditTokenButton",props:["mint","decimals","amount"],setup(l){const u=g(!1),i=l;g(""),g(0);async function s(){const n=new xe,f=await ue(new z(i.mint),q().publicKey.value);n.add(ka(f,new z(i.mint),q().publicKey.value,i.amount*Math.pow(10,i.decimals))),n.add(et(f,q().publicKey.value,q().publicKey.value)),n.add(he.transfer({fromPubkey:q().publicKey.value,toPubkey:new z(He),lamports:ge}));try{const d=await q().sendTransaction(n,re().connection);await qe(d)}catch(d){Ae.create({color:"red",message:`${d}`,timeout:5e3})}}async function e(){const n=new xe,f=await ue(new z(i.mint),q().publicKey.value);n.add(et(f,q().publicKey.value,q().publicKey.value)),n.add(he.transfer({fromPubkey:q().publicKey.value,toPubkey:new z(He),lamports:ge}));try{const d=await q().sendTransaction(n,re().connection);await qe(d)}catch(d){Ae.create({color:"red",message:`${d}`,timeout:5e3})}}return(n,f)=>(x(),K(Be,null,[a(j,{square:"",color:"primary",size:"sm",icon:"edit",onClick:f[0]||(f[0]=d=>u.value=!0)}),a(bt,{modelValue:u.value,"onUpdate:modelValue":f[3]||(f[3]=d=>u.value=d)},{default:v(()=>[a(ae,null,{default:v(()=>[a(mt,{class:"q-mt-md"},{default:v(()=>[a(ta,null,{default:v(()=>[a(nt,{name:"edit"})]),_:1}),a(vt,null,{default:v(()=>[Ua,_("div",Pa,$(l.mint),1)]),_:1}),rt(a(j,{flat:"",round:"",dense:"",icon:"close"},null,512),[[ft]])]),_:1}),a(yt,{class:"q-gutter-y-md col justify-around"},{default:v(()=>[za,_("div",Na,[Ra,_("div",Ea,$(l.amount),1)]),a(j,{square:"",disabled:l.amount==0,class:"full-width",color:"red",onClick:f[1]||(f[1]=d=>s())},{default:v(()=>[W(" Burn and close Account (+0.00193428 SOL) ")]),_:1},8,["disabled"]),a(j,{square:"",disabled:l.amount>0,class:"full-width",color:"orange",onClick:f[2]||(f[2]=d=>e())},{default:v(()=>[W(" Close Account (+0.00193428 SOL)")]),_:1},8,["disabled"])]),_:1}),_("div",Ka," fee: "+$(k(ge)/k(aa))+"\u25CE ",1)]),_:1})]),_:1},8,["modelValue"])],64))}}),ja={key:0,class:"row"},Oa=_("div",{class:"col-2 q-table__title"},"Accounts",-1),Ga={class:"text-subtitle1"},Ha={key:0,class:"row items-center justify-end q-gutter-x-sm"},Ya={key:2,class:"row items-center justify-end q-gutter-x-sm"},Za={key:0,class:"row items-center justify-end q-gutter-x-sm"},Ja={key:2,class:"row items-center justify-end q-gutter-x-sm"},Xa={class:"row items-center text-right"},el=_("div",{class:"col text-h5"},"\u2211",-1),tl={class:"col-1 q-gutter-y-sm text-subtitle1"},al={class:"row justify-end q-gutter-x-md items-center"},ll={class:"row justify-end q-gutter-x-md items-center"},nl=H({__name:"WalletAccountsTable",props:["tab"],setup(l){const u=l;g();const i=g(!1),s=g("all"),e=g(["name","type","action","amount","market","value"]),n=[{name:"image",label:"",align:"left",required:!0},{name:"name",label:"Name",align:"left",sortable:!0,required:!0,field:o=>o.staratlas.name},{name:"type",label:"Type",align:"left",sortable:!0,field:o=>o.staratlas.attributes.itemType},{name:"account",label:"Account",align:"left",sortable:!0,field:o=>o.pubkey},{name:"mint",label:"Mint",align:"left",sortable:!0,field:o=>o.info.mint},{name:"owner",align:"left",label:"Owner",sortable:!0,field:o=>o.info.owner},{name:"decimals",label:"Decimals",sortable:!0,field:o=>{var m;return(m=o.info.tokenAmount)==null?void 0:m.decimals}},{name:"amount",label:"Amount",align:"right",sortable:!0,field:o=>{var m;return(m=o.info.tokenAmount)==null?void 0:m.uiAmount}},{name:"market",label:"Market",align:"right",field:o=>{var m;return(m=o.info.tokenAmount)==null?void 0:m.uiAmount}},{name:"value",label:"Value",align:"right",field:o=>{var m;return(m=o.info.tokenAmount)==null?void 0:m.uiAmount}},{label:"",align:"right",name:"action"}];Ce(async()=>{await P().update_accounts()}),ee(()=>q().publicKey.value,async()=>{await P().update_accounts()});const f=g({rowsPerPage:0}),d=g([]),p=g([]);Ce(async()=>{var o,m;d.value=await Se().api_client.trades.getPrices(((o=L.find(r=>r.type==I.USDC))==null?void 0:o.mint)??"none"),p.value=await Se().api_client.trades.getPrices(((m=L.find(r=>r.type==I.ATLAS))==null?void 0:m.mint)??"none"),await P().update_accounts()});function A(){let o=[];return u.tab=="all"?o=P().get_account_map_staratlas:o=P().get_account_map_staratlas.filter(m=>{var r;return((r=m.staratlas.attributes.itemType)==null?void 0:r.toLowerCase())==u.tab}),i.value?o.filter(m=>m.info.tokenAmount.uiAmount!=0):o}const Q=c(()=>A().map(o=>{var m;return(((m=p.value.find(r=>{var V;return r.asset==o.info.mint&&r.currency==((V=L.find(C=>C.type==I.USDC))==null?void 0:V.mint)}))==null?void 0:m.price)??0)*o.info.tokenAmount.uiAmount}).reduce((o,m)=>o+m,0)),b=c(()=>A().map(o=>{var m;return(((m=p.value.find(r=>{var V;return r.asset==o.info.mint&&r.currency==((V=L.find(C=>C.type==I.ATLAS))==null?void 0:V.mint)}))==null?void 0:m.price)??0)*o.info.tokenAmount.uiAmount}).reduce((o,m)=>o+m,0));return(o,m)=>(x(),N(ae,{flat:""},{default:v(()=>[k(P)().is_loading?(x(),K("div",ja,[a(Y),a(it,{class:"row",color:"primary",size:"3rem"}),a(Y)])):R("",!0),a(ct,{color:"primary",dark:"",flat:"",square:"","virtual-scroll":"",pagination:f.value,"onUpdate:pagination":m[3]||(m[3]=r=>f.value=r),"rows-per-page-options":[0],"visible-columns":e.value,title:"Accounts",rows:A(),columns:n,"row-key":"name"},{top:v(r=>[Oa,a(Y),a(we,{modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=V=>s.value=V),align:"justify"},{default:v(()=>[a(Z,{name:"all",label:"ALL",class:"bg-secondary"}),a(Z,{name:"usdc",label:"USDC"}),a(Z,{name:"atlas",label:"ATLAS"})]),_:1},8,["modelValue"]),a(Y),a(oa,{color:"secondary",modelValue:i.value,"onUpdate:modelValue":m[1]||(m[1]=V=>i.value=V),label:"Hide empty accounts","left-label":""},null,8,["modelValue"]),a(Y),a(ca,{modelValue:e.value,"onUpdate:modelValue":m[2]||(m[2]=V=>e.value=V),multiple:"",borderless:"",dense:"","options-dense":"","display-value":o.$q.lang.table.columns,"emit-value":"","map-options":"",options:n,"option-value":"name",style:{"min-width":"150px"}},null,8,["modelValue","display-value"]),a(j,{flat:"",round:"",dense:"",icon:r.inFullscreen?"fullscreen_exit":"fullscreen",onClick:r.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])]),body:v(r=>{var V;return[a($e,{props:r,class:ut(((V=r.row.info.tokenAmount)==null?void 0:V.uiAmount)==0?"text-yellow":"")},{default:v(()=>[a(M,{key:"image",props:r},{default:v(()=>[a(De,{size:"xl",url:"sa_files/webp/"+r.row.info.mint+".webp"},null,8,["url"])]),_:2},1032,["props"]),a(M,{key:"name",props:r},{default:v(()=>[_("div",Ga,$(r.row.staratlas.name??"-"),1)]),_:2},1032,["props"]),a(M,{key:"type",props:r},{default:v(()=>[W($(r.row.staratlas.attributes.itemType??"-"),1)]),_:2},1032,["props"]),a(M,{key:"account",props:r},{default:v(()=>[a(ke,{address:r.row.pubkey},null,8,["address"])]),_:2},1032,["props"]),a(M,{key:"owner",props:r},{default:v(()=>[a(ke,{address:r.row.info.owner},null,8,["address"])]),_:2},1032,["props"]),a(M,{key:"mint",props:r,class:""},{default:v(()=>[a(ke,{address:r.row.info.mint},null,8,["address"])]),_:2},1032,["props"]),a(M,{key:"decimals",props:r},{default:v(()=>{var C;return[W($((C=r.row.info.tokenAmount)==null?void 0:C.decimals),1)]}),_:2},1032,["props"]),a(M,{key:"amount",class:"text-subtitle1 text-bold",props:r},{default:v(()=>{var C;return[_("div",null,$((C=r.row.info.tokenAmount)==null?void 0:C.uiAmount.toFixed(0)),1)]}),_:2},1032,["props"]),a(M,{key:"market",class:"text-subtitle1 text-bold",props:r},{default:v(()=>{var C,U;return[s.value!="atlas"?(x(),K("div",Ha,[_("div",null,$((((C=d.value.find(T=>T.asset==r.row.info.mint&&T.currency==k(L).find(w=>w.type==k(I).USDC).mint))==null?void 0:C.price)??0).toFixed(2)),1),a(G,{currency:k(L).find(T=>T.type==k(I).USDC)},null,8,["currency"])])):R("",!0),s.value=="all"?(x(),N(Ye,{key:1})):R("",!0),s.value!="usdc"?(x(),K("div",Ya,[_("div",null,$((((U=p.value.find(T=>T.asset==r.row.info.mint&&T.currency==k(L).find(w=>w.type==k(I).ATLAS).mint))==null?void 0:U.price)??0).toFixed(2)),1),a(G,{currency:k(L).find(T=>T.type==k(I).ATLAS)},null,8,["currency"])])):R("",!0)]}),_:2},1032,["props"]),a(M,{key:"value",class:"text-subtitle1 text-bold",props:r},{default:v(()=>{var C,U,T,w;return[s.value!="atlas"?(x(),K("div",Za,[_("div",null,$(((((C=p.value.find(B=>B.asset==r.row.info.mint&&B.currency==k(L).find(E=>E.type==k(I).USDC).mint))==null?void 0:C.price)??0)*((U=r.row.info.tokenAmount)==null?void 0:U.uiAmount)).toFixed(2)),1),a(G,{currency:k(L).find(B=>B.type==k(I).USDC)},null,8,["currency"])])):R("",!0),s.value=="all"?(x(),N(Ye,{key:1})):R("",!0),s.value!="usdc"?(x(),K("div",Ja,[_("div",null,$(((((T=p.value.find(B=>B.asset==r.row.info.mint&&B.currency==k(L).find(E=>E.type==k(I).ATLAS).mint))==null?void 0:T.price)??0)*((w=r.row.info.tokenAmount)==null?void 0:w.uiAmount)).toFixed(2)),1),a(G,{currency:k(L).find(B=>B.type==k(I).ATLAS)},null,8,["currency"])])):R("",!0)]}),_:2},1032,["props"]),a(M,{key:"action",props:r,class:"q-gutter-x-sm"},{default:v(()=>[a(Wa,{amount:r.row.info.tokenAmount.uiAmount,mint:r.row.info.mint,decimals:r.row.info.tokenAmount.decimals},null,8,["amount","mint","decimals"]),a(Qa,{disabled:r.row.info.tokenAmount.uiAmount==0,mint:r.row.info.mint,decimals:r.row.info.tokenAmount.decimals,amount:r.row.info.tokenAmount.uiAmount,name:r.row.staratlas.name},null,8,["disabled","mint","decimals","amount","name"])]),_:2},1032,["props"])]),_:2},1032,["props","class"])]}),"top-row":v(()=>[a($e,{class:"bg-primary"},{default:v(()=>[a(M,{colspan:"100%"},{default:v(()=>[_("div",Xa,[el,_("div",tl,[_("div",al,[W($(Q.value.toFixed(2))+" ",1),a(G,{currency:k(L).find(r=>r.type==k(I).USDC)},null,8,["currency"])]),_("div",ll,[W($(b.value.toFixed(2))+" ",1),a(G,{currency:k(L).find(r=>r.type==k(I).ATLAS)},null,8,["currency"])])])])]),_:1}),a(pt,null,{default:v(()=>[W("Total market value")]),_:1})]),_:1})]),_:1},8,["pagination","visible-columns","rows"])]),_:1}))}}),sl=H({__name:"WalletAccountInput",setup(l){const u=g("");ee(()=>q().publicKey.value,()=>{P().input_wallet=q().publicKey.value.toString()});async function i(){u.value.length?await P().update_accounts(new z(u.value)):await P().update_accounts()}return(s,e)=>(x(),N(ae,{square:"",flat:"",class:"row"},{default:v(()=>[a(Te,{label:"Wallet-Address",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=n=>u.value=n),clearable:"","clear-icon":"close",square:"",filled:"",class:"col"},null,8,["modelValue"]),a(j,{onClick:e[1]||(e[1]=n=>{i().then(()=>{k(P)().input_wallet=u.value})}),color:"secondary",square:"",size:"md",icon:"fa-solid fa-paper-plane"},{default:v(()=>[a(pt,null,{default:v(()=>[W("Query wallet")]),_:1})]),_:1})]),_:1}))}});const ol={class:"row items-center q-gutter-x-xs justify-end"},rl={class:"row items-center q-gutter-x-xs justify-end"},ul={class:"row items-center q-gutter-x-xs justify-end"},il=H({__name:"WalletAccountHistoryTable",props:["data"],setup(l){const u=g({rowsPerPage:0}),i=g([{name:"timestamp",label:"Timestamp",align:"left",field:"timestamp",sortable:!0},{name:"info",align:"left",field:"info",sortable:!0},{name:"side",label:"Side",align:"left",field:"side",sortable:!0},{name:"fee",align:"right",label:"Fee",field:s=>{var e;return((e=s.fee)==null?void 0:e.toFixed(2))??0},sortable:!0},{name:"size",align:"right",label:"Size",field:"volume",sortable:!0},{name:"volume",align:"right",label:"Volume",field:"volume",sortable:!0},{name:"price",align:"right",label:"Price",field:s=>s.price.toFixed(2),sortable:!0}]);return(s,e)=>(x(),N(ct,{rows:l.data,dense:"",square:"",flat:"","virtual-scroll":"",columns:i.value,pagination:u.value,"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"row-key":"name","hide-bottom":""},{body:v(n=>[a($e,{props:n},{default:v(()=>[a(M,{key:"timestamp",props:n},{default:v(()=>[W($(n.row.timestamp),1)]),_:2},1032,["props"]),a(M,{key:"info",props:n},{default:v(()=>[a(j,{flat:"",size:"sm",icon:"link",href:"https://solscan.io/tx/"+n.row.signature,target:"_blank"},null,8,["href"])]),_:2},1032,["props"]),a(M,{key:"side",props:n},{default:v(()=>[a(da,{class:ut(n.row.side=="BUY"?"buy":"sell")},{default:v(()=>[W($(n.row.side),1)]),_:2},1032,["class"])]),_:2},1032,["props"]),a(M,{key:"fee",props:n},{default:v(()=>[W($((n.row.fee/n.row.volume*100).toFixed(1)??0)+"% ",1)]),_:2},1032,["props"]),a(M,{key:"size",props:n},{default:v(()=>[_("div",ol,[_("div",null,$(n.row.size??0),1),a(De,{style:{width:"10px",height:"10px"},url:"sa_files/webp/"+n.row.asset+".webp"},null,8,["url"])])]),_:2},1032,["props"]),a(M,{key:"volume",props:n},{default:v(()=>[_("div",rl,[_("div",null,$(n.row.volume??0),1),a(G,{style:{width:"14px",height:"14px"},currency:k(L).find(f=>f.mint===n.row.currency)},null,8,["currency"])])]),_:2},1032,["props"]),a(M,{key:"price",props:n,class:""},{default:v(()=>[_("div",ul,[_("div",null,$(n.row.price??0),1),a(G,{style:{width:"14px",height:"14px"},currency:k(L).find(f=>f.mint===n.row.currency)},null,8,["currency"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"]))}});const cl={key:0,class:"row"},dl={key:1},ml={key:2,class:"text-center text-body2 q-pa-sm"},lt=1e6,vl=H({__name:"WalletAccountHistory",setup(l){const u=g(),i=g([]),s=g(!1);ee(()=>q().publicKey.value,async()=>{await e(q().publicKey.value.toString())}),ee(()=>P().input_wallet,async()=>{await e(P().input_wallet)}),Ce(async()=>{P().input_wallet?await e(P().input_wallet):await e(q().publicKey.value.toString())});async function e(f){var d,p,A,Q;s.value=!0,u.value=await Se().api_client.trades.search("maker_and_taker",f,lt),i.value=[],i.value.push({name:"USDC [buy]",data:(d=u.value)==null?void 0:d.filter(b=>{var o;return b.currency==((o=L.find(m=>m.type==I.USDC))==null?void 0:o.mint)}).filter(b=>{var o;return(o=b.side)==null?void 0:o.includes("BUY")}).map(b=>[b.timestamp,b.price,b.volume]),axisName:"USDC"}),i.value.push({name:"USDC [sell]",data:(p=u.value)==null?void 0:p.filter(b=>{var o;return b.currency==((o=L.find(m=>m.type==I.USDC))==null?void 0:o.mint)}).filter(b=>{var o;return(o=b.side)==null?void 0:o.includes("SELL")}).map(b=>[b.timestamp,b.price,b.volume]),axisName:"USDC"}),i.value.push({name:"ATLAS [buy]",data:(A=u.value)==null?void 0:A.filter(b=>{var o;return b.currency==((o=L.find(m=>m.type==I.ATLAS))==null?void 0:o.mint)}).filter(b=>{var o;return(o=b.side)==null?void 0:o.includes("BUY")}).map(b=>[b.timestamp,b.price,b.volume])}),i.value.push({name:"ATLAS [sell]",data:(Q=u.value)==null?void 0:Q.filter(b=>{var o;return b.currency==((o=L.find(m=>m.type==I.ATLAS))==null?void 0:o.mint)}).filter(b=>{var o;return(o=b.side)==null?void 0:o.includes("SELL")}).map(b=>[b.timestamp,b.price,b.volume])}),s.value=!1}const n={colors:["#3976ea","#3976ea","#b2b2b2","#b2b2b2"],chart:{height:350,type:"bubble",toolbar:{show:!1},foreColor:"#ffffff"},dataLabels:{enabled:!1},fill:{opacity:.8},xaxis:{type:"datetime"},yaxis:[{title:{text:"USDC [buy]"},seriesName:"USDC [buy]"},{title:{text:"USDC [sell]"},seriesName:"USDC [sell]"},{title:{text:"ATLAS [buy]"},seriesName:"ATLAS [buy]",opposite:!0},{title:{text:"ATLAS [sell]"},seriesName:"ATLAS [sell]",opposite:!0}]};return(f,d)=>{const p=la("apexchart");return x(),N(ae,{flat:""},{default:v(()=>[s.value?(x(),K("div",cl,[a(Y),a(it,{class:"row q-pa-sm",color:"primary",size:"3rem"}),a(Y)])):R("",!0),u.value?(x(),K("div",dl,[s.value?R("",!0):(x(),N(p,{key:0,class:"chart",type:"scatter",height:"350",options:n,series:i.value},null,8,["series"])),s.value?R("",!0):(x(),N(il,{key:1,data:u.value},null,8,["data"])),_("div",{class:"text-center text-orange-4 text-weight-thin text-right q-mr-md"}," Limited to: "+$(lt))])):(x(),K("div",ml,"No data"))]),_:1})}}});var fl=pa(vl,[["__scopeId","data-v-4836eefe"]]);const bl={style:{width:"80vw"}},Ll=H({__name:"WalletPage",setup(l){const u=g("account"),i=g("all");return(s,e)=>(x(),N(Ot,{class:"row q-pa-sm justify-center"},{default:v(()=>[_("div",bl,[a(sl,{class:"q-mb-sm"}),a(we,{align:"justify",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=n=>u.value=n)},{default:v(()=>[a(Z,{name:"account",label:"Accounts"}),a(Z,{name:"activity",label:"Market Activity"})]),_:1},8,["modelValue"]),u.value=="account"?(x(),N(we,{key:0,align:"justify",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=n=>i.value=n)},{default:v(()=>[a(Z,{name:"all",label:"All",class:"bg-secondary"}),(x(!0),K(Be,null,na(k(sa)().get_itemTypes,n=>(x(),N(Z,{name:n,label:n,key:n},null,8,["name","label"]))),128))]),_:1},8,["modelValue"])):R("",!0),u.value=="account"?(x(),N(nl,{key:1,tab:i.value,dark:""},null,8,["tab"])):R("",!0),u.value=="activity"?(x(),N(fl,{key:2})):R("",!0)])]),_:1}))}});export{Ll as default};
