import{Q as Y,b as we,a as Z}from"./QSpace.eb83e2a0.js";import{Q as jt}from"./QPage.2ff8ef16.js";import{bY as ie,bZ as ue,b_ as Le,b$ as ce,c0 as de,c1 as X,de as Oe,df as Ge,dg as Ot,bE as R,dh as Be,ck as he,a9 as H,aI as x,Z as z,bc as m,a7 as a,cq as nt,a0 as _,H as $,A as k,cc as j,n as g,Y as u,ay as Gt,cU as Ht,d9 as Yt,db as _e,ak as U,c6 as Zt,ah as st,c2 as rt,b7 as ee,cy as Jt,c7 as Xt,di as He,$ as K,be as ot,M as Me,ch as xe,cf as q,cb as re,cg as Ae,cd as ea,a6 as W,dj as ge,cl as ta,ce as Ye,aC as Ce,cr as P,co as Se,ci as L,cj as I,_ as N,D as it,aQ as aa,aO as la,d0 as na}from"./index.f19306cb.js";import{c as ut,b as $e,a as M,C as G,Q as ct}from"./QTr.14e481b4.js";import{a as Ve,T as Ie,Q as dt,b as mt,C as vt,c as sa}from"./QToggle.02ed300d.js";import{I as ra,e as J,J as oa,K as ia,i as Te,j as ft,h as ua,k as bt,Q as ca}from"./QTooltip.ef954885.js";import{Q as Ze}from"./QSeparator.b2c00e03.js";import{Q as te}from"./QCard.f667ee5e.js";import{f as da,A as De}from"./format_address.6899cf30.js";import{T as ma,h as qe}from"./handle_confirmation.42f5a3d0.js";import{a as va,u as fa}from"./use-dark.44ab5da5.js";import{Q as pt}from"./QCardSection.6a9755fd.js";import{_ as ba}from"./plugin-vue_export-helper.21dcd24c.js";import"./QResizeObserver.ff1a04e9.js";class pa extends Error{constructor(i){super(i)}}class ya extends pa{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}const Je=ie([ue("instruction"),Le("amount")]);function _a(l,i,c,o,e=[],s=X){const b=Ve([{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0}],c,e),v=ce.Buffer.alloc(Je.span);return Je.encode({instruction:Ie.Burn,amount:BigInt(o)},v),new de({keys:b,programId:s,data:v})}const Xe=ie([ue("instruction")]);function et(l,i,c,o=[],e=X){const s=Ve([{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0}],c,o),b=ce.Buffer.alloc(Xe.span);return Xe.encode({instruction:Ie.CloseAccount},b),new de({keys:s,programId:e,data:b})}const ga=ie([Oe("mintAuthorityOption"),Ge("mintAuthority"),Le("supply"),ue("decimals"),Ot("isInitialized"),Oe("freezeAuthorityOption"),Ge("freezeAuthority")]);ga.span;async function oe(l,i,c=!1,o=X,e=Be){if(!c&&!R.isOnCurve(i.toBuffer()))throw new ya;const[s]=await R.findProgramAddress([i.toBuffer(),o.toBuffer(),l.toBuffer()],e);return s}function ka(l,i,c,o,e=X,s=Be){return wa(l,i,c,o,ce.Buffer.alloc(0),e,s)}function wa(l,i,c,o,e,s=X,b=Be){const v=[{pubkey:l,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:he.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return new de({keys:v,programId:b,data:e})}const tt=ie([ue("instruction"),Le("amount")]);function ha(l,i,c,o,e=[],s=X){const b=Ve([{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0}],c,e),v=ce.Buffer.alloc(tt.span);return tt.encode({instruction:Ie.Transfer,amount:BigInt(o)},v),new de({keys:b,programId:s,data:v})}const ke=H({__name:"SolscanLink",props:["address"],setup(l){return(i,c)=>(x(),z(j,{class:"full-width",square:"",color:"primary",size:"sm",icon:"link",target:"_blank",href:"https://solscan.io/account/"+l.address},{default:m(()=>[a(nt),_("div",null,$(k(da)(l.address)),1)]),_:1},8,["href"]))}}),at="q-slider__marker-labels",xa=l=>({value:l}),Aa=({marker:l})=>U("div",{key:l.value,style:l.style,class:l.classes},l.label),yt=[34,37,40,33,39,38],Ca={...fa,...ra,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:l=>l>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Sa=["pan","update:modelValue","change"];function $a({updateValue:l,updatePosition:i,getDragging:c,formAttrs:o}){const{props:e,emit:s,slots:b,proxy:{$q:v}}=st(),y=va(e,v),A=oa(o),F=g(!1),f=g(!1),n=g(!1),d=g(!1),r=u(()=>e.vertical===!0?"--v":"--h"),V=u(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),C=u(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(v.lang.rtl===!0)),Q=u(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),T=u(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),w=u(()=>e.disable!==!0&&e.readonly!==!0&&Q.value<T.value),B=u(()=>(String(e.step).trim().split(".")[1]||"").length),E=u(()=>e.step===0?1:e.step),_t=u(()=>w.value===!0?e.tabindex||0:-1),ae=u(()=>e.max-e.min),Ue=u(()=>T.value-Q.value),le=u(()=>ve(Q.value)),me=u(()=>ve(T.value)),ne=u(()=>e.vertical===!0?C.value===!0?"bottom":"top":C.value===!0?"right":"left"),Fe=u(()=>e.vertical===!0?"height":"width"),gt=u(()=>e.vertical===!0?"width":"height"),Qe=u(()=>e.vertical===!0?"vertical":"horizontal"),kt=u(()=>{const t={role:"slider","aria-valuemin":Q.value,"aria-valuemax":T.value,"aria-orientation":Qe.value,"data-step":e.step};return e.disable===!0?t["aria-disabled"]="true":e.readonly===!0&&(t["aria-readonly"]="true"),t}),wt=u(()=>`q-slider q-slider${r.value} q-slider--${F.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(w.value===!0?" q-slider--editable":""))+(n.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(y.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+r.value:""));function se(t){const p="q-slider__"+t;return`${p} ${p}${r.value} ${p}${r.value}${V.value}`}function Pe(t){const p="q-slider__"+t;return`${p} ${p}${r.value}`}const ht=u(()=>{const t=e.selectionColor||e.color;return"q-slider__selection absolute"+(t!==void 0?` text-${t}`:"")}),xt=u(()=>Pe("markers")+" absolute overflow-hidden"),At=u(()=>Pe("track-container")),Ct=u(()=>se("pin")),St=u(()=>se("label")),$t=u(()=>se("text-container")),Tt=u(()=>se("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),qt=u(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),Lt=u(()=>{const t={[gt.value]:e.trackSize};return e.trackImg!==void 0&&(t.backgroundImage=`url(${e.trackImg}) !important`),t}),Bt=u(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),ze=u(()=>{const t=me.value-le.value,p={[ne.value]:`${100*le.value}%`,[Fe.value]:t===0?"2px":`${100*t}%`};return e.innerTrackImg!==void 0&&(p.backgroundImage=`url(${e.innerTrackImg}) !important`),p});function Mt(t){const{min:p,max:h,step:S}=e;let D=p+t*(h-p);if(S>0){const O=(D-p)%S;D+=(Math.abs(O)>=S/2?(O<0?-1:1)*S:0)-O}return B.value>0&&(D=parseFloat(D.toFixed(B.value))),J(D,Q.value,T.value)}function ve(t){return ae.value===0?0:(t-e.min)/ae.value}function Vt(t,p){const h=Ht(t),S=e.vertical===!0?J((h.top-p.top)/p.height,0,1):J((h.left-p.left)/p.width,0,1);return J(C.value===!0?1-S:S,le.value,me.value)}const Ne=u(()=>Yt(e.markers)===!0?e.markers:E.value),Re=u(()=>{const t=[],p=Ne.value,h=e.max;let S=e.min;do t.push(S),S+=p;while(S<h);return t.push(h),t}),Ee=u(()=>{const t=` ${at}${r.value}-`;return at+`${t}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${t}${C.value===!0?"rtl":"ltr"}`}),fe=u(()=>e.markerLabels===!1?null:Dt(e.markerLabels).map((t,p)=>({index:p,value:t.value,label:t.label||t.value,classes:Ee.value+(t.classes!==void 0?" "+t.classes:""),style:{...We(t.value),...t.style||{}}}))),Ke=u(()=>({markerList:fe.value,markerMap:Ut.value,classes:Ee.value,getStyle:We})),It=u(()=>{const t=Ue.value===0?"2px":100*Ne.value/Ue.value;return{...ze.value,backgroundSize:e.vertical===!0?`2px ${t}%`:`${t}% 2px`}});function Dt(t){if(t===!1)return null;if(t===!0)return Re.value.map(xa);if(typeof t=="function")return Re.value.map(h=>{const S=t(h);return _e(S)===!0?{...S,value:h}:{value:h,label:S}});const p=({value:h})=>h>=e.min&&h<=e.max;return Array.isArray(t)===!0?t.map(h=>_e(h)===!0?h:{value:h}).filter(p):Object.keys(t).map(h=>{const S=t[h],D=Number(h);return _e(S)===!0?{...S,value:D}:{value:D,label:S}}).filter(p)}function We(t){return{[ne.value]:`${100*(t-e.min)/ae.value}%`}}const Ut=u(()=>{if(e.markerLabels===!1)return null;const t={};return fe.value.forEach(p=>{t[p.value]=p}),t});function Ft(){if(b["marker-label-group"]!==void 0)return b["marker-label-group"](Ke.value);const t=b["marker-label"]||Aa;return fe.value.map(p=>t({marker:p,...Ke.value}))}const Qt=u(()=>[[ma,Pt,void 0,{[Qe.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Pt(t){t.isFinal===!0?(d.value!==void 0&&(i(t.evt),t.touch===!0&&l(!0),d.value=void 0,s("pan","end")),F.value=!1,n.value=!1):t.isFirst===!0?(d.value=c(t.evt),i(t.evt),l(),F.value=!0,s("pan","start")):(i(t.evt),l())}function je(){n.value=!1}function zt(t){i(t,c(t)),l(),f.value=!0,F.value=!0,document.addEventListener("mouseup",be,!0)}function be(){f.value=!1,F.value=!1,l(!0),je(),document.removeEventListener("mouseup",be,!0)}function Nt(t){i(t,c(t)),l(!0)}function Rt(t){yt.includes(t.keyCode)&&l(!0)}function Et(t){if(e.vertical===!0)return null;const p=v.lang.rtl!==e.reverse?1-t:t;return{transform:`translateX(calc(${2*p-1} * ${e.thumbSize} / 2 + ${50-100*p}%))`}}function Kt(t){const p=u(()=>f.value===!1&&(n.value===t.focusValue||n.value==="both")?" q-slider--focus":""),h=u(()=>`q-slider__thumb q-slider__thumb${r.value} q-slider__thumb${r.value}-${C.value===!0?"rtl":"ltr"} absolute non-selectable`+p.value+(t.thumbColor.value!==void 0?` text-${t.thumbColor.value}`:"")),S=u(()=>({width:e.thumbSize,height:e.thumbSize,[ne.value]:`${100*t.ratio.value}%`,zIndex:n.value===t.focusValue?2:void 0})),D=u(()=>t.labelColor.value!==void 0?` text-${t.labelColor.value}`:""),O=u(()=>Et(t.ratio.value)),pe=u(()=>"q-slider__text"+(t.labelTextColor.value!==void 0?` text-${t.labelTextColor.value}`:""));return()=>{const ye=[U("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[U("path",{d:e.thumbPath})]),U("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(ye.push(U("div",{class:Ct.value+" absolute fit no-pointer-events"+D.value},[U("div",{class:St.value,style:{minWidth:e.thumbSize}},[U("div",{class:$t.value,style:O.value},[U("span",{class:pe.value},t.label.value)])])])),e.name!==void 0&&e.disable!==!0&&A(ye,"push")),U("div",{class:h.value,style:S.value,...t.getNodeData()},ye)}}function Wt(t,p,h,S){const D=[];e.innerTrackColor!=="transparent"&&D.push(U("div",{key:"inner",class:Bt.value,style:ze.value})),e.selectionColor!=="transparent"&&D.push(U("div",{key:"selection",class:ht.value,style:t.value})),e.markers!==!1&&D.push(U("div",{key:"marker",class:xt.value,style:It.value})),S(D);const O=[Zt("div",{key:"trackC",class:At.value,tabindex:p.value,...h.value},[U("div",{class:qt.value,style:Lt.value},D)],"slide",w.value,()=>Qt.value)];if(e.markerLabels!==!1){const pe=e.switchMarkerLabelsSide===!0?"unshift":"push";O[pe](U("div",{key:"markerL",class:Tt.value},Ft()))}return O}return Gt(()=>{document.removeEventListener("mouseup",be,!0)}),{state:{active:F,focus:n,preventFocus:f,dragging:d,editable:w,classes:wt,tabindex:_t,attributes:kt,step:E,decimals:B,trackLen:ae,innerMin:Q,innerMinRatio:le,innerMax:T,innerMaxRatio:me,positionProp:ne,sizeProp:Fe,isReversed:C},methods:{onActivate:zt,onMobileClick:Nt,onBlur:je,onKeyup:Rt,getContent:Wt,getThumbRenderFn:Kt,convertRatioToModel:Mt,convertModelToRatio:ve,getDraggingRatio:Vt}}}const Ta=()=>({});var qa=rt({name:"QSlider",props:{...Ca,modelValue:{required:!0,default:null,validator:l=>typeof l=="number"||l===null},labelValue:[String,Number]},emits:Sa,setup(l,{emit:i}){const{proxy:{$q:c}}=st(),{state:o,methods:e}=$a({updateValue:r,updatePosition:C,getDragging:V,formAttrs:ia(l)}),s=g(null),b=g(0),v=g(0);function y(){v.value=l.modelValue===null?o.innerMin.value:J(l.modelValue,o.innerMin.value,o.innerMax.value)}ee(()=>`${l.modelValue}|${o.innerMin.value}|${o.innerMax.value}`,y),y();const A=u(()=>e.convertModelToRatio(v.value)),F=u(()=>o.active.value===!0?b.value:A.value),f=u(()=>{const w={[o.positionProp.value]:`${100*o.innerMinRatio.value}%`,[o.sizeProp.value]:`${100*(F.value-o.innerMinRatio.value)}%`};return l.selectionImg!==void 0&&(w.backgroundImage=`url(${l.selectionImg}) !important`),w}),n=e.getThumbRenderFn({focusValue:!0,getNodeData:Ta,ratio:F,label:u(()=>l.labelValue!==void 0?l.labelValue:v.value),thumbColor:u(()=>l.thumbColor||l.color),labelColor:u(()=>l.labelColor),labelTextColor:u(()=>l.labelTextColor)}),d=u(()=>o.editable.value!==!0?{}:c.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:Q,onBlur:e.onBlur,onKeydown:T,onKeyup:e.onKeyup});function r(w){v.value!==l.modelValue&&i("update:modelValue",v.value),w===!0&&i("change",v.value)}function V(){return s.value.getBoundingClientRect()}function C(w,B=o.dragging.value){const E=e.getDraggingRatio(w,B);v.value=e.convertRatioToModel(E),b.value=l.snap!==!0||l.step===0?E:e.convertModelToRatio(v.value)}function Q(){o.focus.value=!0}function T(w){if(!yt.includes(w.keyCode))return;Jt(w);const B=([34,33].includes(w.keyCode)?10:1)*o.step.value,E=([34,37,40].includes(w.keyCode)?-1:1)*(o.isReversed.value===!0?-1:1)*(l.vertical===!0?-1:1)*B;v.value=J(parseFloat((v.value+E).toFixed(o.decimals.value)),o.innerMin.value,o.innerMax.value),r()}return()=>{const w=e.getContent(f,o.tabindex,d,B=>{B.push(n())});return U("div",{ref:s,class:o.classes.value+(l.modelValue===null?" q-slider--no-value":""),...o.attributes.value,"aria-valuenow":l.modelValue},w)}}}),La=rt({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(l,{slots:i}){const c=u(()=>{const o=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(e=>l[e]===!0).map(e=>`q-btn-group--${e}`).join(" ");return`q-btn-group row no-wrap${o.length!==0?" "+o:""}`+(l.spread===!0?" q-btn-group--spread":" inline")});return()=>U("div",{class:c.value},Xt(i.default))}});const Ba=_("span",{class:"text-weight-bold"},"Send Token",-1),Ma={class:"text-body1"},Va={class:"text-overline",style:{width:"500px"}},Ia={class:"col"},Da=H({__name:"SendTokenButton",props:["mint","decimals","amount","disabled","name"],setup(l){const i=g(!1),c=l,o=g(""),e=g(0),s=g(0);He(()=>s.value,()=>{e.value=parseFloat((s.value/10*c.amount).toFixed(c.decimals))}),He(()=>e.value,()=>{s.value=e.value/c.amount*100/10});async function b(){const v=new xe,y=await oe(new R(c.mint),new R(o.value));console.log(y);const A=await oe(new R(c.mint),q().publicKey.value);await re().connection.getAccountInfo(y)===null&&v.add(ka(q().publicKey.value,y,new R(o.value),new R(c.mint))),v.add(ha(A,y,q().publicKey.value,e.value*Math.pow(10,c.decimals)));try{const f=await q().sendTransaction(v,re().connection);await qe(f)}catch(f){Ae.create({color:"red",message:`${f}`,timeout:5e3})}}return(v,y)=>(x(),K(Me,null,[a(j,{disable:l.disabled,square:"",color:"secondary",size:"sm",icon:"send",onClick:y[0]||(y[0]=A=>i.value=!0)},null,8,["disable"]),a(ft,{modelValue:i.value,"onUpdate:modelValue":y[5]||(y[5]=A=>i.value=A)},{default:m(()=>[a(te,null,{default:m(()=>[a(dt,{class:"q-mt-md"},{default:m(()=>[a(De,{size:"xl",url:"sa_files/webp/"+l.mint+".webp"},null,8,["url"]),a(mt,null,{default:m(()=>[Ba,_("div",Ma,$(l.name),1),_("div",Va,$(l.mint),1)]),_:1}),ot(a(j,{flat:"",round:"",dense:"",icon:"close"},null,512),[[vt]])]),_:1}),a(pt,{class:"q-gutter-y-sm"},{default:m(()=>[_("div",null,[a(Te,{filled:"",square:"",label:"Receiver",modelValue:o.value,"onUpdate:modelValue":y[1]||(y[1]=A=>o.value=A)},null,8,["modelValue"])]),a(La,{push:"",class:"row full-width"},{default:m(()=>[_("div",Ia,[a(Te,{filled:"",square:"",class:"col",label:"Amount",modelValue:e.value,"onUpdate:modelValue":y[2]||(y[2]=A=>e.value=A),hint:"Max: "+l.amount},null,8,["modelValue","hint"]),a(qa,{class:"q-px-lg",modelValue:s.value,"onUpdate:modelValue":y[3]||(y[3]=A=>s.value=A),min:0,max:10,color:"secondary","track-size":"10px",markers:"","marker-labels":A=>`${10*A}%`},null,8,["modelValue","marker-labels"])]),a(j,{square:"",color:"primary",icon:"send",onClick:y[4]||(y[4]=A=>b())})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Ua=_("span",{class:"text-weight-bold"},"Close/Burn Account",-1),Fa={class:"text-overline"},Qa=_("div",{class:"row q-gutter-x-sm"},[_("div",{class:""},"Closing Token-Accounts will recover the fee!")],-1),Pa={class:"row q-gutter-x-sm"},za=_("div",{class:""},"Amount left:",-1),Na={class:""},Ra={class:"q-ma-md text-right text-weight-light"},Ea=H({__name:"EditTokenButton",props:["mint","decimals","amount"],setup(l){const i=g(!1),c=l;g(""),g(0);async function o(){const s=new xe,b=await oe(new R(c.mint),q().publicKey.value);s.add(_a(b,new R(c.mint),q().publicKey.value,c.amount*Math.pow(10,c.decimals))),s.add(et(b,q().publicKey.value,q().publicKey.value)),s.add(he.transfer({fromPubkey:q().publicKey.value,toPubkey:new R(Ye),lamports:ge}));try{const v=await q().sendTransaction(s,re().connection);await qe(v)}catch(v){Ae.create({color:"red",message:`${v}`,timeout:5e3})}}async function e(){const s=new xe,b=await oe(new R(c.mint),q().publicKey.value);s.add(et(b,q().publicKey.value,q().publicKey.value)),s.add(he.transfer({fromPubkey:q().publicKey.value,toPubkey:new R(Ye),lamports:ge}));try{const v=await q().sendTransaction(s,re().connection);await qe(v)}catch(v){Ae.create({color:"red",message:`${v}`,timeout:5e3})}}return(s,b)=>(x(),K(Me,null,[a(j,{square:"",color:"primary",size:"sm",icon:"edit",onClick:b[0]||(b[0]=v=>i.value=!0)}),a(ft,{modelValue:i.value,"onUpdate:modelValue":b[3]||(b[3]=v=>i.value=v)},{default:m(()=>[a(te,null,{default:m(()=>[a(dt,{class:"q-mt-md"},{default:m(()=>[a(ea,null,{default:m(()=>[a(nt,{name:"edit"})]),_:1}),a(mt,null,{default:m(()=>[Ua,_("div",Fa,$(l.mint),1)]),_:1}),ot(a(j,{flat:"",round:"",dense:"",icon:"close"},null,512),[[vt]])]),_:1}),a(pt,{class:"q-gutter-y-md col justify-around"},{default:m(()=>[Qa,_("div",Pa,[za,_("div",Na,$(l.amount),1)]),a(j,{square:"",disabled:l.amount==0,class:"full-width",color:"red",onClick:b[1]||(b[1]=v=>o())},{default:m(()=>[W(" Burn and close Account (+0.00193428 SOL) ")]),_:1},8,["disabled"]),a(j,{square:"",disabled:l.amount>0,class:"full-width",color:"orange",onClick:b[2]||(b[2]=v=>e())},{default:m(()=>[W(" Close Account (+0.00193428 SOL)")]),_:1},8,["disabled"])]),_:1}),_("div",Ra," fee: "+$(k(ge)/k(ta))+"\u25CE ",1)]),_:1})]),_:1},8,["modelValue"])],64))}}),Ka={key:0,class:"row"},Wa=_("div",{class:"col-2 q-table__title"},"Accounts",-1),ja={class:"text-subtitle1"},Oa={key:0,class:"row items-center justify-end q-gutter-x-sm"},Ga={key:2,class:"row items-center justify-end q-gutter-x-sm"},Ha={key:0,class:"row items-center justify-end q-gutter-x-sm"},Ya={key:2,class:"row items-center justify-end q-gutter-x-sm"},Za={class:"row items-center text-right"},Ja=_("div",{class:"col text-h5"},"\u2211",-1),Xa={class:"col-1 q-gutter-y-sm text-subtitle1"},el={class:"row justify-end q-gutter-x-md items-center"},tl={class:"row justify-end q-gutter-x-md items-center"},al=H({__name:"WalletAccountsTable",props:["tab"],setup(l){const i=l;g();const c=g(!1),o=g("all"),e=g(["name","type","action","amount","market","value"]),s=[{name:"image",label:"",align:"left",required:!0},{name:"name",label:"Name",align:"left",sortable:!0,required:!0,field:n=>n.staratlas.name},{name:"type",label:"Type",align:"left",sortable:!0,field:n=>n.staratlas.attributes.itemType},{name:"account",label:"Account",align:"left",sortable:!0,field:n=>n.pubkey},{name:"mint",label:"Mint",align:"left",sortable:!0,field:n=>n.info.mint},{name:"owner",align:"left",label:"Owner",sortable:!0,field:n=>n.info.owner},{name:"decimals",label:"Decimals",sortable:!0,field:n=>{var d;return(d=n.info.tokenAmount)==null?void 0:d.decimals}},{name:"amount",label:"Amount",align:"right",sortable:!0,field:n=>{var d;return(d=n.info.tokenAmount)==null?void 0:d.uiAmount}},{name:"market",label:"Market",align:"right",field:n=>{var d;return(d=n.info.tokenAmount)==null?void 0:d.uiAmount}},{name:"value",label:"Value",align:"right",field:n=>{var d;return(d=n.info.tokenAmount)==null?void 0:d.uiAmount}},{label:"",align:"right",name:"action"}];Ce(async()=>{await P().update_accounts()}),ee(()=>q().publicKey.value,async()=>{await P().update_accounts()});const b=g({rowsPerPage:0}),v=g([]),y=g([]);Ce(async()=>{var n,d;v.value=await Se().api_client.trades.getPrices(((n=L.find(r=>r.type==I.USDC))==null?void 0:n.mint)??"none"),y.value=await Se().api_client.trades.getPrices(((d=L.find(r=>r.type==I.ATLAS))==null?void 0:d.mint)??"none"),await P().update_accounts()});function A(){let n=[];return i.tab=="all"?n=P().get_account_map_staratlas:n=P().get_account_map_staratlas.filter(d=>{var r;return((r=d.staratlas.attributes.itemType)==null?void 0:r.toLowerCase())==i.tab}),c.value?n.filter(d=>d.info.tokenAmount.uiAmount!=0):n}const F=u(()=>A().map(n=>{var d;return(((d=y.value.find(r=>{var V;return r.asset==n.info.mint&&r.currency==((V=L.find(C=>C.type==I.USDC))==null?void 0:V.mint)}))==null?void 0:d.price)??0)*n.info.tokenAmount.uiAmount}).reduce((n,d)=>n+d,0)),f=u(()=>A().map(n=>{var d;return(((d=y.value.find(r=>{var V;return r.asset==n.info.mint&&r.currency==((V=L.find(C=>C.type==I.ATLAS))==null?void 0:V.mint)}))==null?void 0:d.price)??0)*n.info.tokenAmount.uiAmount}).reduce((n,d)=>n+d,0));return(n,d)=>(x(),z(te,{flat:""},{default:m(()=>[k(P)().is_loading?(x(),K("div",Ka,[a(Y),a(ut,{class:"row",color:"primary",size:"3rem"}),a(Y)])):N("",!0),a(ct,{color:"primary",dark:"",flat:"",square:"","virtual-scroll":"",pagination:b.value,"onUpdate:pagination":d[3]||(d[3]=r=>b.value=r),"rows-per-page-options":[0],"visible-columns":e.value,title:"Accounts",rows:A(),columns:s,"row-key":"name"},{top:m(r=>[Wa,a(Y),a(we,{modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=V=>o.value=V),align:"justify"},{default:m(()=>[a(Z,{name:"all",label:"ALL",class:"bg-secondary"}),a(Z,{name:"usdc",label:"USDC"}),a(Z,{name:"atlas",label:"ATLAS"})]),_:1},8,["modelValue"]),a(Y),a(sa,{color:"secondary",modelValue:c.value,"onUpdate:modelValue":d[1]||(d[1]=V=>c.value=V),label:"Hide empty accounts","left-label":""},null,8,["modelValue"]),a(Y),a(ua,{modelValue:e.value,"onUpdate:modelValue":d[2]||(d[2]=V=>e.value=V),multiple:"",borderless:"",dense:"","options-dense":"","display-value":n.$q.lang.table.columns,"emit-value":"","map-options":"",options:s,"option-value":"name",style:{"min-width":"150px"}},null,8,["modelValue","display-value"]),a(j,{flat:"",round:"",dense:"",icon:r.inFullscreen?"fullscreen_exit":"fullscreen",onClick:r.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])]),body:m(r=>{var V;return[a($e,{props:r,class:it(((V=r.row.info.tokenAmount)==null?void 0:V.uiAmount)==0?"text-yellow":"")},{default:m(()=>[a(M,{key:"image",props:r},{default:m(()=>[a(De,{size:"xl",url:"sa_files/webp/"+r.row.info.mint+".webp"},null,8,["url"])]),_:2},1032,["props"]),a(M,{key:"name",props:r},{default:m(()=>[_("div",ja,$(r.row.staratlas.name??"-"),1)]),_:2},1032,["props"]),a(M,{key:"type",props:r},{default:m(()=>[W($(r.row.staratlas.attributes.itemType??"-"),1)]),_:2},1032,["props"]),a(M,{key:"account",props:r},{default:m(()=>[a(ke,{address:r.row.pubkey},null,8,["address"])]),_:2},1032,["props"]),a(M,{key:"owner",props:r},{default:m(()=>[a(ke,{address:r.row.info.owner},null,8,["address"])]),_:2},1032,["props"]),a(M,{key:"mint",props:r,class:""},{default:m(()=>[a(ke,{address:r.row.info.mint},null,8,["address"])]),_:2},1032,["props"]),a(M,{key:"decimals",props:r},{default:m(()=>{var C;return[W($((C=r.row.info.tokenAmount)==null?void 0:C.decimals),1)]}),_:2},1032,["props"]),a(M,{key:"amount",class:"text-subtitle1 text-bold",props:r},{default:m(()=>{var C;return[_("div",null,$((C=r.row.info.tokenAmount)==null?void 0:C.uiAmount.toFixed(0)),1)]}),_:2},1032,["props"]),a(M,{key:"market",class:"text-subtitle1 text-bold",props:r},{default:m(()=>{var C,Q;return[o.value!="atlas"?(x(),K("div",Oa,[_("div",null,$((((C=v.value.find(T=>T.asset==r.row.info.mint&&T.currency==k(L).find(w=>w.type==k(I).USDC).mint))==null?void 0:C.price)??0).toFixed(2)),1),a(G,{currency:k(L).find(T=>T.type==k(I).USDC)},null,8,["currency"])])):N("",!0),o.value=="all"?(x(),z(Ze,{key:1})):N("",!0),o.value!="usdc"?(x(),K("div",Ga,[_("div",null,$((((Q=y.value.find(T=>T.asset==r.row.info.mint&&T.currency==k(L).find(w=>w.type==k(I).ATLAS).mint))==null?void 0:Q.price)??0).toFixed(2)),1),a(G,{currency:k(L).find(T=>T.type==k(I).ATLAS)},null,8,["currency"])])):N("",!0)]}),_:2},1032,["props"]),a(M,{key:"value",class:"text-subtitle1 text-bold",props:r},{default:m(()=>{var C,Q,T,w;return[o.value!="atlas"?(x(),K("div",Ha,[_("div",null,$(((((C=y.value.find(B=>B.asset==r.row.info.mint&&B.currency==k(L).find(E=>E.type==k(I).USDC).mint))==null?void 0:C.price)??0)*((Q=r.row.info.tokenAmount)==null?void 0:Q.uiAmount)).toFixed(2)),1),a(G,{currency:k(L).find(B=>B.type==k(I).USDC)},null,8,["currency"])])):N("",!0),o.value=="all"?(x(),z(Ze,{key:1})):N("",!0),o.value!="usdc"?(x(),K("div",Ya,[_("div",null,$(((((T=y.value.find(B=>B.asset==r.row.info.mint&&B.currency==k(L).find(E=>E.type==k(I).ATLAS).mint))==null?void 0:T.price)??0)*((w=r.row.info.tokenAmount)==null?void 0:w.uiAmount)).toFixed(2)),1),a(G,{currency:k(L).find(B=>B.type==k(I).ATLAS)},null,8,["currency"])])):N("",!0)]}),_:2},1032,["props"]),a(M,{key:"action",props:r,class:"q-gutter-x-sm"},{default:m(()=>[a(Ea,{amount:r.row.info.tokenAmount.uiAmount,mint:r.row.info.mint,decimals:r.row.info.tokenAmount.decimals},null,8,["amount","mint","decimals"]),a(Da,{disabled:r.row.info.tokenAmount.uiAmount==0,mint:r.row.info.mint,decimals:r.row.info.tokenAmount.decimals,amount:r.row.info.tokenAmount.uiAmount,name:r.row.staratlas.name},null,8,["disabled","mint","decimals","amount","name"])]),_:2},1032,["props"])]),_:2},1032,["props","class"])]}),"top-row":m(()=>[a($e,{class:"bg-primary"},{default:m(()=>[a(M,{colspan:"100%"},{default:m(()=>[_("div",Za,[Ja,_("div",Xa,[_("div",el,[W($(F.value.toFixed(2))+" ",1),a(G,{currency:k(L).find(r=>r.type==k(I).USDC)},null,8,["currency"])]),_("div",tl,[W($(f.value.toFixed(2))+" ",1),a(G,{currency:k(L).find(r=>r.type==k(I).ATLAS)},null,8,["currency"])])])])]),_:1}),a(bt,null,{default:m(()=>[W("Total market value")]),_:1})]),_:1})]),_:1},8,["pagination","visible-columns","rows"])]),_:1}))}}),ll=H({__name:"WalletAccountInput",setup(l){const i=g("");ee(()=>q().publicKey.value,()=>{P().input_wallet=q().publicKey.value.toString()});async function c(){i.value.length?await P().update_accounts(new R(i.value)):await P().update_accounts()}return(o,e)=>(x(),z(te,{square:"",flat:"",class:"row"},{default:m(()=>[a(Te,{label:"Wallet-Address",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s),clearable:"","clear-icon":"close",square:"",filled:"",class:"col"},null,8,["modelValue"]),a(j,{onClick:e[1]||(e[1]=s=>{c().then(()=>{k(P)().input_wallet=i.value})}),color:"secondary",square:"",size:"md",icon:"fa-solid fa-paper-plane"},{default:m(()=>[a(bt,null,{default:m(()=>[W("Query wallet")]),_:1})]),_:1})]),_:1}))}});const nl={class:"row items-center q-gutter-x-xs justify-end"},sl={class:"row items-center q-gutter-x-xs justify-end"},rl={class:"row items-center q-gutter-x-xs justify-end"},ol=H({__name:"WalletAccountHistoryTable",props:["data"],setup(l){const i=g({rowsPerPage:0}),c=g([{name:"timestamp",label:"Timestamp",align:"left",field:"timestamp",sortable:!0},{name:"info",align:"left",field:"info",sortable:!0},{name:"side",label:"Side",align:"left",field:"side",sortable:!0},{name:"fee",align:"right",label:"Fee",field:o=>{var e;return((e=o.fee)==null?void 0:e.toFixed(2))??0},sortable:!0},{name:"size",align:"right",label:"Size",field:"volume",sortable:!0},{name:"volume",align:"right",label:"Volume",field:"volume",sortable:!0},{name:"price",align:"right",label:"Price",field:o=>o.price.toFixed(2),sortable:!0}]);return(o,e)=>(x(),z(ct,{rows:l.data,dense:"",square:"",flat:"","virtual-scroll":"",columns:c.value,pagination:i.value,"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"row-key":"name","hide-bottom":""},{body:m(s=>[a($e,{props:s},{default:m(()=>[a(M,{key:"timestamp",props:s},{default:m(()=>[W($(s.row.timestamp),1)]),_:2},1032,["props"]),a(M,{key:"info",props:s},{default:m(()=>[a(j,{flat:"",size:"sm",icon:"link",href:"https://solscan.io/tx/"+s.row.signature,target:"_blank"},null,8,["href"])]),_:2},1032,["props"]),a(M,{key:"side",props:s},{default:m(()=>[a(ca,{class:it(s.row.side=="BUY"?"buy":"sell")},{default:m(()=>[W($(s.row.side),1)]),_:2},1032,["class"])]),_:2},1032,["props"]),a(M,{key:"fee",props:s},{default:m(()=>[W($((s.row.fee/s.row.volume*100).toFixed(1)??0)+"% ",1)]),_:2},1032,["props"]),a(M,{key:"size",props:s},{default:m(()=>[_("div",nl,[_("div",null,$(s.row.size??0),1),a(De,{style:{width:"10px",height:"10px"},url:"sa_files/webp/"+s.row.asset+".webp"},null,8,["url"])])]),_:2},1032,["props"]),a(M,{key:"volume",props:s},{default:m(()=>[_("div",sl,[_("div",null,$(s.row.volume??0),1),a(G,{style:{width:"14px",height:"14px"},currency:k(L).find(b=>b.mint===s.row.currency)},null,8,["currency"])])]),_:2},1032,["props"]),a(M,{key:"price",props:s,class:""},{default:m(()=>[_("div",rl,[_("div",null,$(s.row.price??0),1),a(G,{style:{width:"14px",height:"14px"},currency:k(L).find(b=>b.mint===s.row.currency)},null,8,["currency"])])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"]))}});const il={key:0,class:"row"},ul={key:1},cl={key:2,class:"text-center text-body2 q-pa-sm"},lt=1e6,dl=H({__name:"WalletAccountHistory",setup(l){const i=g(),c=g([]),o=g(!1);ee(()=>q().publicKey.value,async()=>{await e(q().publicKey.value.toString())}),ee(()=>P().input_wallet,async()=>{await e(P().input_wallet)}),Ce(async()=>{P().input_wallet?await e(P().input_wallet):await e(q().publicKey.value.toString())});async function e(b){var v,y,A,F;o.value=!0,i.value=await Se().api_client.trades.search("maker_and_taker",b,lt),c.value=[],c.value.push({name:"USDC [buy]",data:(v=i.value)==null?void 0:v.filter(f=>{var n;return f.currency==((n=L.find(d=>d.type==I.USDC))==null?void 0:n.mint)}).filter(f=>{var n;return(n=f.side)==null?void 0:n.includes("BUY")}).map(f=>[f.timestamp,f.price,f.volume]),axisName:"USDC"}),c.value.push({name:"USDC [sell]",data:(y=i.value)==null?void 0:y.filter(f=>{var n;return f.currency==((n=L.find(d=>d.type==I.USDC))==null?void 0:n.mint)}).filter(f=>{var n;return(n=f.side)==null?void 0:n.includes("SELL")}).map(f=>[f.timestamp,f.price,f.volume]),axisName:"USDC"}),c.value.push({name:"ATLAS [buy]",data:(A=i.value)==null?void 0:A.filter(f=>{var n;return f.currency==((n=L.find(d=>d.type==I.ATLAS))==null?void 0:n.mint)}).filter(f=>{var n;return(n=f.side)==null?void 0:n.includes("BUY")}).map(f=>[f.timestamp,f.price,f.volume])}),c.value.push({name:"ATLAS [sell]",data:(F=i.value)==null?void 0:F.filter(f=>{var n;return f.currency==((n=L.find(d=>d.type==I.ATLAS))==null?void 0:n.mint)}).filter(f=>{var n;return(n=f.side)==null?void 0:n.includes("SELL")}).map(f=>[f.timestamp,f.price,f.volume])}),o.value=!1}const s={colors:["#3976ea","#3976ea","#b2b2b2","#b2b2b2"],chart:{height:350,type:"bubble",toolbar:{show:!1},foreColor:"#ffffff"},dataLabels:{enabled:!1},fill:{opacity:.8},xaxis:{type:"datetime"},yaxis:[{title:{text:"USDC [buy]"},seriesName:"USDC [buy]"},{title:{text:"USDC [sell]"},seriesName:"USDC [sell]"},{title:{text:"ATLAS [buy]"},seriesName:"ATLAS [buy]",opposite:!0},{title:{text:"ATLAS [sell]"},seriesName:"ATLAS [sell]",opposite:!0}]};return(b,v)=>{const y=aa("apexchart");return x(),z(te,{flat:""},{default:m(()=>[o.value?(x(),K("div",il,[a(Y),a(ut,{class:"row q-pa-sm",color:"primary",size:"3rem"}),a(Y)])):N("",!0),i.value?(x(),K("div",ul,[o.value?N("",!0):(x(),z(y,{key:0,class:"chart",type:"scatter",height:"350",options:s,series:c.value},null,8,["series"])),o.value?N("",!0):(x(),z(ol,{key:1,data:i.value},null,8,["data"])),_("div",{class:"text-center text-orange-4 text-weight-thin text-right q-mr-md"}," Limited to: "+$(lt))])):(x(),K("div",cl,"No data"))]),_:1})}}});var ml=ba(dl,[["__scopeId","data-v-4836eefe"]]);const vl={style:{width:"80vw"}},Tl=H({__name:"WalletPage",setup(l){const i=g("account"),c=g("all");return(o,e)=>(x(),z(jt,{class:"row q-pa-sm justify-center"},{default:m(()=>[_("div",vl,[a(ll,{class:"q-mb-sm"}),a(we,{align:"justify",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s)},{default:m(()=>[a(Z,{name:"account",label:"Accounts"}),a(Z,{name:"activity",label:"Market Activity"})]),_:1},8,["modelValue"]),i.value=="account"?(x(),z(we,{key:0,align:"justify",modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=s=>c.value=s)},{default:m(()=>[a(Z,{name:"all",label:"All",class:"bg-secondary"}),(x(!0),K(Me,null,la(k(na)().get_itemTypes,s=>(x(),z(Z,{name:s,label:s,key:s},null,8,["name","label"]))),128))]),_:1},8,["modelValue"])):N("",!0),i.value=="account"?(x(),z(al,{key:1,tab:c.value,dark:""},null,8,["tab"])):N("",!0),i.value=="activity"?(x(),z(ml,{key:2})):N("",!0)])]),_:1}))}});export{Tl as default};
