import{a as H,b as Z,Q as T}from"./QTabs.5c8a6a4a.js";import{c as J,Q as K,a as m,b as W}from"./QTr.9fe13c51.js";import{a9 as q,n as S,aI as u,Z as y,bc as r,a6 as p,H as b,_ as X,$ as D,a0 as h,aC as ee,b7 as ae,ca as F,ch as _,ci as U,d1 as G,d5 as L,a7 as a,aO as re,A as x,M as te,cl as le,cc as se,cb as oe}from"./index.b6d77f04.js";import{Q as k,i as ie,p as ue}from"./use-checkbox.f2adbddd.js";import{Q as ne}from"./QImg.8ce1a790.js";import{Q as ce}from"./QSeparator.57c60c01.js";import{Q as de}from"./QPage.e0b87aa2.js";import{P as v}from"./PirceElement.c38361d6.js";import"./QResizeObserver.66fd643f.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./use-dark.f73d9b10.js";var Y=(s=>(s.Access="access",s.Collectible="collectible",s.Currency="currency",s.Memories="memories",s.Resource="resource",s.Ship="ship",s.Story="story",s.Structure="structure",s))(Y||{});const me=q({__name:"RarityBadge",props:["rarity"],setup(s){const n=S(s.rarity.slice(0,1)[0]);return(C,V)=>s.rarity=="uncommon"?(u(),y(k,{key:0,floating:"",color:"red",class:"text-uppercase"},{default:r(()=>[p(b(n.value),1)]),_:1})):s.rarity=="common"?(u(),y(k,{key:1,floating:"",color:"grey",class:"text-uppercase"},{default:r(()=>[p(b(n.value),1)]),_:1})):s.rarity=="rare"?(u(),y(k,{key:2,floating:"",color:"blue",class:"text-uppercase"},{default:r(()=>[p(b(n.value),1)]),_:1})):s.rarity=="anomaly"?(u(),y(k,{key:3,floating:"",color:"teal",class:"text-uppercase"},{default:r(()=>[p(b(n.value),1)]),_:1})):s.rarity=="epic"?(u(),y(k,{key:4,floating:"",color:"green",class:"text-uppercase"},{default:r(()=>[p(b(n.value),1)]),_:1})):s.rarity=="legendary"?(u(),y(k,{key:5,floating:"",color:"orange",class:"text-uppercase"},{default:r(()=>[p(b(n.value),1)]),_:1})):X("",!0)}}),ye={class:"row"},be={class:"col"},j=q({__name:"MarketTrendElement",props:["percentage","currency"],setup(s){return(P,n)=>(u(),D("div",ye,[h("div",be,b(s.percentage==0?"-":s.percentage),1)]))}}),fe={key:0,class:"row"},_e={class:"text-h6"},ge={class:"text-subtitle2"},pe={class:"col"},Le=q({__name:"TablePage",setup(s){const P=S({rowsPerPage:0}),n=S(),C=S(!0),V=[{name:"image",required:!0,label:"",field:"image",align:"left",sortable:!0,style:"width: 50px"},{name:"name",required:!0,label:"Asset",field:"name",align:"left",sortable:!0},{name:"market_atlas",required:!0,label:"Market [ATLAS]",align:"center",sortable:!0,style:"width: 100px",field:o=>o.market.atlas},{name:"market_usdc",required:!0,label:"Market [USDC]",align:"center",sortable:!0,style:"width: 100px",field:o=>o.market.usdc},{name:"buy_orders_atlas",required:!0,label:"BUY [ATLAS]",align:"right",sortable:!0,style:"width: 100px",field:o=>o.orderbok.buy.atlas},{name:"buy_orders_usdc",required:!0,label:"BUY [USDC]",align:"right",sortable:!0,style:"width: 100px",field:o=>o.orderbok.buy.usdc},{name:"spread",required:!0,label:"Spread",align:"center",sortable:!0,style:"width: 20px"},{name:"sell_orders_atlas",required:!0,label:"Sell [ATLAS]",align:"left",sortable:!0,style:"width: 100px",field:o=>o.orderbok.sell.atlas},{name:"sell_orders_usdc",required:!0,label:"SELL [USDC]",align:"left",sortable:!0,style:"width: 100px",field:o=>o.orderbok.sell.usdc}],Q=S([]),B=S(Y.Ship);ee(async()=>{await E()}),ae(()=>B.value,async()=>{await E()});async function E(){var e,t,f,w,A,g,N,O,$,I,R,z;C.value=!0,Q.value=[];const o=await F().api_client.trades.getPrices(((e=_.find(i=>i.type==U.USDC))==null?void 0:e.mint)??"none"),c=await F().api_client.trades.getPrices(((t=_.find(i=>i.type==U.ATLAS))==null?void 0:t.mint)??"none");for(const i of G().raw.filter(l=>l.attributes.itemType==B.value))Q.value.push({name:i.name.toString(),mint:i.mint.toString(),attributes:i.attributes,symbol:i.symbol,url:"sa_files/webp/"+i.mint.toString()+".webp",market:{atlas:((f=c.find(l=>l.asset==i.mint.toString()))==null?void 0:f.price)??void 0,usdc:((w=o.find(l=>l.asset==i.mint.toString()))==null?void 0:w.price)??void 0},orderbok:{buy:{atlas:(g=L().order_book_service.getBuyOrdersByCurrencyAndItem(((A=_.find(l=>l.name=="ATLAS"))==null?void 0:A.mint)??"",i.mint).sort((l,d)=>l.price-d.price).reverse()[0])==null?void 0:g.uiPrice,usdc:(O=L().order_book_service.getBuyOrdersByCurrencyAndItem(((N=_.find(l=>l.name=="USDC"))==null?void 0:N.mint)??"",i.mint).sort((l,d)=>l.price-d.price).reverse()[0])==null?void 0:O.uiPrice},sell:{atlas:(I=L().order_book_service.getSellOrdersByCurrencyAndItem((($=_.find(l=>l.name=="ATLAS"))==null?void 0:$.mint)??"",i.mint).sort((l,d)=>l.price-d.price)[0])==null?void 0:I.uiPrice,usdc:(z=L().order_book_service.getSellOrdersByCurrencyAndItem(((R=_.find(l=>l.name=="USDC"))==null?void 0:R.mint)??"",i.mint).sort((l,d)=>l.price-d.price)[0])==null?void 0:z.uiPrice}}}),Q.value.sort((l,d)=>(l.orderbok.buy.usdc??0)-(d.orderbok.buy.usdc??0));C.value=!1}function M(o,c){return o-c<0?((o-c)/c).toFixed(2)+"%":0}return(o,c)=>(u(),y(de,{class:"row q-pa-sm justify-center"},{default:r(()=>[h("div",null,[a(Z,{align:"justify",modelValue:B.value,"onUpdate:modelValue":c[0]||(c[0]=e=>B.value=e)},{default:r(()=>[(u(!0),D(te,null,re(x(G)().get_itemTypes,e=>(u(),y(H,{name:e,label:e,key:e},null,8,["name","label"]))),128))]),_:1},8,["modelValue"]),C.value?(u(),D("div",fe,[a(T),a(J,{class:"row",color:"primary",size:"3rem"}),a(T)])):(u(),y(K,{key:1,flat:"",bordered:"",title:"Treats",rows:Q.value,columns:V,"row-key":"index",pagination:P.value,"rows-per-page-options":[0],filter:n.value},{top:r(()=>[a(T),a(ie,{filled:"",dense:"",modelValue:n.value,"onUpdate:modelValue":c[1]||(c[1]=e=>n.value=e)},{after:r(()=>[a(le,{size:"sm",name:"fa-solid fa-magnifying-glass"})]),_:1},8,["modelValue"])]),body:r(e=>[a(W,{props:e},{default:r(()=>[a(m,{key:"image",props:e},{default:r(()=>[a(ue,{side:"",class:"row"},{default:r(()=>[a(se,{rounded:"",size:"48px"},{default:r(()=>[a(ne,{height:"50px",fetchpriority:"low",src:e.row.url},null,8,["src"]),a(me,{rarity:e.row.attributes.rarity},null,8,["rarity"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"]),a(m,{key:"name",props:e},{default:r(()=>[h("div",_e,b(e.row.symbol),1),h("div",ge,b(e.row.name),1)]),_:2},1032,["props"]),a(m,{key:"market_atlas",props:e,class:""},{default:r(()=>{var t;return[a(v,{label:"ATLAS",value:(t=e.row.market)==null?void 0:t.atlas},null,8,["value"])]}),_:2},1032,["props"]),a(m,{key:"market_usdc",props:e,class:""},{default:r(()=>{var t;return[a(v,{label:"USDC",value:(t=e.row.market)==null?void 0:t.usdc},null,8,["value"])]}),_:2},1032,["props"]),a(m,{key:"buy_orders_atlas",props:e,class:"buy"},{default:r(()=>{var t;return[a(v,{class:"",label:"ATLAS",value:(t=e.row.orderbok.buy)==null?void 0:t.sell},null,8,["value"])]}),_:2},1032,["props"]),a(m,{key:"buy_orders_usdc",props:e,class:"buy"},{default:r(()=>{var t;return[a(v,{label:"USDC",value:(t=e.row.orderbok.buy)==null?void 0:t.usdc},null,8,["value"])]}),_:2},1032,["props"]),a(m,{key:"spread",class:"market",props:e},{default:r(()=>[a(oe,{class:"text-caption",color:"primary"},{default:r(()=>{var t,f,w,A;return[h("div",pe,[a(j,{currency:x(_).find(g=>g.type==x(U).ATLAS),percentage:M((t=e.row.orderbok.buy)==null?void 0:t.atlas,(f=e.row.orderbok.sell)==null?void 0:f.atlas)},null,8,["currency","percentage"]),a(ce),a(j,{currency:x(_).find(g=>g.type==x(U).USDC),percentage:M((w=e.row.orderbok.buy)==null?void 0:w.usdc,(A=e.row.orderbok.sell)==null?void 0:A.usdc)},null,8,["currency","percentage"])])]}),_:2},1024)]),_:2},1032,["props"]),a(m,{key:"sell_orders_atlas",props:e,class:"sell"},{default:r(()=>{var t;return[a(v,{label:"ATLAS",value:(t=e.row.orderbok.sell)==null?void 0:t.atlas},null,8,["value"])]}),_:2},1032,["props"]),a(m,{key:"sell_orders_usdc",props:e,class:"sell"},{default:r(()=>{var t,f;return[a(v,{label:"USDC",value:(f=(t=e.row.orderbok)==null?void 0:t.sell)==null?void 0:f.usdc},null,8,["value"])]}),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","filter"]))])]),_:1}))}});export{Le as default};
