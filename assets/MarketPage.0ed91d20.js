import{u as dt,a as ht}from"./use-dark.0db3a47c.js";import{Q as He}from"./QResizeObserver.f552e354.js";import{Q as wt,T as Ge,g as Ke,s as Je}from"./QScrollObserver.b29a58a8.js";import{c1 as We,n as g,Y as k,cM as St,b7 as ie,aA as Pt,aw as Ct,ay as xt,ak as L,c9 as kt,be as Ye,ah as Me,aC as ye,aG as It,cp as b,aI as z,$ as Ce,a9 as W,ca as $,d1 as P,Z as R,bc as f,a0 as m,H as I,a7 as c,A as p,ch as ee,a6 as Q,cb as G,_ as we,cl as At,F as zt,aj as qt,ci as ge,cu as $t,cG as be,cX as Rt,c$ as Tt,cQ as Ie,d0 as Te,cV as Xe,cz as Ue,cR as Le,av as Ut,bh as Lt,d2 as Ft,c6 as Be,N as Et,c5 as Dt,d3 as te,D as X,M as Ve,ce as F,cf as ce,d4 as _e,d5 as De,G as _t,bE as ue,co as Ot,cg as Wt,cc as mt,c0 as Mt}from"./index.267ffbe1.js";import{e as Ae,y as Fe,z as Ze,o as Bt,p as et,A as tt,h as Vt,t as Qt,i as le,Q as pt}from"./use-checkbox.8c9c3e98.js";import{Q as nt}from"./QPage.39ef5a25.js";import{C as Se,Q as Pe,a as Y,b as ft,c as Qe}from"./QTr.8f8fca5c.js";import{Q as B}from"./QSeparator.a45ab03a.js";import{Q as vt,a as fe,b as Ne}from"./QTabs.f03ea6ff.js";import{Q as me}from"./QCard.d61dec34.js";import{_ as Nt}from"./PairIcon.6e56c831.js";import{Q as ve,A as je,f as yt}from"./format_address.bed5cccb.js";import{h as $e}from"./handle_confirmation.49b91292.js";import{Q as gt}from"./QImg.91f2523a.js";import"./plugin-vue_export-helper.21dcd24c.js";const it=["vertical","horizontal"],Ee={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},st={prevent:!0,mouse:!0,mouseAllDir:!0},rt=n=>n>=250?50:Math.ceil(n/5);var jt=We({name:"QScrollArea",props:{...dt,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(n,{slots:e,emit:t}){const s=g(!1),r=g(!1),o=g(!1),a={vertical:g(0),horizontal:g(0)},i={vertical:{ref:g(null),position:g(0),size:g(0)},horizontal:{ref:g(null),position:g(0),size:g(0)}},{proxy:u}=Me(),l=ht(n,u.$q);let d=null,v;const h=g(null),w=k(()=>"q-scrollarea"+(l.value===!0?" q-scrollarea--dark":""));i.vertical.percentage=k(()=>{const _=i.vertical.size.value-a.vertical.value;if(_<=0)return 0;const S=Ae(i.vertical.position.value/_,0,1);return Math.round(S*1e4)/1e4}),i.vertical.thumbHidden=k(()=>(n.visible===null?o.value:n.visible)!==!0&&s.value===!1&&r.value===!1||i.vertical.size.value<=a.vertical.value+1),i.vertical.thumbStart=k(()=>i.vertical.percentage.value*(a.vertical.value-i.vertical.thumbSize.value)),i.vertical.thumbSize=k(()=>Math.round(Ae(a.vertical.value*a.vertical.value/i.vertical.size.value,rt(a.vertical.value),a.vertical.value))),i.vertical.style=k(()=>({...n.thumbStyle,...n.verticalThumbStyle,top:`${i.vertical.thumbStart.value}px`,height:`${i.vertical.thumbSize.value}px`})),i.vertical.thumbClass=k(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(i.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),i.vertical.barClass=k(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(i.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),i.horizontal.percentage=k(()=>{const _=i.horizontal.size.value-a.horizontal.value;if(_<=0)return 0;const S=Ae(Math.abs(i.horizontal.position.value)/_,0,1);return Math.round(S*1e4)/1e4}),i.horizontal.thumbHidden=k(()=>(n.visible===null?o.value:n.visible)!==!0&&s.value===!1&&r.value===!1||i.horizontal.size.value<=a.horizontal.value+1),i.horizontal.thumbStart=k(()=>i.horizontal.percentage.value*(a.horizontal.value-i.horizontal.thumbSize.value)),i.horizontal.thumbSize=k(()=>Math.round(Ae(a.horizontal.value*a.horizontal.value/i.horizontal.size.value,rt(a.horizontal.value),a.horizontal.value))),i.horizontal.style=k(()=>({...n.thumbStyle,...n.horizontalThumbStyle,[u.$q.lang.rtl===!0?"right":"left"]:`${i.horizontal.thumbStart.value}px`,width:`${i.horizontal.thumbSize.value}px`})),i.horizontal.thumbClass=k(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(i.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),i.horizontal.barClass=k(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(i.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const q=k(()=>i.vertical.thumbHidden.value===!0&&i.horizontal.thumbHidden.value===!0?n.contentStyle:n.contentActiveStyle),U=[[Ge,_=>{j(_,"vertical")},void 0,{vertical:!0,...st}]],E=[[Ge,_=>{j(_,"horizontal")},void 0,{horizontal:!0,...st}]];function K(){const _={};return it.forEach(S=>{const C=i[S];_[S+"Position"]=C.position.value,_[S+"Percentage"]=C.percentage.value,_[S+"Size"]=C.size.value,_[S+"ContainerSize"]=a[S].value}),_}const N=St(()=>{const _=K();_.ref=u,t("scroll",_)},0);function M(_,S,C){if(it.includes(_)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(_==="vertical"?Ze:Fe)(h.value,S,C)}function D({height:_,width:S}){let C=!1;a.vertical.value!==_&&(a.vertical.value=_,C=!0),a.horizontal.value!==S&&(a.horizontal.value=S,C=!0),C===!0&&Z()}function de({position:_}){let S=!1;i.vertical.position.value!==_.top&&(i.vertical.position.value=_.top,S=!0),i.horizontal.position.value!==_.left&&(i.horizontal.position.value=_.left,S=!0),S===!0&&Z()}function se({height:_,width:S}){i.horizontal.size.value!==S&&(i.horizontal.size.value=S,Z()),i.vertical.size.value!==_&&(i.vertical.size.value=_,Z())}function j(_,S){const C=i[S];if(_.isFirst===!0){if(C.thumbHidden.value===!0)return;v=C.position.value,r.value=!0}else if(r.value!==!0)return;_.isFinal===!0&&(r.value=!1);const J=Ee[S],ae=a[S].value,xe=(C.size.value-ae)/(ae-C.thumbSize.value),ke=_.distance[J.dist],Re=v+(_.direction===J.dir?1:-1)*ke*xe;oe(Re,S)}function ne(_,S){const C=i[S];if(C.thumbHidden.value!==!0){const J=_[Ee[S].offset];if(J<C.thumbStart.value||J>C.thumbStart.value+C.thumbSize.value){const ae=J-C.thumbSize.value/2;oe(ae/a[S].value*C.size.value,S)}C.ref.value!==null&&C.ref.value.dispatchEvent(new MouseEvent(_.type,_))}}function re(_){ne(_,"vertical")}function he(_){ne(_,"horizontal")}function Z(){s.value=!0,d!==null&&clearTimeout(d),d=setTimeout(()=>{d=null,s.value=!1},n.delay),n.onScroll!==void 0&&N()}function oe(_,S){h.value[Ee[S].scroll]=_}let y=null;function A(){y!==null&&clearTimeout(y),y=setTimeout(()=>{y=null,o.value=!0},u.$q.platform.is.ios?50:0)}function O(){y!==null&&(clearTimeout(y),y=null),o.value=!1}let V=null;return ie(()=>u.$q.lang.rtl,_=>{h.value!==null&&Fe(h.value,Math.abs(i.horizontal.position.value)*(_===!0?-1:1))}),Pt(()=>{V={top:i.vertical.position.value,left:i.horizontal.position.value}}),Ct(()=>{if(V===null)return;const _=h.value;_!==null&&(Fe(_,V.left),Ze(_,V.top))}),xt(N.cancel),Object.assign(u,{getScrollTarget:()=>h.value,getScroll:K,getScrollPosition:()=>({top:i.vertical.position.value,left:i.horizontal.position.value}),getScrollPercentage:()=>({top:i.vertical.percentage.value,left:i.horizontal.percentage.value}),setScrollPosition:M,setScrollPercentage(_,S,C){M(_,S*(i[_].size.value-a[_].value)*(_==="horizontal"&&u.$q.lang.rtl===!0?-1:1),C)}}),()=>L("div",{class:w.value,onMouseenter:A,onMouseleave:O},[L("div",{ref:h,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:n.tabindex!==void 0?n.tabindex:void 0},[L("div",{class:"q-scrollarea__content absolute",style:q.value},kt(e.default,[L(He,{debounce:0,onResize:se})])),L(wt,{axis:"both",onScroll:de})]),L(He,{debounce:0,onResize:D}),L("div",{class:i.vertical.barClass.value,style:[n.barStyle,n.verticalBarStyle],"aria-hidden":"true",onMousedown:re}),L("div",{class:i.horizontal.barClass.value,style:[n.barStyle,n.horizontalBarStyle],"aria-hidden":"true",onMousedown:he}),Ye(L("div",{ref:i.vertical.ref,class:i.vertical.thumbClass.value,style:i.vertical.style.value,"aria-hidden":"true"}),U),Ye(L("div",{ref:i.horizontal.ref,class:i.horizontal.thumbClass.value,style:i.horizontal.style.value,"aria-hidden":"true"}),E)])}});function H(n){return n===void 0?"":typeof n=="string"?n:n.message}class Ht{constructor(e,t,s){this._datafeedUrl=e,this._requester=t,this._limitedServerResponse=s}getBars(e,t,s){const r={symbol:e.ticker||"",resolution:t,from:s.from,to:s.to};return s.countBack!==void 0&&(r.countback=s.countBack),e.currency_code!==void 0&&(r.currencyCode=e.currency_code),e.unit_id!==void 0&&(r.unitId=e.unit_id),new Promise(async(o,a)=>{try{const i=await this._requester.sendRequest(this._datafeedUrl,"history",r),u=this._processHistoryResponse(i);this._limitedServerResponse&&await this._processTruncatedResponse(u,r),o(u)}catch(i){if(i instanceof Error||typeof i=="string"){const u=H(i);console.warn(`HistoryProvider: getBars() failed, error=${u}`),a(u)}}})}async _processTruncatedResponse(e,t){let s=e.bars.length;try{for(;this._limitedServerResponse&&this._limitedServerResponse.maxResponseLength>0&&this._limitedServerResponse.maxResponseLength===s&&t.from<t.to;){t.countback&&(t.countback=t.countback-s),this._limitedServerResponse.expectedOrder==="earliestFirst"?t.from=Math.round(e.bars[e.bars.length-1].time/1e3):t.to=Math.round(e.bars[0].time/1e3);const r=await this._requester.sendRequest(this._datafeedUrl,"history",t),o=this._processHistoryResponse(r);s=o.bars.length,this._limitedServerResponse.expectedOrder==="earliestFirst"?(o.bars[0].time===e.bars[e.bars.length-1].time&&o.bars.shift(),e.bars.push(...o.bars)):(o.bars[o.bars.length-1].time===e.bars[0].time&&o.bars.pop(),e.bars.unshift(...o.bars))}}catch(r){if(r instanceof Error||typeof r=="string"){const o=H(r);console.warn(`HistoryProvider: getBars() warning during followup request, error=${o}`)}}}_processHistoryResponse(e){if(e.s!=="ok"&&e.s!=="no_data")throw new Error(e.errmsg);const t=[],s={noData:!1};if(e.s==="no_data")s.noData=!0,s.nextTime=e.nextTime;else{const r=e.v!==void 0,o=e.o!==void 0;for(let a=0;a<e.t.length;++a){const i={time:e.t[a]*1e3,close:parseFloat(e.c[a]),open:parseFloat(e.c[a]),high:parseFloat(e.c[a]),low:parseFloat(e.c[a])};o&&(i.open=parseFloat(e.o[a]),i.high=parseFloat(e.h[a]),i.low=parseFloat(e.l[a])),r&&(i.volume=parseFloat(e.v[a])),t.push(i)}}return{bars:t,meta:s}}}class Gt{constructor(e,t){this._subscribers={},this._requestsPending=0,this._historyProvider=e,setInterval(this._updateData.bind(this),t)}subscribeBars(e,t,s,r){this._subscribers.hasOwnProperty(r)||(this._subscribers[r]={lastBarTime:null,listener:s,resolution:t,symbolInfo:e},`${r}${e.name}${t}`,void 0)}unsubscribeBars(e){delete this._subscribers[e]}_updateData(){if(!(this._requestsPending>0)){this._requestsPending=0;for(const e in this._subscribers)this._requestsPending+=1,this._updateDataForSubscriber(e).then(()=>{this._requestsPending-=1,`${e}${this._requestsPending}`}).catch(t=>{this._requestsPending-=1,`${e}${H(t)}${this._requestsPending}`})}}_updateDataForSubscriber(e){const t=this._subscribers[e],s=parseInt((Date.now()/1e3).toString()),r=s-Kt(t.resolution,10);return this._historyProvider.getBars(t.symbolInfo,t.resolution,{from:r,to:s,countBack:2,firstDataRequest:!1}).then(o=>{this._onSubscriberDataReceived(e,o)})}_onSubscriberDataReceived(e,t){if(!this._subscribers.hasOwnProperty(e))return;const s=t.bars;if(s.length===0)return;const r=s[s.length-1],o=this._subscribers[e];if(o.lastBarTime!==null&&r.time<o.lastBarTime)return;if(o.lastBarTime!==null&&r.time>o.lastBarTime){if(s.length<2)throw new Error("Not enough bars in history for proper pulse update. Need at least 2.");const i=s[s.length-2];o.listener(i)}o.lastBarTime=r.time,o.listener(r)}}function Kt(n,e){let t=0;return n==="D"||n==="1D"?t=e:n==="M"||n==="1M"?t=31*e:n==="W"||n==="1W"?t=7*e:t=e*parseInt(n)/(24*60),t*24*60*60}class Jt{constructor(e){this._subscribers={},this._requestsPending=0,this._timers=null,this._quotesProvider=e}subscribeQuotes(e,t,s,r){this._subscribers[r]={symbols:e,fastSymbols:t,listener:s},this._createTimersIfRequired()}unsubscribeQuotes(e){delete this._subscribers[e],Object.keys(this._subscribers).length===0&&this._destroyTimers()}_createTimersIfRequired(){if(this._timers===null){const e=window.setInterval(this._updateQuotes.bind(this,1),1e4),t=window.setInterval(this._updateQuotes.bind(this,0),6e4);this._timers={fastTimer:e,generalTimer:t}}}_destroyTimers(){this._timers!==null&&(clearInterval(this._timers.fastTimer),clearInterval(this._timers.generalTimer),this._timers=null)}_updateQuotes(e){if(!(this._requestsPending>0))for(const t in this._subscribers){this._requestsPending++;const s=this._subscribers[t];this._quotesProvider.getQuotes(e===1?s.fastSymbols:s.symbols).then(r=>{this._requestsPending--,this._subscribers.hasOwnProperty(t)&&(s.listener(r),`${t}${e}${this._requestsPending}`,void 0)}).catch(r=>{this._requestsPending--,`${t}${e}${H(r)}${this._requestsPending}`})}}}function x(n,e,t,s){const r=n[e];return Array.isArray(r)&&(!s||Array.isArray(r[0]))?r[t]:r}function ze(n,e,t){return n+(e!==void 0?"_%|#|%_"+e:"")+(t!==void 0?"_%|#|%_"+t:"")}class Yt{constructor(e,t,s){this._exchangesList=["NYSE","FOREX","AMEX"],this._symbolsInfo={},this._symbolsList=[],this._datafeedUrl=e,this._datafeedSupportedResolutions=t,this._requester=s,this._readyPromise=this._init(),this._readyPromise.catch(r=>{console.error(`SymbolsStorage: Cannot init, error=${r.toString()}`)})}resolveSymbol(e,t,s){return this._readyPromise.then(()=>{const r=this._symbolsInfo[ze(e,t,s)];return r===void 0?Promise.reject("invalid symbol"):Promise.resolve(r)})}searchSymbols(e,t,s,r){return this._readyPromise.then(()=>{const o=[],a=e.length===0;e=e.toUpperCase();for(const u of this._symbolsList){const l=this._symbolsInfo[u];if(l===void 0||s.length>0&&l.type!==s||t&&t.length>0&&l.exchange!==t)continue;const d=l.name.toUpperCase().indexOf(e),v=l.description.toUpperCase().indexOf(e);if((a||d>=0||v>=0)&&!o.some(w=>w.symbolInfo===l)){const w=d>=0?d:8e3+v;o.push({symbolInfo:l,weight:w})}}const i=o.sort((u,l)=>u.weight-l.weight).slice(0,r).map(u=>{const l=u.symbolInfo;return{symbol:l.name,full_name:l.full_name,description:l.description,exchange:l.exchange,params:[],type:l.type,ticker:l.name}});return Promise.resolve(i)})}_init(){const e=[],t={};for(const s of this._exchangesList)t[s]||(t[s]=!0,e.push(this._requestExchangeData(s)));return Promise.all(e).then(()=>{this._symbolsList.sort()})}_requestExchangeData(e){return new Promise((t,s)=>{this._requester.sendRequest(this._datafeedUrl,"symbol_info",{group:e}).then(r=>{try{this._onExchangeDataReceived(e,r)}catch(o){s(o instanceof Error?o:new Error(`SymbolsStorage: Unexpected exception ${o}`));return}t()}).catch(r=>{`${e}${H(r)}`,t()})})}_onExchangeDataReceived(e,t){let s=0;try{const r=t.symbol.length,o=t.ticker!==void 0;for(;s<r;++s){const a=t.symbol[s],i=x(t,"exchange-listed",s),u=x(t,"exchange-traded",s),l=u+":"+a,d=x(t,"currency-code",s),v=x(t,"unit-id",s),h=o?x(t,"ticker",s):a,w={ticker:h,name:a,base_name:[i+":"+a],full_name:l,listed_exchange:i,exchange:u,currency_code:d,original_currency_code:x(t,"original-currency-code",s),unit_id:v,original_unit_id:x(t,"original-unit-id",s),unit_conversion_types:x(t,"unit-conversion-types",s,!0),description:x(t,"description",s),has_intraday:pe(x(t,"has-intraday",s),!1),visible_plots_set:pe(x(t,"visible-plots-set",s),void 0),minmov:x(t,"minmovement",s)||x(t,"minmov",s)||0,minmove2:x(t,"minmove2",s)||x(t,"minmov2",s),fractional:x(t,"fractional",s),pricescale:x(t,"pricescale",s),type:x(t,"type",s),session:x(t,"session-regular",s),session_holidays:x(t,"session-holidays",s),corrections:x(t,"corrections",s),timezone:x(t,"timezone",s),supported_resolutions:pe(x(t,"supported-resolutions",s,!0),this._datafeedSupportedResolutions),has_daily:pe(x(t,"has-daily",s),!0),intraday_multipliers:pe(x(t,"intraday-multipliers",s,!0),["1","5","15","30","60"]),has_weekly_and_monthly:x(t,"has-weekly-and-monthly",s),has_empty_bars:x(t,"has-empty-bars",s),volume_precision:pe(x(t,"volume-precision",s),0),format:"price"};this._symbolsInfo[h]=w,this._symbolsInfo[a]=w,this._symbolsInfo[l]=w,(d!==void 0||v!==void 0)&&(this._symbolsInfo[ze(h,d,v)]=w,this._symbolsInfo[ze(a,d,v)]=w,this._symbolsInfo[ze(l,d,v)]=w),this._symbolsList.push(a)}}catch(r){throw new Error(`SymbolsStorage: API error when processing exchange ${e} symbol #${s} (${t.symbol[s]}): ${Object(r).message}`)}}}function pe(n,e){return n!==void 0?n:e}function T(n,e,t){const s=n[e];return Array.isArray(s)?s[t]:s}class Xt{constructor(e,t,s,r=10*1e3,o){this._configuration=ot(),this._symbolsStorage=null,this._datafeedURL=e,this._requester=s,this._historyProvider=new Ht(e,this._requester,o),this._quotesProvider=t,this._dataPulseProvider=new Gt(this._historyProvider,r),this._quotesPulseProvider=new Jt(this._quotesProvider),this._configurationReadyPromise=this._requestConfiguration().then(a=>{a===null&&(a=ot()),this._setupWithConfiguration(a)})}onReady(e){this._configurationReadyPromise.then(()=>{e(this._configuration)})}getQuotes(e,t,s){this._quotesProvider.getQuotes(e).then(t).catch(s)}subscribeQuotes(e,t,s,r){this._quotesPulseProvider.subscribeQuotes(e,t,s,r)}unsubscribeQuotes(e){this._quotesPulseProvider.unsubscribeQuotes(e)}getMarks(e,t,s,r,o){if(!this._configuration.supports_marks)return;const a={symbol:e.ticker||"",from:t,to:s,resolution:o};this._send("marks",a).then(i=>{if(!Array.isArray(i)){const u=[];for(let l=0;l<i.id.length;++l)u.push({id:T(i,"id",l),time:T(i,"time",l),color:T(i,"color",l),text:T(i,"text",l),label:T(i,"label",l),labelFontColor:T(i,"labelFontColor",l),minSize:T(i,"minSize",l),borderWidth:T(i,"borderWidth",l),hoveredBorderWidth:T(i,"hoveredBorderWidth",l),imageUrl:T(i,"imageUrl",l),showLabelWhenImageLoaded:T(i,"showLabelWhenImageLoaded",l)});i=u}r(i)}).catch(i=>{`${H(i)}`,r([])})}getTimescaleMarks(e,t,s,r,o){if(!this._configuration.supports_timescale_marks)return;const a={symbol:e.ticker||"",from:t,to:s,resolution:o};this._send("timescale_marks",a).then(i=>{if(!Array.isArray(i)){const u=[];for(let l=0;l<i.id.length;++l)u.push({id:T(i,"id",l),time:T(i,"time",l),color:T(i,"color",l),label:T(i,"label",l),tooltip:T(i,"tooltip",l),imageUrl:T(i,"imageUrl",l),showLabelWhenImageLoaded:T(i,"showLabelWhenImageLoaded",l)});i=u}r(i)}).catch(i=>{`${H(i)}`,r([])})}getServerTime(e){!this._configuration.supports_time||this._send("time").then(t=>{const s=parseInt(t);isNaN(s)||e(s)}).catch(t=>{`${H(t)}`})}searchSymbols(e,t,s,r){if(this._configuration.supports_search){const o={limit:30,query:e.toUpperCase(),type:s,exchange:t};this._send("search",o).then(a=>{if(a.s!==void 0){`${a.errmsg}`,r([]);return}r(a)}).catch(a=>{`${e}${H(a)}`,r([])})}else{if(this._symbolsStorage===null)throw new Error("UdfCompatibleDatafeed: inconsistent configuration (symbols storage)");this._symbolsStorage.searchSymbols(e,t,s,30).then(r).catch(r.bind(null,[]))}}resolveSymbol(e,t,s,r){const o=r&&r.currencyCode,a=r&&r.unitId;function i(u){t(u)}if(this._configuration.supports_group_request){if(this._symbolsStorage===null)throw new Error("UdfCompatibleDatafeed: inconsistent configuration (symbols storage)");this._symbolsStorage.resolveSymbol(e,o,a).then(i).catch(s)}else{const u={symbol:e};o!==void 0&&(u.currencyCode=o),a!==void 0&&(u.unitId=a),this._send("symbols",u).then(l=>{var d,v,h,w,q,U,E,K,N,M,D,de,se,j,ne,re,he,Z,oe,y,A,O,V,_,S,C,J;if(l.s!==void 0)s("unknown_symbol");else{const ae=l.name,xe=(d=l.listed_exchange)!==null&&d!==void 0?d:l["exchange-listed"],ke=(v=l.exchange)!==null&&v!==void 0?v:l["exchange-traded"],Re=(h=l.full_name)!==null&&h!==void 0?h:`${ke}:${ae}`,bt={...l,name:ae,base_name:[xe+":"+ae],full_name:Re,listed_exchange:xe,exchange:ke,currency_code:(w=l.currency_code)!==null&&w!==void 0?w:l["currency-code"],original_currency_code:(q=l.original_currency_code)!==null&&q!==void 0?q:l["original-currency-code"],unit_id:(U=l.unit_id)!==null&&U!==void 0?U:l["unit-id"],original_unit_id:(E=l.original_unit_id)!==null&&E!==void 0?E:l["original-unit-id"],unit_conversion_types:(K=l.unit_conversion_types)!==null&&K!==void 0?K:l["unit-conversion-types"],has_intraday:(M=(N=l.has_intraday)!==null&&N!==void 0?N:l["has-intraday"])!==null&&M!==void 0?M:!1,visible_plots_set:(D=l.visible_plots_set)!==null&&D!==void 0?D:l["visible-plots-set"],minmov:(se=(de=l.minmovement)!==null&&de!==void 0?de:l.minmov)!==null&&se!==void 0?se:0,minmove2:(j=l.minmovement2)!==null&&j!==void 0?j:l.minmove2,session:(ne=l.session)!==null&&ne!==void 0?ne:l["session-regular"],session_holidays:(re=l.session_holidays)!==null&&re!==void 0?re:l["session-holidays"],supported_resolutions:(oe=(Z=(he=l.supported_resolutions)!==null&&he!==void 0?he:l["supported-resolutions"])!==null&&Z!==void 0?Z:this._configuration.supported_resolutions)!==null&&oe!==void 0?oe:[],has_daily:(A=(y=l.has_daily)!==null&&y!==void 0?y:l["has-daily"])!==null&&A!==void 0?A:!0,intraday_multipliers:(V=(O=l.intraday_multipliers)!==null&&O!==void 0?O:l["intraday-multipliers"])!==null&&V!==void 0?V:["1","5","15","30","60"],has_weekly_and_monthly:(_=l.has_weekly_and_monthly)!==null&&_!==void 0?_:l["has-weekly-and-monthly"],has_empty_bars:(S=l.has_empty_bars)!==null&&S!==void 0?S:l["has-empty-bars"],volume_precision:(C=l.volume_precision)!==null&&C!==void 0?C:l["volume-precision"],format:(J=l.format)!==null&&J!==void 0?J:"price"};i(bt)}}).catch(l=>{`${H(l)}`,s("unknown_symbol")})}}getBars(e,t,s,r,o){this._historyProvider.getBars(e,t,s).then(a=>{r(a.bars,a.meta)}).catch(o)}subscribeBars(e,t,s,r,o){this._dataPulseProvider.subscribeBars(e,t,s,r)}unsubscribeBars(e){this._dataPulseProvider.unsubscribeBars(e)}_requestConfiguration(){return this._send("config").catch(e=>(`${H(e)}`,null))}_send(e,t){return this._requester.sendRequest(this._datafeedURL,e,t)}_setupWithConfiguration(e){if(this._configuration=e,e.exchanges===void 0&&(e.exchanges=[]),!e.supports_search&&!e.supports_group_request)throw new Error("Unsupported datafeed configuration. Must either support search, or support group request");(e.supports_group_request||!e.supports_search)&&(this._symbolsStorage=new Yt(this._datafeedURL,e.supported_resolutions||[],this._requester)),`${JSON.stringify(e)}`}}function ot(){return{supports_search:!1,supports_group_request:!0,supported_resolutions:["1","5","15","30","60","1D","1W","1M"],supports_marks:!1,supports_timescale_marks:!1}}class Zt{constructor(e,t){this._datafeedUrl=e,this._requester=t}getQuotes(e){return new Promise((t,s)=>{this._requester.sendRequest(this._datafeedUrl,"quotes",{symbols:e}).then(r=>{r.s==="ok"?t(r.d):s(r.errmsg)}).catch(r=>{const o=H(r);s(`network error: ${o}`)})})}}class en{constructor(e){e&&(this._headers=e)}sendRequest(e,t,s){if(s!==void 0){const o=Object.keys(s);o.length!==0&&(t+="?"),t+=o.map(a=>`${encodeURIComponent(a)}=${encodeURIComponent(s[a].toString())}`).join("&")}const r={credentials:"same-origin"};return this._headers!==void 0&&(r.headers=this._headers),fetch(`${e}/${t}`,r).then(o=>o.text()).then(o=>JSON.parse(o))}}class tn extends Xt{constructor(e,t=10*1e3,s){const r=new en,o=new Zt(e,r);super(e,o,r,t,s)}}function Oe(n,e){const t={...n};for(const s in e)typeof n[s]!="object"||n[s]===null||Array.isArray(n[s])?e[s]!==void 0&&(t[s]=e[s]):t[s]=Oe(n[s],e[s]);return t}const nn={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,news:!1,datawindow:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[],indicators:[],drawingTools:[]}},at=JSON.parse('[{"iso":"ar","dir":"rtl","language":"ar"},{"iso":"pt","dir":"ltr","language":"pt"},{"iso":"ca","dir":"ltr","language":"ca_ES"},{"iso":"cs","dir":"ltr","language":"cs"},{"iso":"de","dir":"ltr","language":"de"},{"iso":"en","dir":"ltr","language":"en"},{"iso":"es","dir":"ltr","language":"es"},{"iso":"fa","dir":"rtl","language":"fa"},{"iso":"fr","dir":"ltr","language":"fr"},{"iso":"he","dir":"rtl","language":"he_IL"},{"iso":"hu","dir":"ltr","language":"hu_HU"},{"iso":"id","dir":"ltr","language":"id_ID"},{"iso":"en","dir":"ltr","language":"en"},{"iso":"it","dir":"ltr","language":"it"},{"iso":"ja","dir":"ltr","language":"ja"},{"iso":"ko","dir":"ltr","language":"ko"},{"iso":"ms","dir":"ltr","language":"ms_MY"},{"iso":"pl","dir":"ltr","language":"pl"},{"iso":"ru","dir":"ltr","language":"ru"},{"iso":"sv","dir":"ltr","language":"sv"},{"iso":"th","dir":"ltr","language":"th"},{"iso":"tr","dir":"ltr","language":"tr"},{"iso":"vi","dir":"ltr","language":"vi"},{"iso":"zh-Hans","dir":"ltr","language":"zh"},{"iso":"zh-Hant","dir":"ltr","language":"zh_TW"},{"iso":"el","dir":"ltr","language":"el"},{"iso":"nl","dir":"ltr","language":"nl_NL"},{"iso":"ro","dir":"ltr","language":"ro"}]');let lt=!1;function sn(){return"CL v26.003 (internal id e793d706 @ 2023-10-05T20:27:44.510Z)"}const rn=class{constructor(n){var e,t;if(this._id=`tradingview_${(1048576*(1+Math.random())|0).toString(16).substring(1)}`,this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!n.datafeed)throw new Error("Datafeed is not defined");!((e=n.overrides)===null||e===void 0)&&e["mainSeriesProperties.priceAxisProperties.lockScale"]&&(console.warn("mainSeriesProperties.priceAxisProperties.lockScale can not be set to true within the widget constructor"),delete n.overrides["mainSeriesProperties.priceAxisProperties.lockScale"]),this._options=Oe(nn,n),((t=this._options.theme)!==null&&t!==void 0?t:"light").toLowerCase()==="dark"&&this._options.loading_screen===void 0&&(this._options.loading_screen={backgroundColor:"#131722"}),this._options.debug&&(lt||(lt=!0,console.log("Using CL v26.003 (internal id e793d706 @ 2023-10-05T20:27:44.510Z)"))),this._create()}setDebugMode(n){this._innerAPI().setDebugMode(n)}onChartReady(n){this._ready?n.call(this):this._readyHandlers.push(n)}headerReady(){return this._innerWindowLoaded.then(()=>this._innerWindow().headerReady())}onGrayedObjectClicked(n){this._doWhenInnerApiLoaded(e=>{e.onGrayedObjectClicked(n)})}onShortcut(n,e){this._doWhenInnerWindowLoaded(t=>{t.createShortcutAction(n,e)})}subscribe(n,e){this._doWhenInnerApiLoaded(t=>{t.subscribe(n,e)})}unsubscribe(n,e){this._doWhenInnerApiLoaded(t=>{t.unsubscribe(n,e)})}chart(n){return this._innerAPI().chart(n)}getLanguage(){return this._options.locale}setSymbol(n,e,t){this._innerAPI().changeSymbol(n,e,t)}remove(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)}closePopupsAndDialogs(){this._doWhenInnerApiLoaded(n=>{n.closePopupsAndDialogs()})}selectLineTool(n,e){this._innerAPI().selectLineTool(n,e)}selectedLineTool(){return this._innerAPI().selectedLineTool()}save(n){this._innerAPI().saveChart(n)}load(n,e){this._innerAPI().loadChart({json:n,extendedData:e})}getSavedCharts(n){this._innerAPI().getSavedCharts(n)}loadChartFromServer(n){this._innerAPI().loadChartFromServer(n)}saveChartToServer(n,e,t){this._innerAPI().saveChartToServer(n,e,t)}removeChartFromServer(n,e){this._innerAPI().removeChartFromServer(n,e)}onContextMenu(n){this._doWhenInnerApiLoaded(e=>{e.onContextMenu(n)})}createButton(n){return this._innerWindow().createButton(n)}createDropdown(n){return this._innerWindow().createDropdown(n)}showNoticeDialog(n){this._doWhenInnerApiLoaded(e=>{e.showNoticeDialog(n)})}showConfirmDialog(n){this._doWhenInnerApiLoaded(e=>{e.showConfirmDialog(n)})}showLoadChartDialog(){this._innerAPI().showLoadChartDialog()}showSaveAsChartDialog(){this._innerAPI().showSaveAsChartDialog()}symbolInterval(){return this._innerAPI().getSymbolInterval()}mainSeriesPriceFormatter(){return this._innerAPI().mainSeriesPriceFormatter()}getIntervals(){return this._innerAPI().getIntervals()}getStudiesList(){return this._innerAPI().getStudiesList()}getStudyInputs(n){return this._innerAPI().getStudyInputs(n)}getStudyStyles(n){return this._innerAPI().getStudyStyles(n)}addCustomCSSFile(n){this._innerWindow().addCustomCSSFile(n)}applyOverrides(n){this._options=Oe(this._options,{overrides:n}),this._doWhenInnerWindowLoaded(e=>{e.applyOverrides(n)})}applyStudiesOverrides(n){this._doWhenInnerWindowLoaded(e=>{e.applyStudiesOverrides(n)})}watchList(){return this._innerAPI().watchlist()}news(){return this._innerAPI().news()}widgetbar(){return this._innerAPI().widgetbar()}activeChart(){return this._innerAPI().activeChart()}activeChartIndex(){return this._innerAPI().activeChartIndex()}setActiveChart(n){return this._innerAPI().setActiveChart(n)}chartsCount(){return this._innerAPI().chartsCount()}layout(){return this._innerAPI().layout()}setLayout(n){this._innerAPI().setLayout(n)}layoutName(){return this._innerAPI().layoutName()}changeTheme(n,e){return this._innerWindow().changeTheme(n,e)}getTheme(){return this._innerWindow().getTheme()}takeScreenshot(){this._doWhenInnerApiLoaded(n=>{n.takeScreenshot()})}lockAllDrawingTools(){return this._innerAPI().lockAllDrawingTools()}hideAllDrawingTools(){return this._innerAPI().hideAllDrawingTools()}drawOnAllCharts(n){this._innerAPI().drawOnAllCharts(n)}magnetEnabled(){return this._innerAPI().magnetEnabled()}magnetMode(){return this._innerAPI().magnetMode()}undoRedoState(){return this._innerAPI().undoRedoState()}setIntervalLinkingEnabled(n){this._innerAPI().setIntervalLinkingEnabled(n)}setDateRangeLinkingEnabled(n){this._innerAPI().setDateRangeLinkingEnabled(n)}setTimeFrame(n){this._innerAPI().setTimeFrame(n)}symbolSync(){return this._innerAPI().symbolSync()}intervalSync(){return this._innerAPI().intervalSync()}crosshairSync(){return this._innerAPI().crosshairSync()}timeSync(){return this._innerAPI().timeSync()}dateRangeSync(){return this._innerAPI().dateRangeSync()}setFeatureEnabled(n,e){this._innerAPI().setFeatureEnabled(n,e)}getAllFeatures(){return this._innerWindow().getAllFeatures()}clearUndoHistory(){return this._innerAPI().clearUndoHistory()}undo(){return this._innerAPI().undo()}redo(){return this._innerAPI().redo()}startFullscreen(){this._innerAPI().startFullscreen()}exitFullscreen(){this._innerAPI().exitFullscreen()}takeClientScreenshot(n){return this._innerAPI().takeClientScreenshot(n)}navigationButtonsVisibility(){return this._innerWindow().getNavigationButtonsVisibility()}paneButtonsVisibility(){return this._innerWindow().getPaneButtonsVisibility()}dateFormat(){return this._innerWindow().getDateFormat()}timeHoursFormat(){return this._innerWindow().getTimeHoursFormat()}currencyAndUnitVisibility(){return this._innerWindow().getCurrencyAndUnitVisibility()}supportedChartTypes(){return this._innerAPI().supportedChartTypes()}watermark(){return this._innerAPI().watermark()}customSymbolStatus(){return this._innerWindow().customSymbolStatus()}setCSSCustomProperty(n,e){if(n.startsWith("--")===!1)throw new Error("customPropertyName should begin with a double hyphen");this._innerWindow().document.body.style.setProperty(n,e)}getCSSCustomPropertyValue(n){if(n.startsWith("--")===!1)throw new Error("customPropertyName should begin with a double hyphen");const e=this._innerWindow().document.body,t=e.style.getPropertyValue(n);return t||getComputedStyle(e).getPropertyValue(n)}linking(){return this._innerAPI().linking}_innerAPI(){return this._innerWindow().tradingViewApi}_innerWindow(){return this._iFrame.contentWindow}_doWhenInnerWindowLoaded(n){this._ready?n(this._innerWindow()):this._innerWindowLoaded.then(()=>{n(this._innerWindow())})}_doWhenInnerApiLoaded(n){this._doWhenInnerWindowLoaded(e=>{e.doWhenApiIsReady(()=>n(this._innerAPI()))})}_autoResizeChart(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px",on&&setTimeout(()=>{this._iFrame.style.height=window.innerHeight+"px"},30))}_create(){var n,e;const t=(e=(n=this._options.enabled_features)===null||n===void 0?void 0:n.includes("iframe_loading_compatibility_mode"))!==null&&e!==void 0&&e,[s,r]=this._render(!t),o=this._options.container,a=typeof o=="string"?document.getElementById(o):o;if(a===null)throw new Error(`There is no such element - #${this._options.container}`);a.innerHTML=s,this._iFrame=a.querySelector(`#${this._id}`);const i=this._iFrame;t&&(i.contentWindow?(i.contentWindow.document.open(),i.contentWindow.document.write(r),i.contentWindow.document.close()):console.warn("Unable to locate contentWindow for the created iframe. Please try disabling the `iframe_loading_compatibility_mode` featureset.")),(this._options.autosize||this._options.fullscreen)&&(i.style.width="100%",this._options.fullscreen||(i.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise(u=>{const l=()=>{i.removeEventListener("load",l,!1),u()};i.addEventListener("load",l,!1)}),this._innerWindowLoaded.then(()=>{try{this._innerWindow().widgetReady(()=>{this._ready=!0;for(const u of this._readyHandlers)try{u.call(this)}catch(l){console.error(l)}this._innerWindow().initializationFinished()})}catch(u){if(u instanceof Error&&/widgetReady is not a function/.test(u.message))throw new Error(`There was an error when loading the library. Usually this error means the library failed to load its static files. Check that the library files are available at ${window.location.host}/${this._options.library_path||""} or correct the library_path option.`)}})}_render(n){const e=window;if(e[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters||this._options.customFormatters,brokerFactory:this._options.broker_factory||this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,rss_news_title:this._options.rss_news_title,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter,additionalSymbolInfoFields:this._options.additional_symbol_info_fields,headerWidgetButtonsMode:this._options.header_widget_buttons_mode,customTranslateFunction:this._options.custom_translate_function,symbolSearchComplete:this._options.symbol_search_complete,contextMenu:this._options.context_menu,settingsOverrides:this._options.settings_overrides,timeframe:this._options.timeframe,customTimezones:this._options.custom_timezones},this._options.saved_data)e[this._id].chartContent={json:this._options.saved_data},this._options.saved_data_meta_info&&(e[this._id].chartContentExtendedData=this._options.saved_data_meta_info);else if(!this._options.load_last_chart&&!this._options.symbol)throw new Error("Symbol is not defined: either 'symbol' or 'load_last_chart' option must be set");if(this._options.library_path&&!this._options.library_path.endsWith("/")&&console.warn("library_path option should contain a trailing forward slash"),this._options.locale){const o=encodeURIComponent(this._options.locale);at.findIndex(a=>a.language===o)>=0||(console.warn("locale isn't supported. Using default of `en`."),this._options.locale="en")}const t=function(o,a){var i;const u=new URL(`${o||""}`,location.href).href,l=JSON.parse('["bundles/runtime.0809a655c13b333b6a76.js","bundles/__LANG__.5008.e5d7d914577969582fa4.js","bundles/3515.2f722d33cebe31a154b1.css","bundles/9401.4792ed983286dcafa79b.js","bundles/library.847f247511d3f9997d72.js"]'),d=encodeURIComponent(a),v=(i=at.find(U=>U.language===d))!==null&&i!==void 0?i:{iso:"en",dir:"ltr"},h=`lang="${v.iso}" dir="${v.dir}"`;return`<!DOCTYPE html><html ${(q={bundles:`
${function(U,E,K){if(U===void 0)return"";const N=[],M=[];for(const D of U)D.endsWith(".js")?N.push(`<script defer crossorigin="anonymous" src="${D.replace("__LANG__",K)}"><\/script>`):D.endsWith(".css")&&M.push(`<link type="text/css" href="${E?D.replace(/\.css$/i,".rtl.css"):D}" rel="stylesheet"/>`);return[...N,...M].join(`
`)}(l,v.dir==="rtl",d)}
`,localeLanguage:d,htmlAttrs:h,libraryPath:u}).htmlAttrs}><head><base href="${q.libraryPath}"><meta charset="utf-8"><script>window===window.parent&&(location.href="about:blank")<\/script> ${q.bundles} </head><body class="chart-page unselectable on-widget"><div class="loading-indicator" id="loading-indicator"></div><script>var JSServer={},__initialEnabledFeaturesets=["charting_library"]<\/script><script>(function() {
		window.urlParams = (function () {
			var match,
				pl	 = /\\+/g,  // Regex for replacing addition symbol with a space
				search = /([^&=]+)=?([^&]*)/g,
				decode = function (s) { return decodeURIComponent(s.replace(pl, ' ')).replace(/<\\/?[^>]+(>|$)/g, ''); },
				query = function() {
					// We don't use hash on the url because: safari 13 throws an error if you attempt this
					// on a blob, and safari 14 will strip hash from blob urls.
					if (frameElement && frameElement.dataset.widgetOptions) {
						return frameElement.dataset.widgetOptions;
					} else {
						throw "Unexpected use of this page";
					}
				}(),
				result = {};

			while (match = search.exec(query)) {
				result[decode(match[1])] = decode(match[2]);
			}

			var additionalSettingsObject = window.parent[result.uid];

			var customObjectNames = ['datafeed', 'customFormatters', 'brokerFactory', 'save_load_adapter', 'customTranslateFunction', 'contextMenu'];

			for (var p in additionalSettingsObject) {
				if (customObjectNames.indexOf(p) === -1) {
					result[p] = JSON.stringify(additionalSettingsObject[p]);
				}
			}

			return result;
		})();

		window.locale = urlParams.locale;
		window.language = urlParams.locale; // a very big attention needed here
		window.customTranslateFunction = window.parent[urlParams.uid].customTranslateFunction;

		window.addCustomCSSFile = function(href) {
			var link = document.createElement('link');
			link.setAttribute('type', 'text/css');
			link.setAttribute('rel', 'stylesheet');
			link.setAttribute('href', href);
			link.setAttribute('cross-origin', 'anonymous');

			window.loadedCustomCss = new Promise((resolve) => {
				link.onload = resolve;
				link.onerror = resolve;
			});
			document.body.appendChild(link);
		};

		window.loadedCustomCss = Promise.resolve();
		if (!!urlParams.customCSS) {
			window.addCustomCSSFile(urlParams.customCSS);
		}

		var loadingScreenParams = {};

		if (typeof urlParams.loading_screen === 'string') {
			try {
				loadingScreenParams = JSON.parse(urlParams.loading_screen);
			} catch(e) {}
		}

		var loadingIndicatorElement = document.getElementById('loading-indicator');

		if (loadingScreenParams.backgroundColor) {
			loadingIndicatorElement.style = 'background-color: ' + loadingScreenParams.backgroundColor;
		}

		!function(){"use strict";var t,e=new WeakMap;!function(t){t[t.Element=1]="Element",t[t.Document=9]="Document"}(t||(t={}));var n={mini:"xsmall",xsmall:"xsmall",small:"small",medium:"medium",large:"large"};var i,s,o,r,l,c=(void 0===l&&(l=""),i='<div class="tv-spinner '.concat(l,'" role="progressbar"></div>'),o=function(n,i){var s,o;return s=null==i?document.documentElement:i.nodeType===t.Document?i.documentElement:i,e&&(o=e.get(s)),o||((o=s.ownerDocument.createRange()).selectNodeContents(s),e&&e.set(s,o)),o.createContextualFragment(n)}(i,s),null!==(r=o.firstElementChild)&&o.removeChild(r),r),a=function(){function t(t){this._shown=!1,this._el=c.cloneNode(!0),this.setSize(n[t||"large"])}return t.prototype.spin=function(t){return this._el.classList.add("tv-spinner--shown"),void 0===this._container&&(this._container=t,void 0!==t&&t.appendChild(this._el)),this._shown=!0,this},t.prototype.stop=function(t){return t&&void 0!==this._container&&this._container.removeChild(this._el),this._el&&this._el.classList.remove("tv-spinner--shown"),this._shown=!1,this},t.prototype.setStyle=function(t){var e=this;return Object.keys(t).forEach((function(n){var i=t[n];void 0!==i&&e._el.style.setProperty(n,i)})),this},t.prototype.style=function(){return this._el.style},t.prototype.setSize=function(t){var e=void 0!==t?"tv-spinner--size_".concat(t):"";return this._el.className="tv-spinner ".concat(e," ").concat(this._shown?"tv-spinner--shown":""),this},t.prototype.getEl=function(){return this._el},t.prototype.destroy=function(){this.stop(),delete this._el,delete this._container},t}();window.Spinner=a}();


		var spinnerColor = (loadingScreenParams.foregroundColor) ? loadingScreenParams.foregroundColor : undefined;

		var loadingSpinner = new Spinner('large').setStyle({
			'--tv-spinner-color': spinnerColor,
			zIndex: String(2e9),
		});
		loadingSpinner.getEl().classList.add('spinner');
		loadingSpinner.spin(loadingIndicatorElement);
	})();<\/script></body></html>`;var q}(this._options.library_path||"",this._options.locale);let s=new URL("about:blank");if(n){const o=new Blob([t],{type:"text/html"}),a=URL.createObjectURL(o);s=new URL(a)}const r="symbol="+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.custom_font_family?"&customFontFamily="+encodeURIComponent(this._options.custom_font_family):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.compare_symbols?"&compareSymbols="+encodeURIComponent(JSON.stringify(this._options.compare_symbols)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"")+(this._options.header_widget_buttons_mode?"&header_widget_buttons_mode="+encodeURIComponent(String(this._options.header_widget_buttons_mode)):"")+(this._options.time_scale?"&time_scale="+encodeURIComponent(JSON.stringify(this._options.time_scale)):"");return[`<iframe
		id="${this._id}" name="${this._id}" src="${s.href}" data-widget-options="${r}"
		${this._options.autosize||this._options.fullscreen?"":`width="${this._options.width}" height="${this._options.height}"`} title="Financial Chart" frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;">
	</iframe>`,t]}};typeof window<"u"&&(window.TradingView=window.TradingView||{},window.TradingView.version=sn);const on=!(typeof window>"u"||!window.navigator||!window.navigator.userAgent)&&window.navigator.userAgent.includes("CriOS");const an={__name:"TVChartContainer",props:{symbol:{default:"PX4USDC",type:String},interval:{default:"3D",type:String},datafeedUrl:{default:"https://api.skullnbones.xyz/udf",type:String},libraryPath:{default:"/charting_library/",type:String},chartsStorageUrl:{default:"https://saveload.tradingview.com",type:String},chartsStorageApiVersion:{default:"1.1",type:String},clientId:{default:"tradingview.com",type:String},userId:{default:"public_user_id",type:String},fullscreen:{default:!1,type:Boolean},autosize:{default:!0,type:Boolean},studiesOverrides:{type:Object},theme:{type:String,default:"dark"}},setup(n){function e(){const i=new RegExp("[\\?&]lang=([^&#]*)").exec(window.location.search);return i===null?null:decodeURIComponent(i[1].replace(/\+/g," "))}const t=n,s=g();let r;function o(){const a={theme:t.theme,symbol:b().selected_symbol,datafeed:new tn(t.datafeedUrl),interval:t.interval,container:s.value,library_path:t.libraryPath,locale:e()||"en",disabled_features:["use_localstorage_for_settings","edit_buttons_in_legend","left_toolbar","timeframes_toolbar","header_symbol_search","header_compare","header_saveload","header_settings","study_templates"],enabled_features:[],charts_storage_url:t.chartsStorageUrl,charts_storage_api_version:t.chartsStorageApiVersion,client_id:t.clientId,user_id:t.userId,fullscreen:t.fullscreen,autosize:t.autosize,studies_overrides:t.studiesOverrides,overrides:{"paneProperties.background":"#16213e","scalesProperties.textColor":"#FFF","paneProperties.backgroundType":"solid","mainSeriesProperties.style":3}};r=new rn(a),r.onChartReady(()=>{r.headerReady().then(()=>{r.activeChart().createStudy("Volume",!0)})})}return ye(()=>{o()}),It(()=>{r!==null&&(r.remove(),r=null)}),ie(()=>b().selected_symbol,()=>{r.remove(),r=null,o()}),(a,i)=>(z(),Ce("div",{class:"TVChartContainer",ref_key:"chartContainer",ref:s},null,512))}},ln={class:"col q-pr-xs"},un=W({__name:"MarketPiriceElement",setup(n){const e=g([{price:"0"}]);return ye(async()=>{var t,s;e.value[0].price=0,e.value=await $().api_client.trades.getTrades((t=P().nfts.find(r=>r.symbol==b().selected_symbol))==null?void 0:t.mint_pair,(s=P().nfts.find(r=>r.symbol==b().selected_symbol))==null?void 0:s.mint_asset,1)}),ie(()=>b().selected_symbol,async()=>{var t,s;e.value[0].price=0,e.value=await $().api_client.trades.getTrades((t=P().nfts.find(r=>r.symbol==b().selected_symbol))==null?void 0:t.mint_pair,(s=P().nfts.find(r=>r.symbol==b().selected_symbol))==null?void 0:s.mint_asset,1)}),(t,s)=>{var r;return(r=e.value)!=null&&r.length?(z(),R(G,{key:0,color:"primary",class:"row items-center"},{default:f(()=>{var o;return[m("div",ln,I(((o=e.value[0])==null?void 0:o.price)??0),1),c(Se,{style:{height:"20px",width:"20px"},currency:p(ee).find(a=>{var i;return a.mint==((i=p(P)().nfts.find(u=>u.symbol==p(b)().selected_symbol))==null?void 0:i.mint_pair)})},null,8,["currency"]),c(ve,{"transition-show":"scale","transition-hide":"scale"},{default:f(()=>[Q(" Last traded price ")]),_:1})]}),_:1})):we("",!0)}}}),cn={class:"row items-center"},dn={class:"text-h6"},hn={class:"text-subtitle1"},_n={class:"row"},mn=["onClick"],pn={class:"q-gutter-x-sm row",style:{width:"400px"}},fn={class:"q-mr-md"},vn={class:"q-mr-md"},yn=W({__name:"MarketHeader",setup(n){g(null);const e=g(P().raw);function t(r,o){if(r===""){o(()=>{e.value=P().raw});return}o(()=>{const a=r.toLowerCase();e.value=P().raw.filter(i=>i.name.toLowerCase().includes(a)||i.symbol.toLowerCase().includes(a))})}function s(r,o){b().selected_symbol=r+o}return(r,o)=>(z(),R(me,{class:"row items-center q-px-sm",flat:"",square:""},{default:f(()=>{var a;return[m("div",cn,[c(Nt,{size:"lg",asset_image_url:(a=p(P)().nfts.find(i=>i.symbol==p(b)().selected_symbol))==null?void 0:a.img_path,currency:p(ee).find(i=>{var u;return i.mint==((u=p(P)().nfts.find(l=>l.symbol==p(b)().selected_symbol))==null?void 0:u.mint_pair)})},null,8,["asset_image_url","currency"]),c(B,{vertical:"",class:"q-ma-sm"}),m("div",null,[m("div",dn,I(p(b)().selected_symbol?p(b)().selected_symbol:"*none*"),1),m("div",hn,I(p(b)().selected_symbol?p(P)().nfts.find(i=>i.symbol==p(b)().selected_symbol).name:"*none*"),1)])]),c(Vt,{square:"",dense:"",filled:"",class:"col text-h6 q-ya-xs q-ml-md","use-input":"","input-debounce":"0",onFilter:t,options:e.value},{append:f(()=>[c(At,{name:"fa-solid fa-magnifying-glass"})]),option:f(i=>[c(Bt,zt(qt(i.itemProps)),{default:f(()=>[c(et,{avatar:""},{default:f(()=>{var u;return[c(je,{size:"xl",url:(u=p(P)().nfts.find(l=>l.mint_asset==i.opt.mint))==null?void 0:u.img_path},null,8,["url"])]}),_:2},1024),c(et,null,{default:f(()=>[m("div",_n,[m("div",{class:"col",onClick:u=>s(i.opt.symbol,p(ee).find(l=>l.type==p(ge).USDC).symbol)},[c(tt,null,{default:f(()=>[Q(I(i.opt.name),1)]),_:2},1024),c(tt,{caption:""},{default:f(()=>[Q(I(i.opt.symbol),1)]),_:2},1024)],8,mn),m("div",pn,[c(G,{onClick:u=>s(i.opt.symbol,p(ee).find(l=>l.type==p(ge).USDC).symbol),class:"col items-end justify-end",color:"secondary"},{default:f(()=>[m("div",fn,I(i.opt.symbol)+"USDC",1),c(Se,{currency:p(ee).find(u=>u.type==p(ge).USDC)},null,8,["currency"])]),_:2},1032,["onClick"]),c(G,{onClick:u=>s(i.opt.symbol,p(ee).find(l=>l.type==p(ge).ATLAS).symbol),class:"col items-end justify-end",color:"secondary"},{default:f(()=>[m("div",vn,I(i.opt.symbol)+"ATLAS",1),c(Se,{currency:p(ee).find(u=>u.type==p(ge).ATLAS)},null,8,["currency"])]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1040)]),_:1},8,["options"]),c(vt),c(B,{class:"q-ma-md",vertical:""}),c(un,{class:"q-card"}),c(B,{class:"q-ma-md",vertical:""}),c(G,{color:"secondary",flat:"",icon:"fa-solid fa-repeat",onClick:o[0]||(o[0]=i=>p(b)().switch_currency())}),c(B)]}),_:1}))}});function gn(n){const e=[.06,6,50];return typeof n=="string"&&n.length&&n.split(":").forEach((t,s)=>{const r=parseFloat(t);r&&(e[s]=r)}),e}var bn=$t({name:"touch-swipe",beforeMount(n,{value:e,arg:t,modifiers:s}){if(s.mouse!==!0&&be.has.touch!==!0)return;const r=s.mouseCapture===!0?"Capture":"",o={handler:e,sensitivity:gn(t),direction:Ke(s),noop:Rt,mouseStart(a){Je(a,o)&&Tt(a)&&(Ie(o,"temp",[[document,"mousemove","move",`notPassive${r}`],[document,"mouseup","end","notPassiveCapture"]]),o.start(a,!0))},touchStart(a){if(Je(a,o)){const i=a.target;Ie(o,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","notPassiveCapture"],[i,"touchend","end","notPassiveCapture"]]),o.start(a)}},start(a,i){be.is.firefox===!0&&Te(n,!0);const u=Xe(a);o.event={x:u.left,y:u.top,time:Date.now(),mouse:i===!0,dir:!1}},move(a){if(o.event===void 0)return;if(o.event.dir!==!1){Ue(a);return}const i=Date.now()-o.event.time;if(i===0)return;const u=Xe(a),l=u.left-o.event.x,d=Math.abs(l),v=u.top-o.event.y,h=Math.abs(v);if(o.event.mouse!==!0){if(d<o.sensitivity[1]&&h<o.sensitivity[1]){o.end(a);return}}else if(window.getSelection().toString()!==""){o.end(a);return}else if(d<o.sensitivity[2]&&h<o.sensitivity[2])return;const w=d/i,q=h/i;o.direction.vertical===!0&&d<h&&d<100&&q>o.sensitivity[0]&&(o.event.dir=v<0?"up":"down"),o.direction.horizontal===!0&&d>h&&h<100&&w>o.sensitivity[0]&&(o.event.dir=l<0?"left":"right"),o.direction.up===!0&&d<h&&v<0&&d<100&&q>o.sensitivity[0]&&(o.event.dir="up"),o.direction.down===!0&&d<h&&v>0&&d<100&&q>o.sensitivity[0]&&(o.event.dir="down"),o.direction.left===!0&&d>h&&l<0&&h<100&&w>o.sensitivity[0]&&(o.event.dir="left"),o.direction.right===!0&&d>h&&l>0&&h<100&&w>o.sensitivity[0]&&(o.event.dir="right"),o.event.dir!==!1?(Ue(a),o.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Qt(),o.styleCleanup=U=>{o.styleCleanup=void 0,document.body.classList.remove("non-selectable");const E=()=>{document.body.classList.remove("no-pointer-events--children")};U===!0?setTimeout(E,50):E()}),o.handler({evt:a,touch:o.event.mouse!==!0,mouse:o.event.mouse,direction:o.event.dir,duration:i,distance:{x:d,y:h}})):o.end(a)},end(a){o.event!==void 0&&(Le(o,"temp"),be.is.firefox===!0&&Te(n,!1),o.styleCleanup!==void 0&&o.styleCleanup(!0),a!==void 0&&o.event.dir!==!1&&Ue(a),o.event=void 0)}};if(n.__qtouchswipe=o,s.mouse===!0){const a=s.mouseCapture===!0||s.mousecapture===!0?"Capture":"";Ie(o,"main",[[n,"mousedown","mouseStart",`passive${a}`]])}be.has.touch===!0&&Ie(o,"main",[[n,"touchstart","touchStart",`passive${s.capture===!0?"Capture":""}`],[n,"touchmove","noop","notPassiveCapture"]])},updated(n,e){const t=n.__qtouchswipe;t!==void 0&&(e.oldValue!==e.value&&(typeof e.value!="function"&&t.end(),t.handler=e.value),t.direction=Ke(e.modifiers))},beforeUnmount(n){const e=n.__qtouchswipe;e!==void 0&&(Le(e,"main"),Le(e,"temp"),be.is.firefox===!0&&Te(n,!1),e.styleCleanup!==void 0&&e.styleCleanup(),delete n.__qtouchswipe)}});function wn(){const n=new Map;return{getCache:function(e,t){return n[e]===void 0?n[e]=t:n[e]},getCacheWithFn:function(e,t){return n[e]===void 0?n[e]=t():n[e]}}}const Sn={name:{required:!0},disable:Boolean},ut={setup(n,{slots:e}){return()=>L("div",{class:"q-panel scroll",role:"tabpanel"},Be(e.default))}},Pn={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Cn=["update:modelValue","beforeTransition","transition"];function xn(){const{props:n,emit:e,proxy:t}=Me(),{getCacheWithFn:s}=wn();let r,o;const a=g(null),i=g(null);function u(y){const A=n.vertical===!0?"up":"left";j((t.$q.lang.rtl===!0?-1:1)*(y.direction===A?1:-1))}const l=k(()=>[[bn,u,void 0,{horizontal:n.vertical!==!0,vertical:n.vertical,mouse:!0}]]),d=k(()=>n.transitionPrev||`slide-${n.vertical===!0?"down":"right"}`),v=k(()=>n.transitionNext||`slide-${n.vertical===!0?"up":"left"}`),h=k(()=>`--q-transition-duration: ${n.transitionDuration}ms`),w=k(()=>typeof n.modelValue=="string"||typeof n.modelValue=="number"?n.modelValue:String(n.modelValue)),q=k(()=>({include:n.keepAliveInclude,exclude:n.keepAliveExclude,max:n.keepAliveMax})),U=k(()=>n.keepAliveInclude!==void 0||n.keepAliveExclude!==void 0);ie(()=>n.modelValue,(y,A)=>{const O=M(y)===!0?D(y):-1;o!==!0&&se(O===-1?0:O<D(A)?-1:1),a.value!==O&&(a.value=O,e("beforeTransition",y,A),Ut(()=>{e("transition",y,A)}))});function E(){j(1)}function K(){j(-1)}function N(y){e("update:modelValue",y)}function M(y){return y!=null&&y!==""}function D(y){return r.findIndex(A=>A.props.name===y&&A.props.disable!==""&&A.props.disable!==!0)}function de(){return r.filter(y=>y.props.disable!==""&&y.props.disable!==!0)}function se(y){const A=y!==0&&n.animated===!0&&a.value!==-1?"q-transition--"+(y===-1?d.value:v.value):null;i.value!==A&&(i.value=A)}function j(y,A=a.value){let O=A+y;for(;O>-1&&O<r.length;){const V=r[O];if(V!==void 0&&V.props.disable!==""&&V.props.disable!==!0){se(y),o=!0,e("update:modelValue",V.props.name),setTimeout(()=>{o=!1});return}O+=y}n.infinite===!0&&r.length!==0&&A!==-1&&A!==r.length&&j(y,y===-1?r.length:-1)}function ne(){const y=D(n.modelValue);return a.value!==y&&(a.value=y),!0}function re(){const y=M(n.modelValue)===!0&&ne()&&r[a.value];return n.keepAlive===!0?[L(Et,q.value,[L(U.value===!0?s(w.value,()=>({...ut,name:w.value})):ut,{key:w.value,style:h.value},()=>y)])]:[L("div",{class:"q-panel scroll",style:h.value,key:w.value,role:"tabpanel"},[y])]}function he(){if(r.length!==0)return n.animated===!0?[L(Lt,{name:i.value},re)]:re()}function Z(y){return r=Ft(Be(y.default,[])).filter(A=>A.props!==null&&A.props.slot===void 0&&M(A.props.name)===!0),r.length}function oe(){return r}return Object.assign(t,{next:E,previous:K,goTo:N}),{panelIndex:a,panelDirectives:l,updatePanelsList:Z,updatePanelIndex:ne,getPanelContent:he,getEnabledPanels:de,getPanels:oe,isValidPanelName:M,keepAliveProps:q,needsUniqueKeepAliveWrapper:U,goToPanelByOffset:j,goToPanel:N,nextPanel:E,previousPanel:K}}var ct=We({name:"QTabPanel",props:Sn,setup(n,{slots:e}){return()=>L("div",{class:"q-tab-panel",role:"tabpanel"},Be(e.default))}}),kn=We({name:"QTabPanels",props:{...Pn,...dt},emits:Cn,setup(n,{slots:e}){const t=Me(),s=ht(n,t.proxy.$q),{updatePanelsList:r,getPanelContent:o,panelDirectives:a}=xn(),i=k(()=>"q-tab-panels q-panel-parent"+(s.value===!0?" q-tab-panels--dark q-dark":""));return()=>(r(e),Dt("div",{class:i.value},o(),"pan",n.swipeable,()=>a.value))}});const In={class:"q-pa-sm q-gutter-y-xs"},An={class:"text-overline row"},zn=m("div",{class:"text-subtitle2"},"Fill Order:",-1),qn={class:"text-orange"},$n=W({__name:"MarketOrderFillOption",props:{order:{type:te.Order}},setup(n){const e=n,t=k(()=>{var a;return(a=e.order)==null?void 0:a.uiPrice}),s=k(()=>{var a;return(a=e.order)==null?void 0:a.orderQtyRemaining}),r=g(s.value);async function o(){if(!F().publicKey.value){ce.create({color:"yellow",textColor:"black",message:"Wallet not connected!"});return}let a=new te.GmClientService;if(e.order&&r.value){const i=await a.getCreateExchangeTransaction($().connection,e.order,F().publicKey.value,r.value,_e);try{const u=await F().sendTransaction(i.transaction,$().connection);await $e(u)}catch(u){ce.create({color:"red",message:`${u}`,timeout:5e3})}}}return(a,i)=>(z(),Ce(Ve,null,[m("div",In,[m("div",An,[zn,c(vt),m("div",qn,I(p(yt)(n.order.owner)),1)]),c(le,{dense:"",square:"",filled:"",label:"Price",disable:"",modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=u=>t.value=u)},null,8,["modelValue"]),c(le,{dense:"",square:"",filled:"",modelValue:r.value,"onUpdate:modelValue":i[1]||(i[1]=u=>r.value=u),type:"number",label:`Amount  [available: ${s.value}]`,rules:[u=>u<=s.value||`Max remaining are: ${s.value}`],"hide-hint":""},null,8,["modelValue","label","rules"]),c(G,{onClick:i[2]||(i[2]=u=>o()),square:"",class:X(["full-width",n.order.orderType=="buy"?"buy":"sell"]),label:"Fill"},null,8,["class"])]),c(B)],64))}}),Rn={class:"row items-center q-px-sm bg-primary"},Tn=m("div",{class:"text-overline"},"BUY",-1),Un={class:"text-center col text-subtitle2"},Ln=m("div",{class:"text-overline"},"SELL",-1),Fn={class:"row"},En=W({__name:"MarketOrderbookTable",props:{height:{default:"100px"}},setup(n){const e=g({rowsPerPage:0}),t=g([]),s=g([]),r=g(),o=[{name:"size",label:"Size",align:"left",field:"orderQtyRemaining",sortable:!0},{name:"price",align:"right",label:"Price",field:i=>i.uiPrice,sortable:!0}];a();function a(){var i,u,l,d;t.value=[],r.value=[],t.value=De().order_book_service.getBuyOrdersByCurrencyAndItem(((i=P().nfts.find(v=>v.symbol==b().selected_symbol))==null?void 0:i.mint_pair)??"",((u=P().nfts.find(v=>v.symbol==b().selected_symbol))==null?void 0:u.mint_asset)??"").sort((v,h)=>h.uiPrice-v.uiPrice),s.value=De().order_book_service.getSellOrdersByCurrencyAndItem(((l=P().nfts.find(v=>v.symbol==b().selected_symbol))==null?void 0:l.mint_pair)??"",((d=P().nfts.find(v=>v.symbol==b().selected_symbol))==null?void 0:d.mint_asset)??"").sort((v,h)=>v.uiPrice-h.uiPrice)}return ie(()=>b().selected_symbol,()=>{a()}),(i,u)=>{var l,d,v;return z(),Ce(Ve,null,[(l=r.value)!=null&&l.length?(z(),R($n,{key:0,order:r.value[0]},null,8,["order"])):we("",!0),m("div",Rn,[Tn,m("div",Un,I((((d=s.value[0])==null?void 0:d.uiPrice)-((v=t.value[0])==null?void 0:v.uiPrice)).toFixed(4)),1),Ln]),m("div",Fn,[c(Pe,{flat:"",class:"buy col my-sticky-dynamic",dense:"",square:"",pagination:e.value,"rows-per-page-options":[0],rows:t.value,columns:o,"row-key":"id","hide-bottom":"",selection:"single",selected:r.value,"onUpdate:selected":u[0]||(u[0]=h=>r.value=h),"virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48},null,8,["pagination","rows","selected"]),c(B,{vertical:""}),c(Pe,{flat:"",dense:"",square:"",class:"sell col my-sticky-dynamic",pagination:e.value,"rows-per-page-options":[0],rows:s.value,columns:o,"row-key":"id","hide-bottom":"",selection:"single",selected:r.value,"onUpdate:selected":u[1]||(u[1]=h=>r.value=h),"virtual-scroll":"","virtual-scroll-sticky-size-start":48},null,8,["pagination","rows","selected"])])],64)}}}),Dn={class:"row items-center q-gutter-x-xs justify-end"},On={class:"row items-center q-gutter-x-xs justify-end"},Wn=W({__name:"MarketTradesHistory",props:["mint_asset","mint_currency","height"],setup(n){const e=g({rowsPerPage:0}),t=n,s=g([{name:"side",label:"Side",align:"left",field:"side",sortable:!0},{name:"info",align:"left",field:"info",sortable:!0,style:"width: 50px"},{name:"size",align:"right",label:"Size",field:"volume",sortable:!0},{name:"price",align:"right",label:"Price",field:o=>o.price.toFixed(2),sortable:!0}]),r=g();return ye(async()=>{r.value=await $().api_client.trades.getTrades(t.mint_currency,t.mint_asset,50)}),ie(()=>b().selected_nft,async()=>{r.value=await $().api_client.trades.getTrades(t.mint_currency,t.mint_asset,50)}),(o,a)=>(z(),R(Pe,{style:_t("height : "+n.height),rows:r.value,dense:"",square:"",flat:"","virtual-scroll":"",columns:s.value,pagination:e.value,"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"row-key":"name","hide-bottom":""},{body:f(i=>[c(ft,{props:i,class:X(i.row.side=="BUY"?"buy":"sell")},{default:f(()=>[c(Y,{key:"side",props:i},{default:f(()=>[c(pt,{class:X(i.row.side=="BUY"?"buy":"sell")},{default:f(()=>[Q(I(i.row.side),1)]),_:2},1032,["class"])]),_:2},1032,["props"]),c(Y,{key:"info",props:i},{default:f(()=>[c(G,{flat:"",size:"sm",icon:"link",href:"https://solscan.io/tx/"+i.row.signature,target:"_blank"},null,8,["href"])]),_:2},1032,["props"]),c(Y,{key:"size",props:i},{default:f(()=>[m("div",Dn,[m("div",null,I(i.row.size??0),1),c(je,{style:{width:"10px",height:"10px"},url:"sa_files/webp/"+i.row.asset+".webp"},null,8,["url"])])]),_:2},1032,["props"]),c(Y,{key:"price",props:i,class:""},{default:f(()=>[m("div",On,[m("div",null,I(i.row.price??0),1),c(Se,{style:{width:"14px",height:"14px"},currency:p(ee).find(u=>u.mint===i.row.currency)},null,8,["currency"])])]),_:2},1032,["props"])]),_:2},1032,["props","class"])]),_:1},8,["style","rows","columns","pagination"]))}});const Mn=W({__name:"MarketOrders",props:["container_height"],setup(n){const e=g("book");return(t,s)=>(z(),R(me,{flat:"",square:""},{default:f(()=>[c(Ne,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=r=>e.value=r)},{default:f(()=>[c(fe,{name:"book",label:"Book"},{default:f(()=>[c(ve,{"transition-show":"scale","transition-hide":"scale"},{default:f(()=>[Q(" Show pair order-book ")]),_:1})]),_:1}),c(B,{vertical:""}),c(fe,{name:"history",label:"History"},{default:f(()=>[c(ve,{"transition-show":"scale","transition-hide":"scale"},{default:f(()=>[Q(" Show pair history ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),c(B),c(kn,{modelValue:e.value,"onUpdate:modelValue":s[1]||(s[1]=r=>e.value=r),animated:"",class:"text-bold",style:_t("height: "+n.container_height)},{default:f(()=>[c(ct,{name:"book",class:"q-pa-none"},{default:f(()=>[p(De)().is_loading?(z(),R(Qe,{key:0,class:"full-width q-ma-md",size:"xl",color:"secondary"})):(z(),R(En,{key:1,height:n.container_height},null,8,["height"]))]),_:1}),c(ct,{name:"history",class:"q-pa-none"},{default:f(()=>{var r,o;return[c(Wn,{height:n.container_height,mint_currency:(r=p(P)().nfts.find(a=>a.symbol==p(b)().selected_symbol))==null?void 0:r.mint_pair,mint_asset:(o=p(P)().nfts.find(a=>a.symbol==p(b)().selected_symbol))==null?void 0:o.mint_asset},null,8,["height","mint_currency","mint_asset"])]}),_:1})]),_:1},8,["modelValue","style"])]),_:1}))}}),Bn={class:"col q-pa-sm q-gutter-y-xs"},Vn=W({__name:"MarketInput",setup(n){const e=g("buy"),t=g(!1),s=g(0),r=g(0);async function o(a){if(t.value=!0,!F().publicKey.value){ce.create({color:"yellow",textColor:"black",message:"Wallet not connected!"});return}let i=new te.GmClientService;const u=await i.getBnPriceForCurrency($().connection,s.value,new ue(P().nfts.find(d=>d.symbol==b().selected_symbol).mint_pair),_e),l=await i.getInitializeOrderTransaction($().connection,F().publicKey.value,new ue(P().nfts.find(d=>d.symbol==b().selected_symbol).mint_asset),new ue(P().nfts.find(d=>d.symbol==b().selected_symbol).mint_pair),r.value,u,_e,a);try{const d=await F().sendTransaction(l.transaction,$().connection,{signers:l.signers});await $e(d)}catch(d){ce.create({color:"red",message:`${d}`,timeout:5e3})}t.value=!1}return(a,i)=>(z(),R(me,{square:"",flat:"",class:""},{default:f(()=>[c(Ne,{modelValue:e.value,"onUpdate:modelValue":i[0]||(i[0]=u=>e.value=u),"indicator-color":"transparent"},{default:f(()=>[c(fe,{class:X(e.value=="buy"?"buy":""),name:"buy",label:"Buy"},null,8,["class"]),c(B,{vertical:""}),c(fe,{class:X(e.value=="sell"?"sell":""),name:"sell",label:"Sell"},null,8,["class"])]),_:1},8,["modelValue"]),c(B),m("div",Bn,[m("div",null,[c(le,{dense:"",square:"",filled:"",label:"Price",modelValue:s.value,"onUpdate:modelValue":i[1]||(i[1]=u=>s.value=u),type:"number"},null,8,["modelValue"])]),m("div",null,[c(le,{dense:"",square:"",filled:"",label:"Amount",modelValue:r.value,"onUpdate:modelValue":i[2]||(i[2]=u=>r.value=u),type:"number"},null,8,["modelValue"])]),c(G,{loading:t.value,onClick:i[3]||(i[3]=u=>o(e.value=="buy"?p(te.OrderSide).Buy:p(te.OrderSide).Sell)),square:"",class:X(["full-width",e.value=="buy"?"buy":"sell"]),label:e.value},null,8,["loading","class","label"])])]),_:1}))}}),Qn={class:"row q-gutter-x-sm"},Nn={class:"row justify-end q-gutter-x-sm"},jn=W({__name:"MarketOpenOrderTable",setup(n){const e=g({rowsPerPage:0}),t=g(),s=[{name:"asset",label:"Asset",align:"left",field:"orderQtyRemaining",sortable:!0},{name:"pair",label:"Pair",align:"left",field:"orderQtyRemaining",sortable:!0},{name:"side",label:"Side",align:"left",field:"orderQtyRemaining",sortable:!0},{name:"price",label:"Price",align:"right",field:"orderQtyRemaining",sortable:!0},{name:"volume",label:"Volume",align:"right",field:"orderQtyRemaining",sortable:!0},{name:"size",label:"Size",align:"right",field:"orderQtyRemaining",sortable:!0},{name:"actions",align:"right",field:"orderQtyRemaining"}];ye(async()=>{await r()}),ie(()=>F().publicKey.value,async()=>{await r()});async function r(){if(F().publicKey.value){t.value=[];let a=new te.GmClientService;t.value=await a.getOpenOrdersForPlayer($().connection,F().publicKey.value,_e)}}async function o(a){if(!F().publicKey.value){ce.create({color:"yellow",textColor:"black",message:"Wallet not connected!"});return}const u=await new te.GmClientService().getCancelOrderTransaction($().connection,new ue(a.id),F().publicKey.value,_e);try{const l=await F().sendTransaction(u.transaction,$().connection);await $e(l),await r()}catch(l){ce.create({color:"red",message:`${l}`,timeout:5e3})}}return(a,i)=>p(F)().publicKey.value?(z(),R(me,{key:0,flat:"",class:""},{default:f(()=>{var u;return[(u=t.value)!=null&&u.length?(z(),R(Pe,{key:1,rows:t.value,dense:"",square:"",flat:"","virtual-scroll":"",columns:s,pagination:e.value,"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"row-key":"name","hide-bottom":""},{body:f(l=>[c(ft,{props:l},{default:f(()=>[c(Y,{key:"asset",props:l},{default:f(()=>[m("div",Qn,[c(je,{url:"sa_files/webp/"+l.row.orderMint+".webp"},null,8,["url"]),m("div",null,I(p(P)().raw.find(d=>d.mint==l.row.orderMint).name),1)])]),_:2},1032,["props"]),c(Y,{key:"pair",props:l},{default:f(()=>[Q(I(p(P)().raw.find(d=>d.mint==l.row.orderMint).symbol)+I(p(ee).find(d=>d.mint==l.row.currencyMint).name),1)]),_:2},1032,["props"]),c(Y,{key:"side",props:l},{default:f(()=>[c(pt,{class:X(["text-uppercase",l.row.orderType=="buy"?"buy":"sell"])},{default:f(()=>[Q(I(l.row.orderType),1)]),_:2},1032,["class"])]),_:2},1032,["props"]),c(Y,{key:"price",props:l},{default:f(()=>[m("div",Nn,[m("div",null,I(l.row.price*Math.pow(10,-l.row.currencyDecimals)),1),c(Se,{currency:p(ee).find(d=>d.mint==l.row.currencyMint)},null,8,["currency"])])]),_:2},1032,["props"]),c(Y,{key:"volume",props:l},{default:f(()=>[Q(I(l.row.orderOriginationQty*(l.row.price*Math.pow(10,-l.row.currencyDecimals))),1)]),_:2},1032,["props"]),c(Y,{key:"size",props:l},{default:f(()=>[Q(I(l.row.orderQtyRemaining)+"/"+I(l.row.orderOriginationQty),1)]),_:2},1032,["props"]),c(Y,{key:"actions",props:l},{default:f(()=>[c(G,{color:"secondary",size:"xs",icon:"cancel",onClick:d=>o(l.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])):(z(),R(Qe,{key:0,class:"full-width q-ma-md",size:"xl",color:"secondary"}))]}),_:1})):(z(),R(me,{key:1,flat:"",class:"row items-center justify-center"},{default:f(()=>[c(p(Ot),{dark:""})]),_:1}))}}),Hn=W({__name:"MarketInputGridTable",props:["orders"],setup(n){const e=g({rowsPerPage:0}),t=n,s=[{name:"side",required:!0,label:"Side",align:"left",field:r=>r.side,sortable:!0},{name:"size",required:!0,label:"Size",align:"right",field:r=>r.size,sortable:!0},{name:"price",required:!0,label:"Price",align:"right",field:r=>r.price,sortable:!0}];return(r,o)=>(z(),Ce(Ve,null,[c(B),c(Pe,{flat:"",pagination:e.value,"rows-per-page-options":[0],title:"Orders",rows:t.orders,columns:s,"row-key":"name","hide-bottom":""},null,8,["pagination","rows"])],64))}}),Gn={class:"q-pt-xs"},Kn=m("div",{class:"text-center text-subtitle1"},"Grid",-1),Jn={class:"col q-pa-sm q-gutter-y-xs"},Yn={class:"row q-gutter-x-xs"},Xn={class:"row q-gutter-x-xs"},Zn={class:"row q-gutter-x-xs"},ei=W({__name:"MarketInputGrid",setup(n){const e=g("buy"),t=g(!1);g(0),g(0);const s=g(0),r=g(0),o=g(0),a=g(0);function i(v){return Number(s.value)+s.value*(r.value/100)*v}const u=k(()=>{let v=[];for(let h=0;h<a.value;h++)v.push({side:"buy",price:i(h),size:o.value});return v});async function l(v){if(t.value=!0,!F().publicKey.value){ce.create({color:"yellow",textColor:"black",message:"Wallet not connected!"});return}let h=new te.GmClientService;const w=new Wt;for(const q of u.value){const U=await h.getBnPriceForCurrency($().connection,q.price,new ue(b().selected_nft.mint_pair),_e),E=await h.getInitializeOrderTransaction($().connection,F().publicKey.value,new ue(b().selected_nft.mint_asset),new ue(b().selected_nft.mint_pair),q.size,U,_e,v);w.add(E.transaction)}try{const q=await F().sendTransaction(w,$().connection);await $e(q)}catch(q){ce.create({color:"red",message:`${q}`,timeout:5e3})}t.value=!1}function d(){s.value=0,r.value=0,o.value=0,a.value=0}return(v,h)=>(z(),R(me,{flat:""},{default:f(()=>[m("div",Gn,[Kn,c(B)]),c(Ne,{modelValue:e.value,"onUpdate:modelValue":h[0]||(h[0]=w=>e.value=w),"indicator-color":"transparent"},{default:f(()=>[c(fe,{class:X(e.value=="buy"?"buy":""),name:"buy",label:"Buy"},null,8,["class"]),c(B,{vertical:""}),c(fe,{class:X(e.value=="sell"?"sell":""),name:"sell",label:"Sell"},null,8,["class"])]),_:1},8,["modelValue"]),c(B),m("div",Jn,[m("div",Yn,[c(le,{class:"col",dense:"",square:"",filled:"",label:"Best price",modelValue:s.value,"onUpdate:modelValue":h[1]||(h[1]=w=>s.value=w),type:"number"},null,8,["modelValue"]),c(le,{class:"col",dense:"",square:"",filled:"",label:"Change percent",modelValue:r.value,"onUpdate:modelValue":h[2]||(h[2]=w=>r.value=w),type:"number"},null,8,["modelValue"])]),m("div",Xn,[c(le,{class:"col",dense:"",square:"",filled:"",label:"Number of bids",modelValue:a.value,"onUpdate:modelValue":h[3]||(h[3]=w=>a.value=w),type:"number"},null,8,["modelValue"]),c(le,{class:"col",dense:"",square:"",filled:"",label:"Size of bid",modelValue:o.value,"onUpdate:modelValue":h[4]||(h[4]=w=>o.value=w),type:"number"},null,8,["modelValue"])]),m("div",Zn,[c(G,{loading:t.value,onClick:h[5]||(h[5]=w=>l(e.value=="buy"?p(te.OrderSide).Buy:p(te.OrderSide).Sell)),square:"",class:X(["col",e.value=="buy"?"buy":"sell"]),label:e.value},null,8,["loading","class","label"]),c(G,{onClick:h[6]||(h[6]=w=>d()),square:"",color:"primary",size:"sm",class:"col-1",icon:"cancel"})])]),s.value>0&&r.value>0&&a.value>0&&o.value>0?(z(),R(Hn,{key:0,orders:u.value},null,8,["orders"])):we("",!0)]),_:1}))}}),ti=W({__name:"SolscanButton",props:["mint"],setup(n){return(e,t)=>(z(),R(G,{square:"",color:"primary",target:"_blank",href:"https://solscan.io/token/"+n.mint},{default:f(()=>[c(mt,{size:"xs"},{default:f(()=>[c(gt,{src:"images/solscan.png"})]),_:1}),c(ve,null,{default:f(()=>[Q("view on solscan.io")]),_:1})]),_:1},8,["href"]))}}),ni=W({__name:"StarAtlasButton",props:["mint"],setup(n){return(e,t)=>(z(),R(G,{square:"",color:"primary",target:"_blank",href:"https://play.staratlas.com/market/"+n.mint},{default:f(()=>[c(mt,{size:"xs"},{default:f(()=>[c(gt,{src:"currencies/ATLAS.webp"})]),_:1}),c(ve,null,{default:f(()=>[Q("view on staratlas.com")]),_:1})]),_:1},8,["href"]))}}),ii={class:"col text-center"},qe=W({__name:"MarketPriceChangeElement",props:["timespan"],setup(n){const e=n,t=g([]);async function s(){var r,o;t.value=await $().api_client.trades.getPriceChange(((r=P().nfts.find(a=>a.symbol==b().selected_symbol))==null?void 0:r.mint_pair)??"",((o=P().nfts.find(a=>a.symbol==b().selected_symbol))==null?void 0:o.mint_asset)??"",e.timespan)}return ye(async()=>{await s()}),ie(()=>b().selected_symbol,async()=>{await s()}),(r,o)=>{var a,i,u;return z(),Ce("div",{class:X(["q-pa-xs q-ma-xs",((a=t.value[0])==null?void 0:a.price_change_percentage)>0?"buy":"sell"])},[m("div",ii,[m("div",null,I(((u=(i=t.value[0])==null?void 0:i.price_change_percentage)==null?void 0:u.toFixed(2))??"0.0")+"%",1),m("div",null,I(e.timespan.toUpperCase()),1)]),c(ve,null,{default:f(()=>[Q("price change")]),_:1})],2)}}}),si={class:"col"},ri={class:"row justify-between"},oi=m("div",{class:"text-weight-light"},"Name",-1),ai={class:"text-body1"},li={class:"row justify-between"},ui=m("div",{class:"text-weight-light"},"Symbol",-1),ci={class:"text-body1"},di={class:"row justify-between"},hi=m("div",{class:"text-weight-light"},"Address",-1),_i={class:"text-body1"},mi={class:"row justify-between"},pi=m("div",{class:"text-weight-light"},"Supply",-1),fi={class:"text-body1"},vi={class:"row justify-between"},yi=m("div",{class:"text-weight-light"},"Holders",-1),gi={class:"text-subtitle1"},bi={class:"row q-my-xs q-gutter-x-sm justify-end"},wi={class:"col"},Si={class:"row"},Pi={class:"row"},Ci=W({__name:"MarketInfo",setup(n){const e=g(),t=g();async function s(){var o;e.value=0,e.value=(await $().connection.getTokenSupply(new ue(((o=P().nfts.find(a=>a.symbol==b().selected_symbol))==null?void 0:o.mint_asset)??""))).value.uiAmount}async function r(){var o;t.value=0,t.value=(await $().connection.getParsedProgramAccounts(Mt,{filters:[{dataSize:165},{memcmp:{offset:0,bytes:((o=P().nfts.find(a=>a.symbol==b().selected_symbol))==null?void 0:o.mint_asset)??""}}]})).filter(a=>a.account.data.parsed.info.tokenAmount.uiAmount>0)}return ye(async()=>{await s(),await r()}),ie(()=>b().selected_symbol,async()=>{await s(),await r()}),(o,a)=>(z(),R(me,{square:"",flat:"",class:"q-pa-sm"},{default:f(()=>{var i,u,l;return[m("div",si,[m("div",ri,[oi,m("div",ai,I(p(P)().nfts.find(d=>d.symbol==p(b)().selected_symbol).name),1)]),m("div",li,[ui,m("div",ci,I(p(P)().nfts.find(d=>d.symbol==p(b)().selected_symbol).symbol),1)]),m("div",di,[hi,m("div",_i,I(p(yt)(p(P)().nfts.find(d=>d.symbol==p(b)().selected_symbol).mint_asset)),1)]),m("div",mi,[pi,m("div",fi,I(e.value),1)]),m("div",vi,[yi,m("div",gi,I((i=t.value)==null?void 0:i.length),1)])]),m("div",bi,[c(ti,{class:"col",mint:(u=p(P)().nfts.find(d=>d.symbol==p(b)().selected_symbol))==null?void 0:u.mint_asset},null,8,["mint"]),c(ni,{class:"col",mint:(l=p(P)().nfts.find(d=>d.symbol==p(b)().selected_symbol))==null?void 0:l.mint_asset},null,8,["mint"])]),m("div",wi,[m("div",Si,[c(qe,{class:"col",timespan:"day"}),c(qe,{class:"col",timespan:"week"})]),m("div",Pi,[c(qe,{class:"col",timespan:"month"}),c(qe,{class:"col",timespan:"year"})])])]}),_:1}))}}),xi={class:"row q-gutter-x-xs"},ki={class:"col fit q-gutter-y-xs"},Ii={class:"col-3 q-gutter-y-xs"},Vi=W({__name:"MarketPage",setup(n){const e=k(()=>($().settings.enable_grid_orders,"calc(100vh - 70vh)"));return(t,s)=>p($)().is_done?(z(),R(nt,{key:0,class:"bg-image-dark"},{default:f(()=>[c(yn,{class:"q-mb-xs"}),m("div",xi,[m("div",ki,[p(b)().selected_symbol&&p($)().settings.enable_tv_chart?(z(),R(an,{key:0,style:{height:"calc(100vh - 20vh - 6vh)"}})):we("",!0),c(jt,{style:{height:"calc(100vh - 88vh)"}},{default:f(()=>[c(jn)]),_:1})]),m("div",Ii,[c(Ci),c(Vn),p($)().settings.enable_grid_orders?(z(),R(ei,{key:0})):we("",!0),c(Mn,{container_height:e.value,class:""},null,8,["container_height"])])])]),_:1})):(z(),R(nt,{key:1,class:"q-gutter-y-sm row items-center"},{default:f(()=>[c(Qe,{class:"full-width q-ma-md",size:"xl",color:"secondary"})]),_:1}))}});export{Vi as default};
