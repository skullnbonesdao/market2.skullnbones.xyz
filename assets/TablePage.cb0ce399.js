import{a as j,b as Y,Q as E}from"./QSpace.ce120896.js";import{c as se,Q as ne,a as _,b as ie}from"./QTr.73de2f9f.js";import{a9 as V,n as h,aI as c,Z as g,bc as r,a6 as S,H as k,_ as oe,$ as P,a7 as a,a0 as A,cc as ee,cb as ue,aC as ce,b7 as H,cn as M,ch as y,ci as w,d2 as q,d7 as D,aO as Z,A as u,M as J,cp as de}from"./index.bba87bb0.js";import{Q as C,k as ae,i as me,n as _e}from"./QTooltip.1817dff6.js";import{Q as te}from"./QImg.b1a3b907.js";import{Q as ye}from"./QSeparator.40a953a7.js";import{Q as be}from"./QPage.0e3dbe0b.js";import{P as Q}from"./PirceElement.467d715f.js";import{b as K,_ as fe,a as pe}from"./MarketPriceChangeElement.74bda5ef.js";import"./QResizeObserver.2f1f2f68.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./use-dark.4f171897.js";var re=(l=>(l.Access="access",l.Collectible="collectible",l.Currency="currency",l.Memories="memories",l.Resource="resource",l.Ship="ship",l.Story="story",l.Structure="structure",l))(re||{});const ge=V({__name:"RarityBadge",props:["rarity"],setup(l){const d=h(l.rarity.slice(0,1)[0]);return(U,B)=>l.rarity=="uncommon"?(c(),g(C,{key:0,floating:"",color:"red",class:"text-uppercase"},{default:r(()=>[S(k(d.value),1)]),_:1})):l.rarity=="common"?(c(),g(C,{key:1,floating:"",color:"grey",class:"text-uppercase"},{default:r(()=>[S(k(d.value),1)]),_:1})):l.rarity=="rare"?(c(),g(C,{key:2,floating:"",color:"blue",class:"text-uppercase"},{default:r(()=>[S(k(d.value),1)]),_:1})):l.rarity=="anomaly"?(c(),g(C,{key:3,floating:"",color:"teal",class:"text-uppercase"},{default:r(()=>[S(k(d.value),1)]),_:1})):l.rarity=="epic"?(c(),g(C,{key:4,floating:"",color:"green",class:"text-uppercase"},{default:r(()=>[S(k(d.value),1)]),_:1})):l.rarity=="legendary"?(c(),g(C,{key:5,floating:"",color:"orange",class:"text-uppercase"},{default:r(()=>[S(k(d.value),1)]),_:1})):oe("",!0)}}),ke={class:"row"},ve={class:"col"},W=V({__name:"MarketTrendElement",props:["percentage","currency"],setup(l){return(x,d)=>(c(),P("div",ke,[a(ae,{"transition-show":"flip-right","transition-hide":"flip-left"},{default:r(()=>[S(k(l.currency.name),1)]),_:1}),A("div",ve,k(l.percentage==0?"-":l.percentage),1)]))}}),X=V({__name:"MarketButton",props:["symbol","pair"],setup(l){const x=l;return(d,U)=>(c(),g(ue,{square:"",color:"primary",to:"/market/"+x.symbol},{default:r(()=>[a(ee,{size:"xs"},{default:r(()=>[a(te,{src:"currencies/"+x.pair.toUpperCase()+".webp"},null,8,["src"])]),_:1}),a(ae,null,{default:r(()=>[S("view in market")]),_:1})]),_:1},8,["to"]))}}),we={key:0,class:"row"},Se=A("div",{class:"text-body1 text-weight-light q-mr-md"},"Timeframe:",-1),he={class:"text-h6"},Ae={class:"text-subtitle2"},xe={class:"text-caption"},Ce={class:"col"},Ne=V({__name:"TablePage",setup(l){const x=h({rowsPerPage:0}),d=h("day"),U=h(),B=h(!0),le=[{name:"image",required:!0,label:"",field:"image",align:"left",sortable:!0,style:"width: 50px"},{name:"name",required:!0,label:"Asset",field:"name",align:"left",sortable:!0},{name:"market_atlas",required:!0,label:"Market [ATLAS]",align:"center",sortable:!0,field:n=>n.market.atlas},{name:"market_atlas_change",required:!0,label:"",align:"center",sortable:!1},{name:"market_usdc",required:!0,label:"Market [USDC]",align:"center",sortable:!0,field:n=>n.market.usdc},{name:"market_usdc_change",required:!0,label:"",align:"left",sortable:!1},{name:"buy_orders_atlas",required:!0,label:"BUY [ATLAS]",align:"right",sortable:!0,style:"width: 100px",field:n=>n.orderbok.buy.atlas},{name:"buy_orders_usdc",required:!0,label:"BUY [USDC]",align:"right",sortable:!0,style:"width: 100px",field:n=>n.orderbok.buy.usdc},{name:"spread",required:!0,label:"Spread",align:"center",sortable:!0,style:"width: 20px"},{name:"sell_orders_atlas",required:!0,label:"Sell [ATLAS]",align:"left",sortable:!0,style:"width: 100px",field:n=>n.orderbok.sell.atlas},{name:"sell_orders_usdc",required:!0,label:"SELL [USDC]",align:"left",sortable:!0,style:"width: 100px",field:n=>n.orderbok.sell.usdc},{name:"action",required:!0,label:"",align:"left",style:"width: 100px"}],L=h([]),T=h(re.Ship);ce(async()=>{await $()}),H(()=>M().is_done,async()=>{await $()}),H(()=>T.value,async()=>{await $()});async function $(){var e,t,i,b,f,p,O,z,I,R,F,G;B.value=!0,L.value=[];const n=await M().api_client.trades.getPrices(((e=y.find(o=>o.type==w.USDC))==null?void 0:e.mint)??"none"),m=await M().api_client.trades.getPrices(((t=y.find(o=>o.type==w.ATLAS))==null?void 0:t.mint)??"none");for(const o of q().raw.filter(s=>s.attributes.itemType==T.value))L.value.push({name:o.name.toString(),mint:o.mint.toString(),attributes:o.attributes,symbol:o.symbol,url:"sa_files/webp/"+o.mint.toString()+".webp",market:{atlas:((i=m.find(s=>s.asset==o.mint.toString()))==null?void 0:i.price)??void 0,usdc:((b=n.find(s=>s.asset==o.mint.toString()))==null?void 0:b.price)??void 0},orderbok:{buy:{atlas:(p=D().order_book_service.getBuyOrdersByCurrencyAndItem(((f=y.find(s=>s.name=="ATLAS"))==null?void 0:f.mint)??"",o.mint).sort((s,v)=>s.price-v.price).reverse()[0])==null?void 0:p.uiPrice,usdc:(z=D().order_book_service.getBuyOrdersByCurrencyAndItem(((O=y.find(s=>s.name=="USDC"))==null?void 0:O.mint)??"",o.mint).sort((s,v)=>s.price-v.price).reverse()[0])==null?void 0:z.uiPrice},sell:{atlas:(R=D().order_book_service.getSellOrdersByCurrencyAndItem(((I=y.find(s=>s.name=="ATLAS"))==null?void 0:I.mint)??"",o.mint).sort((s,v)=>s.price-v.price)[0])==null?void 0:R.uiPrice,usdc:(G=D().order_book_service.getSellOrdersByCurrencyAndItem(((F=y.find(s=>s.name=="USDC"))==null?void 0:F.mint)??"",o.mint).sort((s,v)=>s.price-v.price)[0])==null?void 0:G.uiPrice}}}),L.value.sort((s,v)=>(s.orderbok.buy.usdc??0)-(v.orderbok.buy.usdc??0));B.value=!1}function N(n,m){return n-m<0?((n-m)/m).toFixed(2)+"%":0}return(n,m)=>(c(),g(be,{class:"row q-pa-sm justify-around"},{default:r(()=>[A("div",null,[a(Y,{align:"justify",modelValue:T.value,"onUpdate:modelValue":m[0]||(m[0]=e=>T.value=e)},{default:r(()=>[(c(!0),P(J,null,Z(u(q)().get_itemTypes,e=>(c(),g(j,{name:e,label:e,key:e},null,8,["name","label"]))),128))]),_:1},8,["modelValue"]),B.value?(c(),P("div",we,[a(E),a(se,{class:"row",color:"primary",size:"3rem"}),a(E)])):(c(),g(ne,{key:1,flat:"",bordered:"",title:"Treats",rows:L.value,columns:le,"row-key":"index",pagination:x.value,"rows-per-page-options":[0],filter:U.value},{top:r(()=>[Se,a(Y,{"active-bg-color":"primary",dense:"",modelValue:d.value,"onUpdate:modelValue":m[1]||(m[1]=e=>d.value=e)},{default:r(()=>[(c(),P(J,null,Z(["day","week","month","year"],e=>a(j,{name:e,label:e,key:e},null,8,["name","label"])),64))]),_:1},8,["modelValue"]),a(E),a(me,{filled:"",dense:"",modelValue:U.value,"onUpdate:modelValue":m[2]||(m[2]=e=>U.value=e)},{after:r(()=>[a(de,{size:"sm",name:"fa-solid fa-magnifying-glass"})]),_:1},8,["modelValue"])]),body:r(e=>[a(ie,{props:e},{default:r(()=>[a(_,{key:"image",props:e},{default:r(()=>[a(_e,{side:"",class:"row"},{default:r(()=>[a(ee,{rounded:"",size:"48px"},{default:r(()=>[a(te,{height:"50px",fetchpriority:"low",src:e.row.url},null,8,["src"]),a(ge,{rarity:e.row.attributes.rarity},null,8,["rarity"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"]),a(_,{key:"name",props:e},{default:r(()=>[A("div",he,k(e.row.symbol),1),A("div",Ae,k(e.row.name),1)]),_:2},1032,["props"]),a(_,{key:"market_atlas",props:e,class:""},{default:r(()=>{var t;return[a(Q,{label:"ATLAS",value:(t=e.row.market)==null?void 0:t.atlas},null,8,["value"])]}),_:2},1032,["props"]),a(_,{key:"market_atlas_change",props:e,class:""},{default:r(()=>{var t;return[a(K,{class:"col",timespan:d.value,asset:e.row.mint,currency:(t=u(y).find(i=>i.type==u(w).ATLAS))==null?void 0:t.mint,disable_timespan:"true",enable_volume:"true"},null,8,["timespan","asset","currency"])]}),_:2},1032,["props"]),a(_,{key:"market_usdc",props:e,class:""},{default:r(()=>{var t;return[a(Q,{label:"USDC",value:(t=e.row.market)==null?void 0:t.usdc},null,8,["value"])]}),_:2},1032,["props"]),a(_,{key:"market_usdc_change",props:e,class:""},{default:r(()=>{var t;return[a(K,{class:"col",timespan:d.value,asset:e.row.mint,currency:(t=u(y).find(i=>i.type==u(w).USDC))==null?void 0:t.mint,disable_timespan:"true",enable_volume:"true"},null,8,["timespan","asset","currency"])]}),_:2},1032,["props"]),a(_,{key:"buy_orders_atlas",props:e,class:"buy"},{default:r(()=>{var t;return[a(Q,{class:"",label:"ATLAS",value:(t=e.row.orderbok.buy)==null?void 0:t.sell},null,8,["value"])]}),_:2},1032,["props"]),a(_,{key:"buy_orders_usdc",props:e,class:"buy"},{default:r(()=>{var t;return[a(Q,{label:"USDC",value:(t=e.row.orderbok.buy)==null?void 0:t.usdc},null,8,["value"])]}),_:2},1032,["props"]),a(_,{key:"spread",class:"",props:e},{default:r(()=>{var t,i,b,f;return[A("div",xe,[A("div",Ce,[a(W,{currency:u(y).find(p=>p.type==u(w).ATLAS),percentage:N((t=e.row.orderbok.buy)==null?void 0:t.atlas,(i=e.row.orderbok.sell)==null?void 0:i.atlas)},null,8,["currency","percentage"]),a(ye),a(W,{currency:u(y).find(p=>p.type==u(w).USDC),percentage:N((b=e.row.orderbok.buy)==null?void 0:b.usdc,(f=e.row.orderbok.sell)==null?void 0:f.usdc)},null,8,["currency","percentage"])])])]}),_:2},1032,["props"]),a(_,{key:"sell_orders_atlas",props:e,class:"sell"},{default:r(()=>{var t;return[a(Q,{label:"ATLAS",value:(t=e.row.orderbok.sell)==null?void 0:t.atlas},null,8,["value"])]}),_:2},1032,["props"]),a(_,{key:"sell_orders_usdc",props:e,class:"sell"},{default:r(()=>{var t,i;return[a(Q,{label:"USDC",value:(i=(t=e.row.orderbok)==null?void 0:t.sell)==null?void 0:i.usdc},null,8,["value"])]}),_:2},1032,["props"]),a(_,{key:"action",props:e},{default:r(()=>{var t,i;return[a(fe,{mint:e.row.mint},null,8,["mint"]),a(pe,{mint:e.row.mint},null,8,["mint"]),a(X,{pair:"ATLAS",symbol:(t=u(q)().nfts.find(b=>{var f;return b.mint_asset==e.row.mint&&b.mint_pair==((f=u(y).find(p=>p.type==u(w).ATLAS))==null?void 0:f.mint)}))==null?void 0:t.symbol},null,8,["symbol"]),a(X,{pair:"USDC",symbol:(i=u(q)().nfts.find(b=>{var f;return b.mint_asset==e.row.mint&&b.mint_pair==((f=u(y).find(p=>p.type==u(w).USDC))==null?void 0:f.mint)}))==null?void 0:i.symbol},null,8,["symbol"])]}),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","filter"]))])]),_:1}))}});export{Ne as default};
