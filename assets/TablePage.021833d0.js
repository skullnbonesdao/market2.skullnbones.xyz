import{a as j,b as Y,Q as E}from"./QSpace.3f6a4e72.js";import{c as se,d as ie,Q as ne,a as p,b as oe}from"./QTr.3a31a3f6.js";import{a9 as V,n as A,aI as d,Z as g,bc as t,a6 as x,H as v,_ as ue,$ as P,a0 as S,a7 as a,cc as ee,cb as ae,aC as ce,b7 as H,ca as M,ch as _,ci as w,d1 as D,d5 as q,aO as Z,A as c,M as J,cl as de}from"./index.c5469f4d.js";import{Q as C,i as me,p as ye}from"./use-checkbox.dfd6c7e1.js";import{Q as te}from"./QImg.29df115d.js";import{Q as _e}from"./QSeparator.576f29e8.js";import{Q as be}from"./QPage.73be65fd.js";import{P as Q}from"./PirceElement.c94fc909.js";import{b as K,_ as fe,a as pe}from"./MarketPriceChangeElement.b58e35bc.js";import"./QResizeObserver.5f15d7f1.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./use-dark.05712e7a.js";var re=(l=>(l.Access="access",l.Collectible="collectible",l.Currency="currency",l.Memories="memories",l.Resource="resource",l.Ship="ship",l.Story="story",l.Structure="structure",l))(re||{});const ge=V({__name:"RarityBadge",props:["rarity"],setup(l){const m=A(l.rarity.slice(0,1)[0]);return(U,B)=>l.rarity=="uncommon"?(d(),g(C,{key:0,floating:"",color:"red",class:"text-uppercase"},{default:t(()=>[x(v(m.value),1)]),_:1})):l.rarity=="common"?(d(),g(C,{key:1,floating:"",color:"grey",class:"text-uppercase"},{default:t(()=>[x(v(m.value),1)]),_:1})):l.rarity=="rare"?(d(),g(C,{key:2,floating:"",color:"blue",class:"text-uppercase"},{default:t(()=>[x(v(m.value),1)]),_:1})):l.rarity=="anomaly"?(d(),g(C,{key:3,floating:"",color:"teal",class:"text-uppercase"},{default:t(()=>[x(v(m.value),1)]),_:1})):l.rarity=="epic"?(d(),g(C,{key:4,floating:"",color:"green",class:"text-uppercase"},{default:t(()=>[x(v(m.value),1)]),_:1})):l.rarity=="legendary"?(d(),g(C,{key:5,floating:"",color:"orange",class:"text-uppercase"},{default:t(()=>[x(v(m.value),1)]),_:1})):ue("",!0)}}),ke={class:"row"},ve={class:"col"},W=V({__name:"MarketTrendElement",props:["percentage","currency"],setup(l){return(h,m)=>(d(),P("div",ke,[S("div",ve,v(l.percentage==0?"-":l.percentage),1)]))}}),X=V({__name:"MarketButton",props:["symbol","pair"],setup(l){const h=l;return(m,U)=>(d(),g(ae,{square:"",color:"primary",to:"/market/"+h.symbol},{default:t(()=>[a(ee,{size:"xs"},{default:t(()=>[a(te,{src:"currencies/"+h.pair.toUpperCase()+".webp"},null,8,["src"])]),_:1}),a(se,null,{default:t(()=>[x("view in market")]),_:1})]),_:1},8,["to"]))}}),we={key:0,class:"row"},Se=S("div",{class:"text-body1 text-weight-light q-mr-md"},"Timeframe:",-1),Ae={class:"text-h6"},xe={class:"text-subtitle2"},he={class:"row"},Ce={class:"row"},Qe={class:"col"},Oe=V({__name:"TablePage",setup(l){const h=A({rowsPerPage:0}),m=A("day"),U=A(),B=A(!0),le=[{name:"image",required:!0,label:"",field:"image",align:"left",sortable:!0,style:"width: 50px"},{name:"name",required:!0,label:"Asset",field:"name",align:"left",sortable:!0},{name:"market_atlas",required:!0,label:"Market [ATLAS]",align:"center",sortable:!0,field:i=>i.market.atlas},{name:"market_usdc",required:!0,label:"Market [USDC]",align:"center",sortable:!0,field:i=>i.market.usdc},{name:"buy_orders_atlas",required:!0,label:"BUY [ATLAS]",align:"right",sortable:!0,style:"width: 100px",field:i=>i.orderbok.buy.atlas},{name:"buy_orders_usdc",required:!0,label:"BUY [USDC]",align:"right",sortable:!0,style:"width: 100px",field:i=>i.orderbok.buy.usdc},{name:"spread",required:!0,label:"Spread",align:"center",sortable:!0,style:"width: 20px"},{name:"sell_orders_atlas",required:!0,label:"Sell [ATLAS]",align:"left",sortable:!0,style:"width: 100px",field:i=>i.orderbok.sell.atlas},{name:"sell_orders_usdc",required:!0,label:"SELL [USDC]",align:"left",sortable:!0,style:"width: 100px",field:i=>i.orderbok.sell.usdc},{name:"action",required:!0,label:"",align:"left",style:"width: 100px"}],L=A([]),T=A(re.Ship);ce(async()=>{await $()}),H(()=>M().is_done,async()=>{await $()}),H(()=>T.value,async()=>{await $()});async function $(){var e,r,n,o,b,f,O,z,I,R,F,G;B.value=!0,L.value=[];const i=await M().api_client.trades.getPrices(((e=_.find(u=>u.type==w.USDC))==null?void 0:e.mint)??"none"),y=await M().api_client.trades.getPrices(((r=_.find(u=>u.type==w.ATLAS))==null?void 0:r.mint)??"none");for(const u of D().raw.filter(s=>s.attributes.itemType==T.value))L.value.push({name:u.name.toString(),mint:u.mint.toString(),attributes:u.attributes,symbol:u.symbol,url:"sa_files/webp/"+u.mint.toString()+".webp",market:{atlas:((n=y.find(s=>s.asset==u.mint.toString()))==null?void 0:n.price)??void 0,usdc:((o=i.find(s=>s.asset==u.mint.toString()))==null?void 0:o.price)??void 0},orderbok:{buy:{atlas:(f=q().order_book_service.getBuyOrdersByCurrencyAndItem(((b=_.find(s=>s.name=="ATLAS"))==null?void 0:b.mint)??"",u.mint).sort((s,k)=>s.price-k.price).reverse()[0])==null?void 0:f.uiPrice,usdc:(z=q().order_book_service.getBuyOrdersByCurrencyAndItem(((O=_.find(s=>s.name=="USDC"))==null?void 0:O.mint)??"",u.mint).sort((s,k)=>s.price-k.price).reverse()[0])==null?void 0:z.uiPrice},sell:{atlas:(R=q().order_book_service.getSellOrdersByCurrencyAndItem(((I=_.find(s=>s.name=="ATLAS"))==null?void 0:I.mint)??"",u.mint).sort((s,k)=>s.price-k.price)[0])==null?void 0:R.uiPrice,usdc:(G=q().order_book_service.getSellOrdersByCurrencyAndItem(((F=_.find(s=>s.name=="USDC"))==null?void 0:F.mint)??"",u.mint).sort((s,k)=>s.price-k.price)[0])==null?void 0:G.uiPrice}}}),L.value.sort((s,k)=>(s.orderbok.buy.usdc??0)-(k.orderbok.buy.usdc??0));B.value=!1}function N(i,y){return i-y<0?((i-y)/y).toFixed(2)+"%":0}return(i,y)=>(d(),g(be,{class:"row q-pa-sm justify-center"},{default:t(()=>[S("div",null,[a(Y,{align:"justify",modelValue:T.value,"onUpdate:modelValue":y[0]||(y[0]=e=>T.value=e)},{default:t(()=>[(d(!0),P(J,null,Z(c(D)().get_itemTypes,e=>(d(),g(j,{name:e,label:e,key:e},null,8,["name","label"]))),128))]),_:1},8,["modelValue"]),B.value?(d(),P("div",we,[a(E),a(ie,{class:"row",color:"primary",size:"3rem"}),a(E)])):(d(),g(ne,{key:1,flat:"",bordered:"",title:"Treats",rows:L.value,columns:le,"row-key":"index",pagination:h.value,"rows-per-page-options":[0],filter:U.value},{top:t(()=>[Se,a(Y,{"active-bg-color":"primary",dense:"",modelValue:m.value,"onUpdate:modelValue":y[1]||(y[1]=e=>m.value=e)},{default:t(()=>[(d(),P(J,null,Z(["day","week","month","year"],e=>a(j,{name:e,label:e,key:e},null,8,["name","label"])),64))]),_:1},8,["modelValue"]),a(E),a(me,{filled:"",dense:"",modelValue:U.value,"onUpdate:modelValue":y[2]||(y[2]=e=>U.value=e)},{after:t(()=>[a(de,{size:"sm",name:"fa-solid fa-magnifying-glass"})]),_:1},8,["modelValue"])]),body:t(e=>[a(oe,{props:e},{default:t(()=>[a(p,{key:"image",props:e},{default:t(()=>[a(ye,{side:"",class:"row"},{default:t(()=>[a(ee,{rounded:"",size:"48px"},{default:t(()=>[a(te,{height:"50px",fetchpriority:"low",src:e.row.url},null,8,["src"]),a(ge,{rarity:e.row.attributes.rarity},null,8,["rarity"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"]),a(p,{key:"name",props:e},{default:t(()=>[S("div",Ae,v(e.row.symbol),1),S("div",xe,v(e.row.name),1)]),_:2},1032,["props"]),a(p,{key:"market_atlas",props:e,class:""},{default:t(()=>{var r,n;return[S("div",he,[a(Q,{label:"ATLAS",value:(r=e.row.market)==null?void 0:r.atlas},null,8,["value"]),a(K,{class:"col",timespan:m.value,asset:e.row.mint,currency:(n=c(_).find(o=>o.type==c(w).ATLAS))==null?void 0:n.mint,disable_timespan:"true"},null,8,["timespan","asset","currency"])])]}),_:2},1032,["props"]),a(p,{key:"market_usdc",props:e,class:""},{default:t(()=>{var r,n;return[S("div",Ce,[a(Q,{label:"USDC",value:(r=e.row.market)==null?void 0:r.usdc},null,8,["value"]),a(K,{class:"col",timespan:m.value,asset:e.row.mint,currency:(n=c(_).find(o=>o.type==c(w).USDC))==null?void 0:n.mint,disable_timespan:"true"},null,8,["timespan","asset","currency"])])]}),_:2},1032,["props"]),a(p,{key:"buy_orders_atlas",props:e,class:"buy"},{default:t(()=>{var r;return[a(Q,{class:"",label:"ATLAS",value:(r=e.row.orderbok.buy)==null?void 0:r.sell},null,8,["value"])]}),_:2},1032,["props"]),a(p,{key:"buy_orders_usdc",props:e,class:"buy"},{default:t(()=>{var r;return[a(Q,{label:"USDC",value:(r=e.row.orderbok.buy)==null?void 0:r.usdc},null,8,["value"])]}),_:2},1032,["props"]),a(p,{key:"spread",class:"market",props:e},{default:t(()=>[a(ae,{class:"text-caption",color:"primary"},{default:t(()=>{var r,n,o,b;return[S("div",Qe,[a(W,{currency:c(_).find(f=>f.type==c(w).ATLAS),percentage:N((r=e.row.orderbok.buy)==null?void 0:r.atlas,(n=e.row.orderbok.sell)==null?void 0:n.atlas)},null,8,["currency","percentage"]),a(_e),a(W,{currency:c(_).find(f=>f.type==c(w).USDC),percentage:N((o=e.row.orderbok.buy)==null?void 0:o.usdc,(b=e.row.orderbok.sell)==null?void 0:b.usdc)},null,8,["currency","percentage"])])]}),_:2},1024)]),_:2},1032,["props"]),a(p,{key:"sell_orders_atlas",props:e,class:"sell"},{default:t(()=>{var r;return[a(Q,{label:"ATLAS",value:(r=e.row.orderbok.sell)==null?void 0:r.atlas},null,8,["value"])]}),_:2},1032,["props"]),a(p,{key:"sell_orders_usdc",props:e,class:"sell"},{default:t(()=>{var r,n;return[a(Q,{label:"USDC",value:(n=(r=e.row.orderbok)==null?void 0:r.sell)==null?void 0:n.usdc},null,8,["value"])]}),_:2},1032,["props"]),a(p,{key:"action",props:e},{default:t(()=>{var r,n;return[a(fe,{mint:e.row.mint},null,8,["mint"]),a(pe,{mint:e.row.mint},null,8,["mint"]),a(X,{pair:"ATLAS",symbol:(r=c(D)().nfts.find(o=>{var b;return o.mint_asset==e.row.mint&&o.mint_pair==((b=c(_).find(f=>f.type==c(w).ATLAS))==null?void 0:b.mint)}))==null?void 0:r.symbol},null,8,["symbol"]),a(X,{pair:"USDC",symbol:(n=c(D)().nfts.find(o=>{var b;return o.mint_asset==e.row.mint&&o.mint_pair==((b=c(_).find(f=>f.type==c(w).USDC))==null?void 0:b.mint)}))==null?void 0:n.symbol},null,8,["symbol"])]}),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","filter"]))])]),_:1}))}});export{Oe as default};
